SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_KaoQinCheck]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_KaoQinCheck](
	[s_id] [int] IDENTITY(1,1) NOT NULL,
	[s_year] [nchar](4) NULL,
	[s_moon] [nchar](2) NULL,
	[s_bid] [int] NULL,
	[s_bname] [varchar](50) NULL,
	[s_uid] [int] NULL,
	[s_date] [datetime] NULL,
 CONSTRAINT [PK_Tunnel_KaoQinCheck] PRIMARY KEY CLUSTERED 
(
	[s_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UmlPoint]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[UmlPoint](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[X] [int] NULL,
	[Y] [int] NULL,
	[Z] [int] NULL,
 CONSTRAINT [RDexUmlPoint] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_Img]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_Img](
	[i_id] [int] IDENTITY(1,1) NOT NULL,
	[i_name] [varchar](50) NULL,
	[i_uri] [varchar](50) NULL,
	[i_date] [datetime] NULL,
	[i_user] [int] NULL,
	[i_type] [varchar](50) NOT NULL CONSTRAINT [DF_Tunnel_Img_i_type]  DEFAULT (''),
	[i_year] [varchar](5) NOT NULL CONSTRAINT [DF_Tunnel_Img_i_year]  DEFAULT (''),
 CONSTRAINT [PK_Tunnel_Img] PRIMARY KEY CLUSTERED 
(
	[i_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_Img', N'COLUMN',N'i_type'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'工地、会议、企业文化' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_Img', @level2type=N'COLUMN',@level2name=N'i_type'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_Img', N'COLUMN',N'i_year'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'年份' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_Img', @level2type=N'COLUMN',@level2name=N'i_year'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_LineLength_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 11:08:45
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_LineLength_GetList]
 AS 
	SELECT 
	Line_Id,Line_Length,Line_Date,Line_Pid,Line_State
	 FROM [Pross_LineLength]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_LeaveWord_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:14
------------------------------------
CREATE PROCEDURE [dbo].[UP_LeaveWord_Update]
@lw_Id int,
@lw_SetDate datetime,
@lw_Content ntext,
@lw_UserId int,
@lw_VateId int
 AS 
	UPDATE [LeaveWord] SET 
	[lw_SetDate] = @lw_SetDate,[lw_Content] = @lw_Content,[lw_UserId] = @lw_UserId,[lw_VateId] = @lw_VateId
	WHERE lw_Id=@lw_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_jiaose_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 14:58:07
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_jiaose_Exists]
@j_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_jiaose] WHERE j_id=@j_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_bumf_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-6 10:30:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_bumf_Update]
@b_id bigint,
@b_file varchar(3000),
@b_title varchar(200),
@b_content text,
@b_state  int,
@b_suser int,
@b_datefield text
 AS 
	UPDATE [Tunnel_bumf] SET 
	[b_title]=@b_title,[b_file] = @b_file,[b_content] = @b_content,[b_datefield] = @b_datefield,[b_state]=@b_state,[b_suser]=@b_suser
	WHERE b_id=@b_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_LeaveWord_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:14
------------------------------------
CREATE PROCEDURE [dbo].[UP_LeaveWord_Delete]
@lw_Id int
 AS 
	DELETE [LeaveWord]
	 WHERE lw_Id=@lw_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[pro_splitpage]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'CREATE PROCEDURE [dbo].[pro_splitpage]
(
    @SQL NVARCHAR(4000),         --要执行的SQL语句
    @PAGE INT = 1,              --要显示的页码
    @PAGESIZE INT,              --每页的大小
    @PAGECOUNT INT = 0 OUT,     --总页数
    @RECORDCOUNT INT = 0 OUT    --总记录数
)
AS
BEGIN
    SET NOCOUNT ON

    DECLARE @P1 INT

    EXEC SP_CURSOROPEN @P1 OUTPUT, @SQL, @SCROLLOPT = 1, @CCOPT = 1, @ROWCOUNT = @PAGECOUNT OUTPUT

    SET @RECORDCOUNT = @PAGECOUNT

	SELECT @PAGECOUNT=
       CEILING(1.0 * @PAGECOUNT / @PAGESIZE) , @PAGE = (@PAGE-1) * @PAGESIZE + 1

   EXEC SP_CURSORFETCH @P1, 16, @PAGE, @PAGESIZE 
    EXEC SP_CURSORCLOSE @P1
END
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_bumf_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-6 10:30:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_bumf_Delete]
@b_id bigint
 AS 
	DELETE [Tunnel_bumf]
	 WHERE b_id=@b_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_LeaveWord_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:14
------------------------------------
CREATE PROCEDURE [dbo].[UP_LeaveWord_GetModel]
@lw_Id int
 AS 
	SELECT 
	lw_Id,lw_SetDate,lw_Content,lw_UserId,lw_VateId
	 FROM [LeaveWord]
	 WHERE lw_Id=@lw_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[proc_insert]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
create   proc   [dbo].[proc_insert]   (@tablename   varchar(256))   
  as   
  begin   
                  set   nocount   on   
                  declare   @sqlstr   varchar(4000)   
                  declare   @sqlstr1   varchar(4000)   
                  declare   @sqlstr2   varchar(4000)   
                  select   @sqlstr=''select   ''''insert   ''+@tablename   
                  select   @sqlstr1=''''   
                  select   @sqlstr2=''   (''   
                  select   @sqlstr1=   ''   values   (   ''''+''   
                  select   @sqlstr1=@sqlstr1+col+''+'''',''''+''   ,@sqlstr2=@sqlstr2+name   +'',''   from   (select   case     
  --                 when   a.xtype   =173   then   ''case   when   ''+a.name+''   is   null   then   ''''NULL''''   else   ''+''convert(varchar(''+convert(varchar(4),a.length*2+2)+''),''+a.name   +'')''+''   end''   
                  when   a.xtype   =104   then   ''case   when   ''+a.name+''   is   null   then   ''''NULL''''   else   ''+''convert(varchar(1),''+a.name   +'')''+''   end''   
                  when   a.xtype   =175   then   ''case   when   ''+a.name+''   is   null   then   ''''NULL''''   else   ''+''''''''''''''''''+''+''replace(''+a.name+'','''''''''''''''','''''''''''''''''''''''')''   +   ''+''''''''''''''''''+''   end''   
                  when   a.xtype   =61     then   ''case   when   ''+a.name+''   is   null   then   ''''NULL''''   else   ''+''''''''''''''''''+''+''convert(varchar(23),''+a.name   +'',121)''+   ''+''''''''''''''''''+''   end''   
                  when   a.xtype   =106   then   ''case   when   ''+a.name+''   is   null   then   ''''NULL''''   else   ''+''convert(varchar(''+convert(varchar(4),a.xprec+2)+''),''+a.name   +'')''+''   end''   
                  when   a.xtype   =62     then   ''case   when   ''+a.name+''   is   null   then   ''''NULL''''   else   ''+''convert(varchar(23),''+a.name   +'',2)''+''   end''   
                  when   a.xtype   =56     then   ''case   when   ''+a.name+''   is   null   then   ''''NULL''''   else   ''+''convert(varchar(11),''+a.name   +'')''+''   end''   
                  when   a.xtype   =60     then   ''case   when   ''+a.name+''   is   null   then   ''''NULL''''   else   ''+''convert(varchar(22),''+a.name   +'')''+''   end''   
                  when   a.xtype   =239   then   ''case   when   ''+a.name+''   is   null   then   ''''NULL''''   else   ''+''''''''''''''''''+''+''replace(''+a.name+'','''''''''''''''','''''''''''''''''''''''')''   +   ''+''''''''''''''''''+''   end''   
                  when   a.xtype   =108   then   ''case   when   ''+a.name+''   is   null   then   ''''NULL''''   else   ''+''convert(varchar(''+convert(varchar(4),a.xprec+2)+''),''+a.name   +'')''+''   end''   
                  when   a.xtype   =231   then   ''case   when   ''+a.name+''   is   null   then   ''''NULL''''   else   ''+''''''''''''''''''+''+''replace(''+a.name+'','''''''''''''''','''''''''''''''''''''''')''   +   ''+''''''''''''''''''+''   end''   
                  when   a.xtype   =59     then   ''case   when   ''+a.name+''   is   null   then   ''''NULL''''   else   ''+''convert(varchar(23),''+a.name   +'',2)''+''   end''   
                  when   a.xtype   =58     then   ''case   when   ''+a.name+''   is   null   then   ''''NULL''''   else   ''+''''''''''''''''''+''+''convert(varchar(23),''+a.name   +'',121)''+   ''+''''''''''''''''''+''   end''   
                  when   a.xtype   =52     then   ''case   when   ''+a.name+''   is   null   then   ''''NULL''''   else   ''+''convert(varchar(12),''+a.name   +'')''+''   end''   
                  when   a.xtype   =122   then   ''case   when   ''+a.name+''   is   null   then   ''''NULL''''   else   ''+''convert(varchar(22),''+a.name   +'')''+''   end''   
                  when   a.xtype   =48     then   ''case   when   ''+a.name+''   is   null   then   ''''NULL''''   else   ''+''convert(varchar(6),''+a.name   +'')''+''   end''   
  --                 when   a.xtype   =165   then   ''case   when   ''+a.name+''   is   null   then   ''''NULL''''   else   ''+''convert(varchar(''+convert(varchar(4),a.length*2+2)+''),''+a.name   +'')''+''   end''   
                  when   a.xtype   =167   then   ''case   when   ''+a.name+''   is   null   then   ''''NULL''''   else   ''+''''''''''''''''''+''+''replace(''+a.name+'','''''''''''''''','''''''''''''''''''''''')''   +   ''+''''''''''''''''''+''   end''   
                  else   ''''''NULL''''''   
                  end   as   col,a.colid,a.name   
                  from   syscolumns   a   where   a.id   =   object_id(@tablename)   and   a.xtype   <>189   and   a.xtype   <>34   and   a.xtype   <>35   and     a.xtype   <>36   
                  )t   order   by   colid   
                    
                  select   @sqlstr=@sqlstr+left(@sqlstr2,len(@sqlstr2)-1)+'')   ''+left(@sqlstr1,len(@sqlstr1)-3)+'')''''   from   ''+@tablename   
  --     print   @sqlstr   
                  exec(   @sqlstr)   
                  set   nocount   off   
  end   

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_menber]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_menber](
	[m_id] [bigint] IDENTITY(1,1) NOT NULL,
	[m_login] [varchar](50) NULL,
	[m_name] [varchar](50) NULL,
	[m_password] [varchar](50) NULL,
	[m_mobile] [varchar](50) NULL,
	[m_mail] [varchar](50) NULL,
	[m_idcard] [varchar](50) NULL,
	[m_spassword] [varchar](50) NULL,
	[m_jiao] [int] NULL,
	[m_bum] [nvarchar](200) NULL,
	[m_duty] [nvarchar](200) NULL,
	[m_state] [int] NULL CONSTRAINT [DF_Tunnel_menber_m_state]  DEFAULT ((0)),
	[m_flag] [varchar](2000) NULL,
	[m_zdyqx] [int] NULL,
	[m_birth] [datetime] NULL,
	[m_online] [int] NULL CONSTRAINT [DF_Tunnel_menber_m_online]  DEFAULT ((0)),
	[m_onlinetime] [datetime] NULL CONSTRAINT [DF_Tunnel_menber_m_onlinetime]  DEFAULT ((0)),
	[m_counttime] [bigint] NULL CONSTRAINT [DF_Tunnel_menber_m_counttime]  DEFAULT ((0)),
	[m_lastoutlogin] [varchar](200) NULL,
 CONSTRAINT [PK_Tunnel_menber] PRIMARY KEY CLUSTERED 
(
	[m_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_menber', N'COLUMN',N'm_login'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'登录名' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_menber', @level2type=N'COLUMN',@level2name=N'm_login'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_menber', N'COLUMN',N'm_name'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'姓名' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_menber', @level2type=N'COLUMN',@level2name=N'm_name'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_menber', N'COLUMN',N'm_password'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'登录密码' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_menber', @level2type=N'COLUMN',@level2name=N'm_password'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_menber', N'COLUMN',N'm_mobile'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'手机号' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_menber', @level2type=N'COLUMN',@level2name=N'm_mobile'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_menber', N'COLUMN',N'm_mail'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'邮箱' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_menber', @level2type=N'COLUMN',@level2name=N'm_mail'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_menber', N'COLUMN',N'm_idcard'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'身份证' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_menber', @level2type=N'COLUMN',@level2name=N'm_idcard'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_menber', N'COLUMN',N'm_spassword'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'审批密码' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_menber', @level2type=N'COLUMN',@level2name=N'm_spassword'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_menber', N'COLUMN',N'm_jiao'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'角色ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_menber', @level2type=N'COLUMN',@level2name=N'm_jiao'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_menber', N'COLUMN',N'm_bum'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'部门ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_menber', @level2type=N'COLUMN',@level2name=N'm_bum'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_menber', N'COLUMN',N'm_duty'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'职务ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_menber', @level2type=N'COLUMN',@level2name=N'm_duty'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_menber', N'COLUMN',N'm_state'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'状态' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_menber', @level2type=N'COLUMN',@level2name=N'm_state'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_menber', N'COLUMN',N'm_flag'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'没用了' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_menber', @level2type=N'COLUMN',@level2name=N'm_flag'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_menber', N'COLUMN',N'm_zdyqx'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'自定义权限 默认0 则无自定义权限' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_menber', @level2type=N'COLUMN',@level2name=N'm_zdyqx'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_menber', N'COLUMN',N'm_birth'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'生日' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_menber', @level2type=N'COLUMN',@level2name=N'm_birth'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_menber', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'用户表' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_menber'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Vote_Config_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:15
------------------------------------
CREATE PROCEDURE [dbo].[UP_Vote_Config_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([c_id])+1 FROM [Vote_Config]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_jiaose_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 14:58:07
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_jiaose_GetModel]
@j_id bigint
 AS 
	SELECT 
	j_id,j_name,j_depict,j_flag,j_zdyjs
	 FROM [Tunnel_jiaose]
	 WHERE j_id=@j_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_Advice]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_Advice](
	[a_id] [bigint] IDENTITY(1,1) NOT NULL,
	[a_user] [int] NULL,
	[a_bid] [int] NULL,
	[a_content] [text] NULL,
	[a_time] [datetime] NULL,
	[a_gid] [int] NULL
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Vote_Config_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:15
------------------------------------
CREATE PROCEDURE [dbo].[UP_Vote_Config_Exists]
@c_id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Vote_Config] WHERE c_id=@c_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_jiaose_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 14:58:07
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_jiaose_GetList]
 AS 
	SELECT 
	j_id,j_name,j_depict,j_flag,j_zdyjs
	 FROM [Tunnel_jiaose]

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_file_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_file_Exists]
@f_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_file] WHERE f_id=@f_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_Profile]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_Profile](
	[p_id] [int] IDENTITY(1,1) NOT NULL,
	[p_name] [varchar](600) NULL,
	[p_year] [int] NULL,
	[p_bum] [varchar](50) NULL,
	[p_filetype] [varchar](50) NULL,
	[p_uid] [int] NULL,
 CONSTRAINT [PK_Tunnel_Profile] PRIMARY KEY CLUSTERED 
(
	[p_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_LeaveWord_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:14
------------------------------------
CREATE PROCEDURE [dbo].[UP_LeaveWord_GetList]
 AS 
	SELECT 
	lw_Id,lw_SetDate,lw_Content,lw_UserId,lw_VateId
	 FROM [LeaveWord]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_jiaose_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 14:58:07
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_jiaose_Delete]
@j_id bigint
 AS 
	DELETE [Tunnel_jiaose]
	 WHERE j_id=@j_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UmlValue]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[UmlValue](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[UMLValue] [varchar](255) NULL,
 CONSTRAINT [RDexUmlValue] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Vote_Config_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:15
------------------------------------
CREATE PROCEDURE [dbo].[UP_Vote_Config_ADD]
@c_id int,
@c_name nvarchar(50),
@c_type int

 AS 
	INSERT INTO [Vote_Config](
	[c_id],[c_name],[c_type]
	)VALUES(
	@c_id,@c_name,@c_type
	)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_quanxian_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 15:00:49
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_quanxian_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([q_id])+1 FROM [Tunnel_quanxian]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UmlAssociationRole]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[UmlAssociationRole](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[Multiplicity] [varchar](255) NULL,
	[IsNavigable] [tinyint] NULL,
	[IsAggregate] [tinyint] NULL,
	[IsChangeable] [tinyint] NULL,
	[IsOrdered] [tinyint] NULL,
 CONSTRAINT [RDexUmlAssociationRole] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Vote_Config_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:15
------------------------------------
CREATE PROCEDURE [dbo].[UP_Vote_Config_Update]
@c_id int,
@c_name nvarchar(50),
@c_type int
 AS 
	UPDATE [Vote_Config] SET 
	[c_name] = @c_name,[c_type] = @c_type
	WHERE c_id=@c_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_quanxian_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 15:00:49
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_quanxian_Exists]
@q_id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_quanxian] WHERE q_id=@q_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Vote_Config_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:15
------------------------------------
CREATE PROCEDURE [dbo].[UP_Vote_Config_Delete]
@c_id int
 AS 
	DELETE [Vote_Config]
	 WHERE c_id=@c_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_bumf]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_bumf](
	[b_id] [bigint] IDENTITY(1,1) NOT NULL,
	[b_title] [varchar](200) NULL,
	[b_sort] [int] NULL,
	[b_time] [datetime] NULL,
	[b_file] [varchar](3000) NULL,
	[b_state] [int] NULL,
	[b_user] [int] NULL,
	[b_content] [text] NULL,
	[b_datefield] [text] NULL,
	[b_formcontent] [text] NULL,
	[b_suser] [int] NULL CONSTRAINT [DF_Tunnel_bumf_b_suser]  DEFAULT ((0)),
	[b_stype] [int] NULL CONSTRAINT [DF_Tunnel_bumf_b_stype]  DEFAULT ((0)),
 CONSTRAINT [     ] PRIMARY KEY CLUSTERED 
(
	[b_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_bumf', N'COLUMN',N'b_sort'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'公文分类' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_bumf', @level2type=N'COLUMN',@level2name=N'b_sort'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_bumf', N'COLUMN',N'b_time'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'添加时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_bumf', @level2type=N'COLUMN',@level2name=N'b_time'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_bumf', N'COLUMN',N'b_file'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'附件' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_bumf', @level2type=N'COLUMN',@level2name=N'b_file'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_bumf', N'COLUMN',N'b_state'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'状态' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_bumf', @level2type=N'COLUMN',@level2name=N'b_state'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_bumf', N'COLUMN',N'b_user'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'发布人ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_bumf', @level2type=N'COLUMN',@level2name=N'b_user'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_bumf', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'公文' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_bumf'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_file_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_file_GetModel]
@f_id bigint
 AS 
	SELECT 
	*
	 FROM [Tunnel_file]
	 WHERE f_id=@f_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Vote_Config_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:15
------------------------------------
CREATE PROCEDURE [dbo].[UP_Vote_Config_GetModel]
@c_id int
 AS 
	SELECT 
	c_id,c_name,c_type
	 FROM [Vote_Config]
	 WHERE c_id=@c_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UmlAttribute]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[UmlAttribute](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[InitialValue] [varchar](255) NULL,
	[TypeExpression] [varchar](255) NULL,
 CONSTRAINT [RDexUmlAttribute] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Vote_Config_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:15
------------------------------------
CREATE PROCEDURE [dbo].[UP_Vote_Config_GetList]
 AS 
	SELECT 
	c_id,c_name,c_type
	 FROM [Vote_Config]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_quanxian_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 15:00:49
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_quanxian_Delete]
@q_id int
 AS 
	DELETE [Tunnel_quanxian]
	 WHERE q_id=@q_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_file_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_file_GetList]
 AS 
	SELECT 
	f_id,f_title,f_file,f_size,f_sort,f_addtime,f_user,f_juser
	 FROM [Tunnel_file]

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UmlMember]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[UmlMember](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[IsTypeScope] [tinyint] NULL,
	[Visibility] [varchar](25) NULL,
	[Direction] [varchar](25) NULL,
 CONSTRAINT [RDexUmlMember] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_bum_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_bum_Exists]
@b_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_bum] WHERE b_id=@b_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_menber_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 15:04:50
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_menber_ADD]
@m_id bigint output,
@m_login varchar(50),
@m_name varchar(50),
@m_password varchar(50),
@m_mobile varchar(50),
@m_mail  varchar(50),
@m_idcard varchar(50),
@m_spassword varchar(50),
@m_jiao int,
@m_bum varchar(200),
@m_duty varchar(200),
@m_state int,
@m_flag varchar(2000),
@m_birth datetime,
@m_zdyqx int

 AS 
	INSERT INTO [Tunnel_menber](
	[m_login],[m_name],[m_password],[m_mobile],[m_mail],[m_idcard],[m_spassword],[m_jiao],[m_bum],[m_duty],[m_state],[m_flag],[m_zdyqx],[m_birth]
	)VALUES(
	@m_login,@m_name,@m_password,@m_mobile,@m_mail,@m_idcard,@m_spassword,@m_jiao,@m_bum,@m_duty,@m_state,@m_flag,@m_zdyqx,@m_birth
	)
	SET @m_id = @@IDENTITY
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_bum_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_bum_Update]
@b_id bigint,
@b_name varchar(100),
@b_hid int,
@b_depict varchar(1000)
 AS 
	UPDATE [Tunnel_bum] SET 
	[b_name] = @b_name,[b_hid] = @b_hid,[b_depict] = @b_depict
	WHERE b_id=@b_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[pagination_up]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'CREATE PROCEDURE [dbo].[pagination_up]
@tblName varchar(255), -- 表名 
@strGetFields varchar(1000) = ''*'', -- 需要返回的列 
@fldName varchar(255)='''', -- 主键名(可包含如TABLE.FLDNAME形式） 
@OrderName varchar(255) ='''', --排序列名
@PageSize int = 10, -- 页尺寸 
@PageIndex int = 1, -- 页码 
@doCount bit = 0, -- 返回记录总数, 非 0 值则返回 
@OrderType bit = 0, -- 设置排序类型, 非 0 值则降序 
@strWhere varchar(1500) = '''' -- 查询条件 (注意: 不要加 where) 
AS 
declare @strSQL varchar(5000) -- 主语句 
declare @strTmp varchar(110) -- 临时变量 
declare @strOrder varchar(400) -- 排序类型 
declare @fldName_t varchar(255) -- 在分页时用的排序字段名，不包含多表并列时的表名 
set @fldName_t = right(@fldName,len(@fldName)-CHARINDEX(''.'',@fldName)) 
if @doCount != 0 
begin 
if @strWhere !='''' 
set @strSQL = ''select count(*) as Total from '' + @tblName + '' where ''+@strWhere 
else 
set @strSQL = ''select count(*) as Total from '' + @tblName + '''' 
end 
--以上代码的意思是如果@doCount传递过来的不是0，就执行总数统计。以下的所有代码都是@doCount为0的情况 
else 
begin 
if @OrderType != 0 
begin 
set @strTmp = ''<(select min'' 
set @strOrder = '' order by '' + @OrderName +'' desc'' 
--如果@OrderType不是0，就执行降序，这句很重要！ 
end 
else 
begin 
set @strTmp = ''>(select max'' 
set @strOrder = '' order by '' + @OrderName +'' asc'' 
end 
if @PageIndex = 1 
begin 
if @strWhere != '''' 
set @strSQL = ''select top '' + str(@PageSize) +'' ''+@strGetFields+ '' from '' + @tblName + '' where '' + @strWhere + '' '' + @strOrder 
else 
set @strSQL = ''select top '' + str(@PageSize) +'' ''+@strGetFields+ '' from ''+ @tblName + '' ''+ @strOrder 
--如果是第一页就执行以上代码，这样会加快执行速度 
end 
else 
begin 
--以下代码赋予了@strSQL以真正执行的SQL代码 
set @strSQL = ''select top '' + str(@PageSize) +'' ''+@strGetFields+ '' from ''+ @tblName + '' where '' + @fldName + '' not in (select top '' + str((@PageIndex-1)*@PageSize) + '' ''+ @fldName + '' from '' + @tblName + '''' + @strOrder + '')''+ @strOrder 
if @strWhere != '''' 
set @strSQL = ''select top '' + str(@PageSize) +'' ''+@strGetFields+ '' from ''+ @tblName + '' where '' + @fldName + '' not in (select top '' + str((@PageIndex-1)*@PageSize) + '' ''+ @fldName + '' from '' + @tblName + '' where '' + @strWhere + '' ''+ @strOrder + '') and '' + @strWhere + '' '' + @strOrder 
end 
end 
print @strsql' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_menber_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 15:04:50
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_menber_Update]
@m_id bigint,
@m_login varchar(50),
@m_name varchar(50),
@m_password varchar(50),
@m_mobile varchar(50),
@m_mail  varchar(50),
@m_idcard varchar(50),
@m_spassword varchar(50),
@m_jiao int,
@m_bum varchar(200),
@m_duty varchar(200),
@m_state int,
@m_flag varchar(2000),
@m_zdyqx int,
@m_birth datetime
 AS 
	UPDATE [Tunnel_menber] SET 
	[m_name] = @m_name,[m_password] = @m_password,[m_mobile] = @m_mobile,[m_mail] = @m_mail,[m_idcard] = @m_idcard,[m_spassword] = @m_spassword,[m_jiao] = @m_jiao,[m_bum] = @m_bum,[m_duty] = @m_duty,[m_state] = @m_state,[m_flag] = @m_flag,[m_zdyqx] = @m_zdyqx,[m_birth] = @m_birth
	WHERE m_id=@m_id
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_bum_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_bum_GetModel]
@b_id bigint
 AS 
	SELECT 
	b_id,b_name,b_hid,b_depict
	 FROM [Tunnel_bum]
	 WHERE b_id=@b_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UmlOperation]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[UmlOperation](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[Concurrency] [varchar](25) NULL,
	[IsPolymorphic] [tinyint] NULL,
	[IsQuery] [tinyint] NULL,
	[IsAbstract] [tinyint] NULL,
	[Body] [text] NULL,
 CONSTRAINT [RDexUmlOperation] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_menber_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 15:04:50
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_menber_Delete]
@m_id bigint
 AS 
	DELETE [Tunnel_menber]
	 WHERE m_id=@m_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_bum_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_bum_GetList]
 AS 
	SELECT 
	b_id,b_name,b_hid,b_depict
	 FROM [Tunnel_bum]

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_menber_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 15:04:50
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_menber_GetModel]
@m_id bigint
 AS 
	SELECT 
	m_id,m_login,m_name,m_password,m_mobile,m_mail,m_idcard,m_spassword,m_jiao,m_bum,m_duty,m_state,m_flag,m_zdyqx,m_birth
	 FROM [Tunnel_menber]
	 WHERE m_id=@m_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_menber_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 15:04:50
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_menber_GetList]
 AS 
	SELECT 
	m_id,m_login,m_name,m_password,m_mobile,m_mail,m_idcard,m_spassword,m_jiao,m_bum,m_duty,m_state,m_flag,m_zdyqx,m_birth
	 FROM [Tunnel_menber]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UmlParameter]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[UmlParameter](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[DefaultValue] [varchar](255) NULL,
	[Kind] [varchar](25) NULL,
	[TypeExpression] [varchar](255) NULL,
 CONSTRAINT [RDexUmlParameter] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_ProjectReport]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_ProjectReport](
	[Report_Id] [int] IDENTITY(1,1) NOT NULL,
	[Report_Name] [varchar](200) NULL,
	[Report_Class] [int] NULL CONSTRAINT [DF_Tunnel_ProjectReport_Report_Class]  DEFAULT ((0)),
	[Report_Sort] [int] NULL CONSTRAINT [DF_Tunnel_ProjectReport_Report_Sort]  DEFAULT ((0)),
	[Report_State] [int] NULL CONSTRAINT [DF_Tunnel_ProjectReport_Report_State]  DEFAULT ((0)),
	[Report_Shen] [int] NULL CONSTRAINT [DF_Tunnel_ProjectReport_Report_Shen]  DEFAULT ((0)),
	[Report_Order] [int] NULL CONSTRAINT [DF_Tunnel_ProjectReport_Report_Order]  DEFAULT ((1)),
	[Report_UserID] [int] NULL CONSTRAINT [DF_Tunnel_ProjectReport_Report_UserID]  DEFAULT ((0)),
 CONSTRAINT [PK_Tunnel_ProjectReport] PRIMARY KEY CLUSTERED 
(
	[Report_Id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProjectReport', N'COLUMN',N'Report_Name'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'模版名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProjectReport', @level2type=N'COLUMN',@level2name=N'Report_Name'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProjectReport', N'COLUMN',N'Report_Class'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'分类' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProjectReport', @level2type=N'COLUMN',@level2name=N'Report_Class'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProjectReport', N'COLUMN',N'Report_Sort'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'类别' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProjectReport', @level2type=N'COLUMN',@level2name=N'Report_Sort'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProjectReport', N'COLUMN',N'Report_State'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'状态0、启用 1、停用' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProjectReport', @level2type=N'COLUMN',@level2name=N'Report_State'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProjectReport', N'COLUMN',N'Report_Shen'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'是否要审核0、不需要 1、需要' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProjectReport', @level2type=N'COLUMN',@level2name=N'Report_Shen'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProjectReport', N'COLUMN',N'Report_Order'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'排序号' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProjectReport', @level2type=N'COLUMN',@level2name=N'Report_Order'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProjectReport', N'COLUMN',N'Report_UserID'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'用户ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProjectReport', @level2type=N'COLUMN',@level2name=N'Report_UserID'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_uyingshe]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_uyingshe](
	[uy_id] [int] IDENTITY(1,1) NOT NULL,
	[uy_uid] [varchar](50) NULL,
	[uy_list] [varchar](2000) NULL,
 CONSTRAINT [PK_Tunnel_uyingshe] PRIMARY KEY CLUSTERED 
(
	[uy_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_bum]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_bum](
	[b_id] [bigint] IDENTITY(1,1) NOT NULL,
	[b_name] [varchar](100) NULL,
	[b_hid] [int] NULL CONSTRAINT [DF_Tunnel_bum_b_hid]  DEFAULT ((0)),
	[b_depict] [varchar](1000) NULL,
	[b_projectId] [int] NULL CONSTRAINT [DF_Tunnel_bum_b_projectId]  DEFAULT ((0)),
 CONSTRAINT [PK_TUNNEL_BUM] PRIMARY KEY CLUSTERED 
(
	[b_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_bum', N'COLUMN',N'b_name'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_bum', @level2type=N'COLUMN',@level2name=N'b_name'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_bum', N'COLUMN',N'b_hid'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'上级部门ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_bum', @level2type=N'COLUMN',@level2name=N'b_hid'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_bum', N'COLUMN',N'b_depict'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'描述' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_bum', @level2type=N'COLUMN',@level2name=N'b_depict'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_bum', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'部门表' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_bum'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_jiaose]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_jiaose](
	[j_id] [bigint] IDENTITY(1,1) NOT NULL,
	[j_name] [varchar](100) NULL,
	[j_depict] [varchar](1000) NULL,
	[j_flag] [varchar](2000) NULL,
	[j_zdyjs] [int] NULL,
 CONSTRAINT [PK_TUNNEL_JIAOSE] PRIMARY KEY CLUSTERED 
(
	[j_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_jiaose', N'COLUMN',N'j_name'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'角色名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_jiaose', @level2type=N'COLUMN',@level2name=N'j_name'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_jiaose', N'COLUMN',N'j_depict'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'角色标识' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_jiaose', @level2type=N'COLUMN',@level2name=N'j_depict'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_jiaose', N'COLUMN',N'j_flag'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'权限责任描述' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_jiaose', @level2type=N'COLUMN',@level2name=N'j_flag'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_jiaose', N'COLUMN',N'j_zdyjs'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'是否自定义角色  0 则无自定义' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_jiaose', @level2type=N'COLUMN',@level2name=N'j_zdyjs'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_jiaose', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'角色' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_jiaose'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_byingshe]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_byingshe](
	[by_id] [int] IDENTITY(1,1) NOT NULL,
	[by_bid] [varchar](50) NULL,
	[by_list] [varchar](2000) NULL,
 CONSTRAINT [PK_Tunnel_byingshe] PRIMARY KEY CLUSTERED 
(
	[by_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_byingshe', N'COLUMN',N'by_bid'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'部门ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_byingshe', @level2type=N'COLUMN',@level2name=N'by_bid'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_byingshe', N'COLUMN',N'by_list'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'部门权限' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_byingshe', @level2type=N'COLUMN',@level2name=N'by_list'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UmlProjection]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[UmlProjection](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[Style] [varchar](255) NULL,
 CONSTRAINT [RDexUmlProjection] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[P_viewPage_A]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'Create PROC [dbo].[P_viewPage_A]   
/*   
nzperfect [no_mIss] 高效通用分页存储过程(双向检索) 2007.5.7  QQ:34813284   
敬告：适用于单一主键或存在唯一值列的表或视图   
ps:Sql语句为8000字节,调用时请注意传入参数及sql总长度不要超过指定范围   
*/   
@TableName VARCHAR(200),     --表名   
@FieldList VARCHAR(2000),    --显示列名，如果是全部字段则为*   
@PrimaryKey VARCHAR(100),    --单一主键或唯一值键   
@Where VARCHAR(2000),        --查询条件 不含''where''字符，如id>10 and len(userid)>9   
@Order VARCHAR(1000),        --排序 不含''order by''字符，如id asc,userid desc，必须指定asc或desc   
--注意当@SortType=3时生效，记住一定要在最后加上主键，否则会让你比较郁闷   
@SortType INT,               --排序规则 1:正序asc 2:倒序desc 3:多列排序方法   
@RecorderCount INT,          --记录总数 0:会返回总记录   
@PageSize INT,               --每页输出的记录数   
@PageIndex INT,              --当前页数   
@TotalCount INT OUTPUT,      --记返回总记录   
@TotalPageCount INT OUTPUT   --返回总页数   
AS   
SET NOCOUNT ON   
IF ISNULL(@TotalCount,'''') = '''' SET @TotalCount = 0   
SET @Order = RTRIM(LTRIM(@Order))   
SET @PrimaryKey = RTRIM(LTRIM(@PrimaryKey))   
SET @FieldList = REPLACE(RTRIM(LTRIM(@FieldList)),'' '','''')   
WHILE CHARINDEX('', '',@Order) > 0 OR CHARINDEX('' ,'',@Order) > 0   
BEGIN   
SET @Order = REPLACE(@Order,'', '','','')   
SET @Order = REPLACE(@Order,'' ,'','','')   
END   
IF ISNULL(@TableName,'''') = '''' OR ISNULL(@FieldList,'''') = ''''   
OR ISNULL(@PrimaryKey,'''') = ''''   
OR @SortType < 1 OR @SortType >3   
OR @RecorderCount  < 0 OR @PageSize < 0 OR @PageIndex < 0   
BEGIN   
PRINT(''ERR_00'')   
RETURN   
END   
IF @SortType = 3   
BEGIN   
IF (UPPER(RIGHT(@Order,4))!='' ASC'' AND UPPER(RIGHT(@Order,5))!='' DESC'')   
BEGIN PRINT(''ERR_02'') RETURN END   
END   
DECLARE @new_where1 VARCHAR(1000)   
DECLARE @new_where2 VARCHAR(1000)   
DECLARE @new_order1 VARCHAR(1000)   
DECLARE @new_order2 VARCHAR(1000)   
DECLARE @new_order3 VARCHAR(1000)   
DECLARE @Sql VARCHAR(8000)   
DECLARE @SqlCount NVARCHAR(4000)   
IF ISNULL(@where,'''') = ''''   
BEGIN   
SET @new_where1 = '' ''   
SET @new_where2 = '' WHERE  ''   
END   
ELSE   
BEGIN   
SET @new_where1 = '' WHERE '' + @where   
SET @new_where2 = '' WHERE '' + @where + '' AND ''   
END   
IF ISNULL(@order,'''') = '''' OR @SortType = 1  OR @SortType = 2   
BEGIN   
IF @SortType = 1   
BEGIN   
SET @new_order1 = '' ORDER BY '' + @PrimaryKey + '' ASC''   
SET @new_order2 = '' ORDER BY '' + @PrimaryKey + '' DESC''   
END   
IF @SortType = 2   
BEGIN   
SET @new_order1 = '' ORDER BY '' + @PrimaryKey + '' DESC''   
SET @new_order2 = '' ORDER BY '' + @PrimaryKey + '' ASC''   
END   
END   
ELSE   
BEGIN   
SET @new_order1 = '' ORDER BY '' + @Order   
END   
IF @SortType = 3 AND  CHARINDEX('',''+@PrimaryKey+'' '','',''+@Order)>0   
BEGIN   
SET @new_order1 = '' ORDER BY '' + @Order   
SET @new_order2 = @Order + '',''   
SET @new_order2 = REPLACE(REPLACE(@new_order2,''ASC,'',''{ASC},''),''DESC,'',''{DESC},'')   
SET @new_order2 = REPLACE(REPLACE(@new_order2,''{ASC},'',''DESC,''),''{DESC},'',''ASC,'')   
SET @new_order2 = '' ORDER BY '' + SUBSTRING(@new_order2,1,LEN(@new_order2)-1)   
IF @FieldList <> ''*''   
BEGIN   
SET @new_order3 = REPLACE(REPLACE(@Order + '','',''ASC,'','',''),''DESC,'','','')   
SET @FieldList = '','' + @FieldList   
WHILE CHARINDEX('','',@new_order3)>0   
BEGIN   
IF CHARINDEX(SUBSTRING('',''+@new_order3,1,CHARINDEX('','',@new_order3)),'',''+@FieldList+'','')>0   
BEGIN   
SET @FieldList =   
@FieldList + '','' + SUBSTRING(@new_order3,1,CHARINDEX('','',@new_order3))   
END   
SET @new_order3 =   
SUBSTRING(@new_order3,CHARINDEX('','',@new_order3)+1,LEN(@new_order3))   
END   
SET @FieldList = SUBSTRING(@FieldList,2,LEN(@FieldList))   
END   
END   
SET @SqlCount = ''SELECT @TotalCount=COUNT(*),@TotalPageCount=CEILING((COUNT(*)+0.0)/''   
+ CAST(@PageSize AS VARCHAR)+'') FROM '' + @TableName + @new_where1   
IF @RecorderCount  = 0   
BEGIN   
EXEC SP_EXECUTESQL @SqlCount,N''@TotalCount INT OUTPUT,@TotalPageCount INT OUTPUT'',   
@TotalCount OUTPUT,@TotalPageCount OUTPUT   
END   
ELSE   
BEGIN   
SELECT @TotalCount = @RecorderCount   
END   
IF @PageIndex > CEILING((@TotalCount+0.0)/@PageSize)   
BEGIN   
SET @PageIndex =  CEILING((@TotalCount+0.0)/@PageSize)   
END   
IF @PageIndex = 1 OR @PageIndex >= CEILING((@TotalCount+0.0)/@PageSize)   
BEGIN   
IF @PageIndex = 1 --返回第一页数据   
BEGIN   
SET @Sql = ''SELECT TOP '' + STR(@PageSize) + '' '' + @FieldList + '' FROM ''   
+ @TableName + @new_where1 + @new_order1   
END   
IF @PageIndex >= CEILING((@TotalCount+0.0)/@PageSize)  --返回最后一页数据   
BEGIN   
SET @Sql = ''SELECT TOP '' + STR(@PageSize) + '' '' + @FieldList + '' FROM (''   
+ ''SELECT TOP '' + STR(ABS(@PageSize*@PageIndex-@TotalCount-@PageSize))   
+ '' '' + @FieldList + '' FROM ''   
+ @TableName + @new_where1 + @new_order2 + '' ) AS TMP ''   
+ @new_order1   
END   
END   
ELSE   
BEGIN   
IF @SortType = 1  --仅主键正序排序   
BEGIN   
IF @PageIndex <= CEILING((@TotalCount+0.0)/@PageSize)/2  --正向检索   
BEGIN   
SET @Sql = ''SELECT TOP '' + STR(@PageSize) + '' '' + @FieldList + '' FROM ''   
+ @TableName + @new_where2 + @PrimaryKey + '' > ''   
+ ''(SELECT MAX('' + @PrimaryKey + '') FROM (SELECT TOP ''   
+ STR(@PageSize*(@PageIndex-1)) + '' '' + @PrimaryKey   
+ '' FROM '' + @TableName   
+ @new_where1 + @new_order1 +'' ) AS TMP) ''+ @new_order1   
END   
ELSE  --反向检索   
BEGIN   
SET @Sql = ''SELECT TOP '' + STR(@PageSize) + '' '' + @FieldList + '' FROM (''   
+ ''SELECT TOP '' + STR(@PageSize) + '' ''   
+ @FieldList + '' FROM ''   
+ @TableName + @new_where2 + @PrimaryKey + '' < ''   
+ ''(SELECT MIN('' + @PrimaryKey + '') FROM (SELECT TOP ''   
+ STR(@TotalCount-@PageSize*@PageIndex) + '' '' + @PrimaryKey   
+ '' FROM '' + @TableName   
+ @new_where1 + @new_order2 +'' ) AS TMP) ''+ @new_order2   
+ '' ) AS TMP '' + @new_order1   
END   
END   
IF @SortType = 2  --仅主键反序排序   
BEGIN   
IF @PageIndex <= CEILING((@TotalCount+0.0)/@PageSize)/2  --正向检索   
BEGIN   
SET @Sql = ''SELECT TOP '' + STR(@PageSize) + '' '' + @FieldList + '' FROM ''   
+ @TableName + @new_where2 + @PrimaryKey + '' < ''   
+ ''(SELECT MIN('' + @PrimaryKey + '') FROM (SELECT TOP ''   
+ STR(@PageSize*(@PageIndex-1)) + '' '' + @PrimaryKey   
+'' FROM ''+ @TableName   
+ @new_where1 + @new_order1 + '') AS TMP) ''+ @new_order1   
END   
ELSE  --反向检索   
BEGIN   
SET @Sql = ''SELECT TOP '' + STR(@PageSize) + '' '' + @FieldList + '' FROM (''   
+ ''SELECT TOP '' + STR(@PageSize) + '' ''   
+ @FieldList + '' FROM ''   
+ @TableName + @new_where2 + @PrimaryKey + '' > ''   
+ ''(SELECT MAX('' + @PrimaryKey + '') FROM (SELECT TOP ''   
+ STR(@TotalCount-@PageSize*@PageIndex) + '' '' + @PrimaryKey   
+ '' FROM '' + @TableName   
+ @new_where1 + @new_order2 +'' ) AS TMP) ''+ @new_order2   
+ '' ) AS TMP '' + @new_order1   
END   
END   
IF @SortType = 3  --多列排序，必须包含主键，且放置最后，否则不处理   
BEGIN   
IF CHARINDEX('','' + @PrimaryKey + '' '','','' + @Order) = 0   
BEGIN PRINT(''ERR_02'') RETURN END   
IF @PageIndex <= CEILING((@TotalCount+0.0)/@PageSize)/2  --正向检索   
BEGIN   
SET @Sql = ''SELECT TOP '' + STR(@PageSize) + '' '' + @FieldList + '' FROM ( ''   
+ ''SELECT TOP '' + STR(@PageSize) + '' '' + @FieldList + '' FROM ( ''   
+ '' SELECT TOP '' + STR(@PageSize*@PageIndex) + '' '' + @FieldList   
+ '' FROM '' + @TableName + @new_where1 + @new_order1 + '' ) AS TMP ''   
+ @new_order2 + '' ) AS TMP '' + @new_order1   
END   
ELSE  --反向检索   
BEGIN   
SET @Sql = ''SELECT TOP '' + STR(@PageSize) + '' '' + @FieldList + '' FROM ( ''   
+ ''SELECT TOP '' + STR(@PageSize) + '' '' + @FieldList + '' FROM ( ''   
+ '' SELECT TOP '' + STR(@TotalCount-@PageSize *@PageIndex+@PageSize) + '' '' + @FieldList   
+ '' FROM '' + @TableName + @new_where1 + @new_order2 + '' ) AS TMP ''   
+ @new_order1 + '' ) AS TMP '' + @new_order1   
END   
END   
END   
EXEC(@Sql)   
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_dyingshe]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_dyingshe](
	[dy_id] [int] IDENTITY(1,1) NOT NULL,
	[dy_did] [varchar](50) NULL,
	[dy_list] [varchar](2000) NULL,
 CONSTRAINT [PK_Tunnel_dyingshe] PRIMARY KEY CLUSTERED 
(
	[dy_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[pagination]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
CREATE PROCEDURE [dbo].[pagination] 
@tblName varchar(255), -- 表名 
@strGetFields varchar(1000) = ''*'', -- 需要返回的列 
@fldName varchar(255)='''', -- 排序的字段名(可包含如TABLE.FLDNAME形式） 
@PageSize int = 10, -- 页尺寸 
@PageIndex int = 1, -- 页码 
@doCount bit = 0, -- 返回记录总数, 非 0 值则返回 
@OrderType bit = 0, -- 设置排序类型, 非 0 值则降序 
@strWhere varchar(1500) = '''' -- 查询条件 (注意: 不要加 where) 
AS 
declare @strSQL varchar(5000) -- 主语句 
declare @strTmp varchar(110) -- 临时变量 
declare @strOrder varchar(400) -- 排序类型 
declare @fldName_t varchar(255) -- 在分页时用的排序字段名，不包含多表并列时的表名 
set @fldName_t = right(@fldName,len(@fldName) - CHARINDEX(''.'',@fldName)) 
if @doCount != 0 
begin 
if @strWhere !='''' 
set @strSQL = ''select count(*) as Total from '' + @tblName + '' where ''+@strWhere 
else 
set @strSQL = ''select count(*) as Total from '' + @tblName + '''' 
end 
--以上代码的意思是如果@doCount传递过来的不是0，就执行总数统计。以下的所有代码都是@doCount为0的情况 
else 
begin 
if @OrderType != 0 
begin 
set @strTmp = ''<(select min'' 
set @strOrder = '' order by '' + @fldName +'' desc'' 
--如果@OrderType不是0，就执行降序，这句很重要！ 
end 
else 
begin 
set @strTmp = ''>(select max'' 
set @strOrder = '' order by '' + @fldName +'' asc'' 
end 
if @PageIndex = 1 or @PageIndex=0 
begin 
if @strWhere != '''' 
set @strSQL = ''select top '' + str(@PageSize) +'' ''+@strGetFields+ '' from '' + @tblName + '' where '' + @strWhere + '' '' + @strOrder 
else 
set @strSQL = ''select top '' + str(@PageSize) +'' ''+@strGetFields+ '' from ''+ @tblName + '' ''+ @strOrder 
--如果是第一页就执行以上代码，这样会加快执行速度 
end 
else 
begin 
--以下代码赋予了@strSQL以真正执行的SQL代码 
set @strSQL = ''select top '' + str(@PageSize) +'' ''+@strGetFields+ '' from ''+ @tblName + '' where '' + @fldName + '' '' + @strTmp + '' (''+ @fldName_t + '') from (select top '' + str((@PageIndex-1)*@PageSize) + '' ''+ @fldName + '' from '' + @tblName + '''' + @strOrder + '') as tblTmp)''+ @strOrder 
if @strWhere != '''' 
set @strSQL = ''select top '' + str(@PageSize) +'' ''+@strGetFields+ '' from ''+ @tblName + '' where '' + @fldName + '' '' + @strTmp + '' (''+ @fldName_t + '') from (select top '' + str((@PageIndex-1)*@PageSize) + '' ''+ @fldName + '' from '' + @tblName + '' where '' + @strWhere + '' ''+ @strOrder + '') as tblTmp) and '' + @strWhere + '' '' + @strOrder 
end 
end 
exec (@strsql)

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_KaoQinCheck_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-23 16:48:03
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_KaoQinCheck_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([s_id])+1 FROM [Tunnel_KaoQinCheck]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[VoteLog_DeleteByVoteID]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create PROCEDURE [dbo].[VoteLog_DeleteByVoteID]
@vg_voteId int
 AS 
	DELETE votelog
	 WHERE vg_voteId=@vg_voteId
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_KaoQinCheck_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-23 16:48:03
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_KaoQinCheck_Exists]
@s_id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_KaoQinCheck] WHERE s_id=@s_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_items]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_items](
	[i_id] [int] IDENTITY(1,1) NOT NULL,
	[i_name] [varchar](50) NULL,
	[year] [varchar](50) NULL,
	[moon] [varchar](50) NULL,
 CONSTRAINT [PK_Tunnel_Items] PRIMARY KEY CLUSTERED 
(
	[i_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_items', N'COLUMN',N'i_name'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'工程项目名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_items', @level2type=N'COLUMN',@level2name=N'i_name'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_KaoQinCheck_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-23 16:48:03
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_KaoQinCheck_ADD]
@s_id int output,
@s_year int,
@s_moon int,
@s_bid int,
@s_bname varchar(50),
@s_uid int,
@s_date datetime

 AS 
	INSERT INTO [Tunnel_KaoQinCheck](
	[s_year],[s_moon],[s_bid],[s_bname],[s_uid],[s_date]
	)VALUES(
	@s_year,@s_moon,@s_bid,@s_bname,@s_uid,@s_date
	)
	SET @s_id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_Vote]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_Vote](
	[vote_Id] [int] IDENTITY(1,1) NOT NULL,
	[vote_userId] [int] NULL,
	[vote_userGroup] [varchar](3000) NULL,
	[vote_bumGroup] [varchar](3000) NULL,
	[vote_jsGroup] [varchar](3000) NULL,
	[vote_Title] [varchar](3000) NULL,
	[vote_mark] [varchar](3000) NULL,
	[vote_Type] [int] NULL,
	[vote_startDate] [datetime] NULL,
	[vote_endDate] [datetime] NULL,
	[vote_seeType] [int] NULL,
	[vote_state] [int] NULL,
	[vote_max] [int] NULL,
	[vote_top] [int] NULL,
 CONSTRAINT [PK_Tunnel_Vote] PRIMARY KEY CLUSTERED 
(
	[vote_Id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_KaoQinCheck_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-23 16:48:03
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_KaoQinCheck_Update]
@s_id int,
@s_year int,
@s_moon int,
@s_bid int,
@s_bname varchar(50),
@s_uid int,
@s_date datetime
 AS 
	UPDATE [Tunnel_KaoQinCheck] SET 
	[s_year] = @s_year,[s_moon] = @s_moon,[s_bid] = @s_bid,[s_bname] = @s_bname,[s_uid] = @s_uid,[s_date] = @s_date
	WHERE s_id=@s_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_NewsType]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_NewsType](
	[TypeID] [int] IDENTITY(1,1) NOT NULL,
	[TypeName] [varchar](50) NULL,
	[BumID] [varchar](50) NULL,
	[BumName] [varchar](50) NULL,
	[BumUrl] [varchar](50) NULL,
 CONSTRAINT [PK_Tunnel_NewsType] PRIMARY KEY CLUSTERED 
(
	[TypeID] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_NewsType', N'COLUMN',N'TypeName'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'栏目名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_NewsType', @level2type=N'COLUMN',@level2name=N'TypeName'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_NewsType', N'COLUMN',N'BumName'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'部门名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_NewsType', @level2type=N'COLUMN',@level2name=N'BumName'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_information_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_information_Exists]
@i_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_information] WHERE i_id=@i_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_Votei]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_Votei](
	[ivote_Id] [int] IDENTITY(1,1) NOT NULL,
	[ivote_Title] [varchar](3000) NULL,
	[ivote_Count] [int] NULL,
	[ivote_yesUserId] [varchar](3000) NULL,
	[ivote_voteId] [int] NULL,
 CONSTRAINT [PK_Tunnel_Votei] PRIMARY KEY CLUSTERED 
(
	[ivote_Id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_KaoQinCheck_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-23 16:48:03
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_KaoQinCheck_GetModel]
@s_id int
 AS 
	SELECT 
	s_id,s_year,s_moon,s_bid,s_bname,s_uid,s_date
	 FROM [Tunnel_KaoQinCheck]
	 WHERE s_id=@s_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_KaoQinCheck_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-23 16:48:03
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_KaoQinCheck_Delete]
@s_id int
 AS 
	DELETE [Tunnel_KaoQinCheck]
	 WHERE s_id=@s_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_KaoQinCheck_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-23 16:48:03
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_KaoQinCheck_GetList]
 AS 
	SELECT 
	s_id,s_year,s_moon,s_bid,s_bname,s_uid,s_date
	 FROM [Tunnel_KaoQinCheck]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_VoteRe]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_VoteRe](
	[vote_Id] [int] IDENTITY(1,1) NOT NULL,
	[vote_Message] [varchar](3000) NULL,
	[vate_Date] [datetime] NULL,
	[vate_userId] [int] NULL,
	[vate_voteId] [int] NULL,
 CONSTRAINT [PK_Tunnel_VoteRe] PRIMARY KEY CLUSTERED 
(
	[vote_Id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_work]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_work](
	[w_id] [int] IDENTITY(1,1) NOT NULL,
	[w_bumName] [varchar](50) NULL,
	[w_maxCent] [int] NULL,
	[w_workName] [varchar](50) NULL,
 CONSTRAINT [PK_Tunnel_work] PRIMARY KEY CLUSTERED 
(
	[w_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_exam]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_exam](
	[e_id] [bigint] IDENTITY(1,1) NOT NULL,
	[e_gid] [int] NULL,
	[e_bid] [int] NULL,
	[e_time] [datetime] NULL,
	[e_user] [int] NULL,
	[e_endtime] [datetime] NULL,
	[e_nextbid] [bigint] NULL,
	[e_nextbuser] [varchar](500) NULL,
 CONSTRAINT [PK_Tunnel_exam] PRIMARY KEY CLUSTERED 
(
	[e_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_exam', N'COLUMN',N'e_gid'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'公文ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_exam', @level2type=N'COLUMN',@level2name=N'e_gid'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_exam', N'COLUMN',N'e_bid'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'步骤ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_exam', @level2type=N'COLUMN',@level2name=N'e_bid'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_exam', N'COLUMN',N'e_time'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'执行时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_exam', @level2type=N'COLUMN',@level2name=N'e_time'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_exam', N'COLUMN',N'e_user'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'步骤执行人ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_exam', @level2type=N'COLUMN',@level2name=N'e_user'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_exam', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'公文审批记录' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_exam'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Pross_Line]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Pross_Line](
	[Line_Id] [int] IDENTITY(1,1) NOT NULL,
	[Line_sId] [int] NULL,
	[Line_eId] [int] NULL,
	[Line_Reg] [int] NULL,
	[Line_UpDown] [int] NULL,
	[Line_Shield] [int] NULL,
	[Line_Date] [datetime] NULL,
 CONSTRAINT [PK_PROSS_LINE] PRIMARY KEY CLUSTERED 
(
	[Line_Id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Pross_Line', N'COLUMN',N'Line_Id'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'沿线ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Pross_Line', @level2type=N'COLUMN',@level2name=N'Line_Id'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Pross_Line', N'COLUMN',N'Line_sId'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'沿线起始ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Pross_Line', @level2type=N'COLUMN',@level2name=N'Line_sId'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Pross_Line', N'COLUMN',N'Line_eId'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'沿线终止ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Pross_Line', @level2type=N'COLUMN',@level2name=N'Line_eId'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Pross_Line', N'COLUMN',N'Line_Reg'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'区间ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Pross_Line', @level2type=N'COLUMN',@level2name=N'Line_Reg'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Pross_Line', N'COLUMN',N'Line_UpDown'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 上行 1 下行' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Pross_Line', @level2type=N'COLUMN',@level2name=N'Line_UpDown'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Index_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-25 16:38:11
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Index_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([id])+1 FROM [Tunnel_Index]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Index_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-25 16:38:11
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Index_Exists]
@id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_Index] WHERE id=@id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_Cfile]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_Cfile](
	[f_id] [bigint] IDENTITY(1,1) NOT NULL,
	[f_title] [varchar](200) NULL,
	[f_type] [int] NULL,
	[f_content] [text] NULL,
	[f_file] [varchar](100) NULL,
	[f_first] [bigint] NULL CONSTRAINT [DF_Tunnel_Cfile_f_first]  DEFAULT ((0)),
	[f_other] [varchar](500) NULL,
	[f_date] [datetime] NULL,
	[f_user] [bigint] NULL,
 CONSTRAINT [PK_Tunnel_Cfile] PRIMARY KEY CLUSTERED 
(
	[f_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Index_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'

------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-25 16:38:11
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Index_Delete]
@id int
 AS 
	update [tunnel_index] set del=1 where id=@id
	/*-DELETE [Tunnel_Index]
	 WHERE id=@id-*/

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_CView]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_CView](
	[c_id] [bigint] IDENTITY(1,1) NOT NULL,
	[c_fid] [bigint] NULL,
	[c_uid] [bigint] NULL,
	[c_read] [int] NULL CONSTRAINT [DF_Tunnel_CView_c_read]  DEFAULT ((0)),
	[c_readdate] [datetime] NULL,
	[c_content] [text] NULL,
 CONSTRAINT [PK_Tunnel_CView] PRIMARY KEY CLUSTERED 
(
	[c_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_grade]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_grade](
	[g_id] [int] IDENTITY(1,1) NOT NULL,
	[g_workId] [int] NULL,
	[g_checkId] [int] NULL,
	[g_cent] [float] NULL,
 CONSTRAINT [PK_Tunnel_grade] PRIMARY KEY CLUSTERED 
(
	[g_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_SelType_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-28 17:15:54
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_SelType_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([TypeID])+1 FROM [Tunnel_NewsType]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_grade_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:22:19
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_grade_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([g_id])+1 FROM [Tunnel_grade]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_mail]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_mail](
	[m_id] [bigint] IDENTITY(1,1) NOT NULL,
	[m_title] [varchar](200) NULL,
	[m_content] [text] NULL,
	[m_from] [int] NULL,
	[m_to] [int] NULL,
	[m_file] [varchar](1000) NULL,
	[m_time] [datetime] NULL,
	[m_sort] [int] NULL,
	[m_state] [int] NULL,
	[m_main] [int] NULL,
 CONSTRAINT [PK_TUNNEL_MAIL] PRIMARY KEY CLUSTERED 
(
	[m_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_mail', N'COLUMN',N'm_title'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'主题' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_mail', @level2type=N'COLUMN',@level2name=N'm_title'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_mail', N'COLUMN',N'm_content'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'内容' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_mail', @level2type=N'COLUMN',@level2name=N'm_content'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_mail', N'COLUMN',N'm_from'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'发件人' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_mail', @level2type=N'COLUMN',@level2name=N'm_from'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_mail', N'COLUMN',N'm_to'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'收件人' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_mail', @level2type=N'COLUMN',@level2name=N'm_to'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_mail', N'COLUMN',N'm_file'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'附件' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_mail', @level2type=N'COLUMN',@level2name=N'm_file'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_mail', N'COLUMN',N'm_time'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'发送时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_mail', @level2type=N'COLUMN',@level2name=N'm_time'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_mail', N'COLUMN',N'm_sort'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'分类 0未删除、1删除' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_mail', @level2type=N'COLUMN',@level2name=N'm_sort'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_mail', N'COLUMN',N'm_state'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'状态 0未读、1已读' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_mail', @level2type=N'COLUMN',@level2name=N'm_state'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_mail', N'COLUMN',N'm_main'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'发的是1 收的是0' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_mail', @level2type=N'COLUMN',@level2name=N'm_main'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_mail', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'站内信箱' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_mail'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_SelType_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-28 17:15:54
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_SelType_Exists]
@TypeID int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_NewsType] WHERE TypeID=@TypeID 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_grade_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:22:19
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_grade_Exists]
@g_id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_grade] WHERE g_id=@g_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[LeaveWord]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[LeaveWord](
	[lw_Id] [int] IDENTITY(1,1) NOT NULL,
	[lw_SetDate] [datetime] NOT NULL,
	[lw_Content] [ntext] NOT NULL,
	[lw_UserId] [int] NOT NULL,
	[lw_VateId] [int] NOT NULL,
 CONSTRAINT [PK_LeaveWord] PRIMARY KEY NONCLUSTERED 
(
	[lw_Id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_SelType_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-28 17:15:54
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_SelType_ADD]
@TypeID int output,
@TypeName varchar(50),
@BumID varchar(50),
@BumName varchar(50)

 AS 
	INSERT INTO [Tunnel_NewsType](
	[TypeName],[BumID],[BumName]
	)VALUES(
	@TypeName,@BumID,@BumName
	)
	SET @TypeID = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[ReomveTableContent]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'-- =============================================
-- Author:		<Author,,Name>
-- Create date: <Create Date,,>
-- Description:	<Description,,>
-- =============================================
CREATE PROCEDURE [dbo].[ReomveTableContent]
AS
BEGIN
	truncate table Tunnel_file			--文件表
	truncate table tunnel_log			--系统日志表
	truncate table Tunnel_information	--新闻或公告
	truncate table Tunnel_mail			--站内邮箱表
	truncate table Tunnel_meeting		--我的会议表
	truncate table Tunnel_project		--工程概况
	truncate table Tunnel_projectlog	--施工日志
	truncate table Tunnel_report		--工程报告
	truncate table Tunnel_vannewpaper	--先锋视野或盾构先锋
	truncate table Tunnel_workplan		--工作计划表
	truncate table Tunnel_Index			--首页显示
	truncate table ViewTable			--所有评论
	
END

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_SelType_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-28 17:15:54
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_SelType_Update]
@TypeID int,
@TypeName varchar(50),
@BumID varchar(50),
@BumName varchar(50)
 AS 
	UPDATE [Tunnel_NewsType] SET 
	[TypeName] = @TypeName,[BumID] = @BumID,[BumName] = @BumName
	WHERE TypeID=@TypeID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_PageMessage]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_PageMessage](
	[pic_ID] [int] IDENTITY(1,1) NOT NULL,
	[pic_AspxName] [nvarchar](100) NULL,
	[pic_TitleName] [nvarchar](100) NULL,
	[pic_TopicName] [nchar](10) NULL,
	[pic_TopImgURL] [nvarchar](100) NULL,
	[pic_BgColor] [nvarchar](100) NULL,
 CONSTRAINT [PK_Tunnel_PageMessage] PRIMARY KEY NONCLUSTERED 
(
	[pic_ID] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_SelType_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-28 17:15:54
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_SelType_Delete]
@TypeID int
 AS 
	DELETE [Tunnel_NewsType]
	 WHERE TypeID=@TypeID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_grade_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:22:19
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_grade_Delete]
@g_id int
 AS 
	DELETE [Tunnel_grade]
	 WHERE g_id=@g_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_SelType_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-28 17:15:54
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_SelType_GetModel]
@TypeID int
 AS 
	SELECT 
	TypeID,TypeName,BumID,BumName,BumUrl
	 FROM [Tunnel_NewsType]
	 WHERE TypeID=@TypeID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_grade_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:22:19
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_grade_GetModel]
@g_id int
 AS 
	SELECT 
	g_id,g_workId,g_checkId,g_cent
	 FROM [Tunnel_grade]
	 WHERE g_id=@g_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Vote_Config]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Vote_Config](
	[c_id] [int] IDENTITY(1,1) NOT NULL,
	[c_name] [nvarchar](50) NOT NULL,
	[c_type] [int] NOT NULL,
 CONSTRAINT [PK_Vote_Config] PRIMARY KEY NONCLUSTERED 
(
	[c_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_SelType_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-28 17:15:54
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_SelType_GetList]
 AS 
	SELECT 
	TypeID,TypeName,BumID,BumName
	 FROM [Tunnel_NewsType]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_grade_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:22:19
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_grade_GetList]
 AS 
	SELECT 
	g_id,g_workId,g_checkId,g_cent
	 FROM [Tunnel_grade]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[StoredProcedure1]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'CREATE PROCEDURE [dbo].[StoredProcedure1]
	/*
	(
	@parameter1 int = 5,
	@parameter2 datatype OUTPUT
	)
	*/
AS
	/* SET NOCOUNT ON */
	RETURN
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_information]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_information](
	[i_id] [bigint] IDENTITY(1,1) NOT NULL,
	[i_title] [varchar](100) NULL,
	[i_sort] [int] NULL,
	[i_user] [int] NULL,
	[i_time] [datetime] NULL CONSTRAINT [DF_Tunnel_information_i_time]  DEFAULT (getdate()),
	[i_hit] [int] NULL CONSTRAINT [DF_Tunnel_information_i_hit]  DEFAULT ((0)),
	[i_content] [text] NULL,
	[i_files] [varchar](50) NULL,
	[i_del] [int] NOT NULL CONSTRAINT [DF_Tunnel_information_i_del]  DEFAULT ((0)),
	[i_audituser] [int] NOT NULL CONSTRAINT [DF_Tunnel_information_i_audituser]  DEFAULT ((0)),
	[i_auditmark] [varchar](500) NOT NULL CONSTRAINT [DF_Tunnel_information_i_auditmark]  DEFAULT (''),
	[i_audittime] [varchar](30) NOT NULL CONSTRAINT [DF_Tunnel_information_i_audittime]  DEFAULT (''),
 CONSTRAINT [PK_TUNNEL_INFORMATION] PRIMARY KEY CLUSTERED 
(
	[i_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_information', N'COLUMN',N'i_title'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'标题' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_information', @level2type=N'COLUMN',@level2name=N'i_title'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_information', N'COLUMN',N'i_sort'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'分类 0新闻 1公告' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_information', @level2type=N'COLUMN',@level2name=N'i_sort'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_information', N'COLUMN',N'i_user'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'添加人ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_information', @level2type=N'COLUMN',@level2name=N'i_user'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_information', N'COLUMN',N'i_time'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'添加时间
   ' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_information', @level2type=N'COLUMN',@level2name=N'i_time'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_information', N'COLUMN',N'i_hit'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'点击量' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_information', @level2type=N'COLUMN',@level2name=N'i_hit'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_information', N'COLUMN',N'i_content'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'内容' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_information', @level2type=N'COLUMN',@level2name=N'i_content'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_information', N'COLUMN',N'i_del'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0正常|1删除' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_information', @level2type=N'COLUMN',@level2name=N'i_del'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_information', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'公告新闻' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_information'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_check_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:22:29
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_check_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([c_id])+1 FROM [Tunnel_check]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_Chat]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_Chat](
	[Chat_ID] [bigint] IDENTITY(1,1) NOT NULL,
	[Chat_UserID] [bigint] NOT NULL DEFAULT ((0)),
	[Chat_UserName] [varchar](50) NULL,
	[Chat_Content] [varchar](200) NULL,
	[Chat_Date] [datetime] NULL,
	[Chat_State] [int] NOT NULL DEFAULT ((0)),
	[Chat_ToUserID] [bigint] NOT NULL DEFAULT ((0))
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Vote_Info]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Vote_Info](
	[v_id] [int] IDENTITY(1,1) NOT NULL,
	[v_title] [nvarchar](50) NOT NULL,
	[v_count] [int] NOT NULL,
	[v_Img] [nvarchar](100) NOT NULL,
	[v_author] [nvarchar](50) NOT NULL,
	[v_remark] [nvarchar](200) NULL,
 CONSTRAINT [PK_Vote_Info] PRIMARY KEY NONCLUSTERED 
(
	[v_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_check_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:22:29
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_check_Exists]
@c_id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_check] WHERE c_id=@c_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_Produce]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_Produce](
	[ProID] [bigint] IDENTITY(1,1) NOT NULL,
	[ProType] [varchar](6) NULL,
	[ProTitle] [varchar](150) NULL,
	[ProName] [varchar](50) NULL,
	[ProSrc] [varchar](150) NULL,
	[CreateDate] [datetime] NULL,
	[CreateUser] [bigint] NULL,
	[ModiDate] [datetime] NULL,
	[ModiUser] [bigint] NULL,
	[DeleteDate] [datetime] NULL,
	[DeleteUser] [bigint] NULL,
	[ProState] [char](1) NULL,
 CONSTRAINT [PK_Tunnel_Produce] PRIMARY KEY CLUSTERED 
(
	[ProID] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_check_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:22:29
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_check_Delete]
@c_id int
 AS 
	DELETE [Tunnel_check]
	 WHERE c_id=@c_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_vannewpaper]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_vannewpaper](
	[v_id] [bigint] IDENTITY(1,1) NOT NULL,
	[v_title] [varchar](200) NULL,
	[v_img] [varchar](100) NULL,
	[v_file] [varchar](100) NULL,
	[v_user] [int] NULL,
	[v_sort] [int] NULL,
 CONSTRAINT [PK_TUNNEL_VANNEWPAPER] PRIMARY KEY CLUSTERED 
(
	[v_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_vannewpaper', N'COLUMN',N'v_title'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'标题' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_vannewpaper', @level2type=N'COLUMN',@level2name=N'v_title'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_vannewpaper', N'COLUMN',N'v_img'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'缩略图' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_vannewpaper', @level2type=N'COLUMN',@level2name=N'v_img'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_vannewpaper', N'COLUMN',N'v_file'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'附件' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_vannewpaper', @level2type=N'COLUMN',@level2name=N'v_file'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_vannewpaper', N'COLUMN',N'v_user'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'发布人ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_vannewpaper', @level2type=N'COLUMN',@level2name=N'v_user'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_vannewpaper', N'COLUMN',N'v_sort'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'分类' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_vannewpaper', @level2type=N'COLUMN',@level2name=N'v_sort'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_vannewpaper', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'盾构先锋报' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_vannewpaper'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_mail_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_mail_Exists]
@m_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_mail] WHERE m_id=@m_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Date_Sys]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Date_Sys](
	[d_Id] [int] IDENTITY(1,1) NOT NULL,
	[d_userId] [int] NOT NULL,
	[d_beginPoll_Date] [datetime] NULL,
	[d_endPoll_Date] [datetime] NULL,
	[d_proce_Date] [datetime] NULL,
 CONSTRAINT [PK_Date_Sys] PRIMARY KEY NONCLUSTERED 
(
	[d_Id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_check_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:22:29
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_check_GetModel]
@c_id int
 AS 
	SELECT 
	c_id,c_userId,c_itemsId,c_score,c_income,c_date
	 FROM [Tunnel_check]
	 WHERE c_id=@c_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_check_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:22:29
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_check_GetList]
 AS 
	SELECT 
	c_id,c_userId,c_itemsId,c_score,c_income,c_date
	 FROM [Tunnel_check]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_check]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_check](
	[c_id] [int] IDENTITY(1,1) NOT NULL,
	[c_userId] [int] NULL,
	[c_itemsId] [int] NULL,
	[c_score] [int] NULL,
	[c_income] [varchar](50) NULL,
	[c_date] [varchar](50) NULL,
 CONSTRAINT [PK_Tunnel_check] PRIMARY KEY CLUSTERED 
(
	[c_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[VoteLog]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[VoteLog](
	[vg_id] [int] IDENTITY(1,1) NOT NULL,
	[vg_setDate] [datetime] NOT NULL,
	[vg_userId] [int] NOT NULL,
	[vg_voteId] [int] NOT NULL,
 CONSTRAINT [PK_VoteLog] PRIMARY KEY NONCLUSTERED 
(
	[vg_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[RTblVersions]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[RTblVersions](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_PredBrID_Z] [int] NOT NULL,
	[Z_PredVer_Z] [int] NOT NULL,
	[TypeID] [binary](8) NOT NULL,
	[VerIntID] [binary](8) NOT NULL,
	[Z_VState_Z] [smallint] NOT NULL,
	[Z_PredFlags_Z] [smallint] NOT NULL,
	[Z_SuccInc_Z] [smallint] NOT NULL,
	[Z_LClock_Z] [int] NOT NULL,
 CONSTRAINT [RDexVersions] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC,
	[Z_PredBrID_Z] ASC,
	[Z_PredVer_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_formtype]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_formtype](
	[Form_id] [int] NULL,
	[Form_name] [varchar](100) NULL,
	[Item_max] [int] NULL CONSTRAINT [DF_Tunnel_formtype_Item_max]  DEFAULT (0)
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_xIP_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2010-04-20 16:41:35
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_xIP_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([xId])+1 FROM [Tunnel_xIP]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_ProJectMent]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_ProJectMent](
	[Pro_Id] [bigint] IDENTITY(1,1) NOT NULL,
	[Pro_Title] [varchar](200) NULL,
	[Pro_Name] [varchar](100) NULL,
	[Pro_StartDate] [datetime] NULL,
	[Pro_EndDate] [datetime] NULL,
	[Pro_ManDate] [datetime] NULL,
	[Pro_ManEndDate] [datetime] NULL,
	[Pro_ContractDate] [datetime] NULL,
	[Pro_ContractEndDate] [datetime] NULL,
	[Pro_EquipmentDate] [datetime] NULL,
	[Pro_EquipmentEndDate] [datetime] NULL,
	[Pro_MaterialDate] [datetime] NULL,
	[Pro_MaterialEndDate] [datetime] NULL,
	[Pro_PlanDate] [datetime] NULL,
	[Pro_PlanEndDate] [datetime] NULL,
	[Pro_SecurityDate] [datetime] NULL,
	[Pro_SecurityEndDate] [datetime] NULL,
	[Pro_Status] [int] NULL CONSTRAINT [DF_Table_1_Pro_Security]  DEFAULT ((0)),
	[Pro_Manager] [bigint] NULL,
 CONSTRAINT [PK_Tunnel_ProJectMent] PRIMARY KEY CLUSTERED 
(
	[Pro_Id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProJectMent', N'COLUMN',N'Pro_StartDate'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'项目启动时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProJectMent', @level2type=N'COLUMN',@level2name=N'Pro_StartDate'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProJectMent', N'COLUMN',N'Pro_EndDate'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'项目结束时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProJectMent', @level2type=N'COLUMN',@level2name=N'Pro_EndDate'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProJectMent', N'COLUMN',N'Pro_ManDate'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'人员需求计划提交时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProJectMent', @level2type=N'COLUMN',@level2name=N'Pro_ManDate'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProJectMent', N'COLUMN',N'Pro_ManEndDate'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'人员需求计划提交结束时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProJectMent', @level2type=N'COLUMN',@level2name=N'Pro_ManEndDate'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProJectMent', N'COLUMN',N'Pro_ContractDate'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'合同签订计划提交时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProJectMent', @level2type=N'COLUMN',@level2name=N'Pro_ContractDate'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProJectMent', N'COLUMN',N'Pro_ContractEndDate'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'合同签订计划提交结束时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProJectMent', @level2type=N'COLUMN',@level2name=N'Pro_ContractEndDate'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProJectMent', N'COLUMN',N'Pro_EquipmentDate'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'设备需求计划提交时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProJectMent', @level2type=N'COLUMN',@level2name=N'Pro_EquipmentDate'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProJectMent', N'COLUMN',N'Pro_EquipmentEndDate'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'设备需求计划结束时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProJectMent', @level2type=N'COLUMN',@level2name=N'Pro_EquipmentEndDate'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProJectMent', N'COLUMN',N'Pro_MaterialDate'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'材料进场计划提交时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProJectMent', @level2type=N'COLUMN',@level2name=N'Pro_MaterialDate'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProJectMent', N'COLUMN',N'Pro_MaterialEndDate'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'材料进场计划结束时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProJectMent', @level2type=N'COLUMN',@level2name=N'Pro_MaterialEndDate'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProJectMent', N'COLUMN',N'Pro_PlanDate'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'施工方案编制计划提交时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProJectMent', @level2type=N'COLUMN',@level2name=N'Pro_PlanDate'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProJectMent', N'COLUMN',N'Pro_PlanEndDate'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'施工方案编制计划结束时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProJectMent', @level2type=N'COLUMN',@level2name=N'Pro_PlanEndDate'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProJectMent', N'COLUMN',N'Pro_SecurityDate'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'安全申报计划提交时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProJectMent', @level2type=N'COLUMN',@level2name=N'Pro_SecurityDate'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProJectMent', N'COLUMN',N'Pro_SecurityEndDate'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'安全申报计划结束时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProJectMent', @level2type=N'COLUMN',@level2name=N'Pro_SecurityEndDate'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProJectMent', N'COLUMN',N'Pro_Status'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'项目状态' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProJectMent', @level2type=N'COLUMN',@level2name=N'Pro_Status'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_ProJectMent', N'COLUMN',N'Pro_Manager'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'项目经理' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_ProJectMent', @level2type=N'COLUMN',@level2name=N'Pro_Manager'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_mail_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_mail_GetList]
 AS 
	SELECT 
	m_id,m_title,m_content,m_from,m_to,m_file,m_time,m_sort,m_state
	 FROM [Tunnel_mail]

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_xIP_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-04-20 16:41:35
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_xIP_Exists]
@xId int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_xIP] WHERE xId=@xId 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[RTblRelships]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[RTblRelships](
	[OrgID] [binary](8) NOT NULL,
	[Z_OrgBrID_Z] [int] NOT NULL,
	[Z_OrgVS_Z] [int] NOT NULL,
	[Z_OrgVE_Z] [int] NOT NULL,
	[Z_OrgLClock_Z] [int] NULL,
	[DstID] [binary](8) NOT NULL,
	[Z_DstBrID_Z] [int] NOT NULL,
	[Z_DstVS_Z] [int] NOT NULL,
	[Z_DstVE_Z] [int] NOT NULL,
	[Z_DstLClock_Z] [int] NULL,
	[OrgTypeID] [binary](8) NOT NULL,
	[RelTypeID] [binary](8) NOT NULL,
	[DstTypeID] [binary](8) NOT NULL,
	[PrevDstID] [binary](8) NULL,
	[DstName] [varchar](200) NULL,
	[DstNameLong] [text] NULL,
	[Z_RelFlags_Z] [smallint] NOT NULL,
 CONSTRAINT [RDexRelships] PRIMARY KEY CLUSTERED 
(
	[OrgID] ASC,
	[RelTypeID] ASC,
	[Z_OrgBrID_Z] ASC,
	[Z_OrgVS_Z] ASC,
	[DstID] ASC,
	[Z_DstBrID_Z] ASC,
	[Z_DstVS_Z] ASC,
	[Z_RelFlags_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_xIP_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'

  ------------------------------------
--用途：增加一条记录
--项目名称：CodematicDemo
--说明：
--时间：-04-20 16:41:35
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_xIP_ADD]
@xId int output,
@xUserId int

 AS 
 declare @num int;
 select @num=count(*) from [Tunnel_xIP] where xUserId=@xUserid
 if @num=0
 begin
	INSERT INTO [Tunnel_xIP](
	[xUserId]
	)VALUES(
	@xUserId
	)
	SET @xId = @@IDENTITY
	end
else
	set @xId=0;

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_getUserID]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否存在用户ID 

------------------------------------

CREATE PROCEDURE [dbo].[Tunnel_getUserID]
	
	@userid int
AS
	declare @Count int
	select @Count = count(*) from [getUserID] where userid=@userid
	
	
		RETURN @Count' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_xIP_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-04-20 16:41:35
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_xIP_Update]
@xId int,
@xUserId int
 AS 
	UPDATE [Tunnel_xIP] SET 
	[xUserId] = @xUserId
	WHERE xId=@xId' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[RTblSites]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[RTblSites](
	[SiteID] [int] NOT NULL,
	[SiteGuid] [binary](16) NOT NULL,
 CONSTRAINT [RDexSites] PRIMARY KEY CLUSTERED 
(
	[SiteID] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_xIP_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-04-20 16:41:35
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_xIP_Delete]
@xId int
 AS 
	DELETE [Tunnel_xIP]
	 WHERE xId=@xId' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_xIP_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-04-20 16:41:35
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_xIP_GetModel]
@xId int
 AS 
	SELECT 
	xId,xUserId
	 FROM [Tunnel_xIP]
	 WHERE xId=@xId' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[RTblProps]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[RTblProps](
	[IntID] [binary](8) NOT NULL,
	[PropID] [binary](8) NOT NULL,
	[PropValue] [varchar](220) NOT NULL,
 CONSTRAINT [RDexProps] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[PropID] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_IP_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2010-04-20 16:41:43
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_IP_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([iId])+1 FROM [Tunnel_IP]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_weekplan_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-29 13:57:24
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_weekplan_GetModel]
@w_id bigint
 AS 
	SELECT 
	w_id,w_title,w_content,w_address,w_time,w_daytime,w_adddate,w_weekID,w_date
	 FROM [Tunnel_weekplan]
	 WHERE w_id=@w_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[RTblRelshipProps]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[RTblRelshipProps](
	[OrgID] [binary](8) NOT NULL,
	[RelTypeID] [binary](8) NOT NULL,
	[DstID] [binary](8) NOT NULL,
	[PropID] [binary](8) NOT NULL,
	[PropValue] [varchar](220) NOT NULL,
 CONSTRAINT [RDexRelshipProps] PRIMARY KEY CLUSTERED 
(
	[OrgID] ASC,
	[RelTypeID] ASC,
	[DstID] ASC,
	[PropID] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Pross_Region]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Pross_Region](
	[Reg_Id] [int] IDENTITY(1,1) NOT NULL,
	[Reg_ProId] [int] NULL,
	[Reg_Start] [varchar](200) NULL,
	[Reg_End] [varchar](200) NULL,
	[Reg_Length] [int] NULL,
	[Reg_Status] [int] NULL CONSTRAINT [DF__Pross_Reg__Reg_S__28D80438]  DEFAULT ((0)),
 CONSTRAINT [PK_PROSS_REGION] PRIMARY KEY CLUSTERED 
(
	[Reg_Id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Pross_Region', N'COLUMN',N'Reg_Id'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'区间ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Pross_Region', @level2type=N'COLUMN',@level2name=N'Reg_Id'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Pross_Region', N'COLUMN',N'Reg_ProId'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'项经部ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Pross_Region', @level2type=N'COLUMN',@level2name=N'Reg_ProId'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Pross_Region', N'COLUMN',N'Reg_Start'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'开始位置' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Pross_Region', @level2type=N'COLUMN',@level2name=N'Reg_Start'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Pross_Region', N'COLUMN',N'Reg_End'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'到达位置' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Pross_Region', @level2type=N'COLUMN',@level2name=N'Reg_End'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Pross_Region', N'COLUMN',N'Reg_Length'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'区间长度' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Pross_Region', @level2type=N'COLUMN',@level2name=N'Reg_Length'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Pross_Region', N'COLUMN',N'Reg_Status'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'状态 是否激活 0、未激活1、激活' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Pross_Region', @level2type=N'COLUMN',@level2name=N'Reg_Status'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Pross_Region', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'形象进度区间表' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Pross_Region'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_IP_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-04-20 16:41:43
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_IP_Exists]
@iId int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_IP] WHERE iId=@iId 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_weekplan_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-29 13:57:24
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_weekplan_GetList]
 AS 
	SELECT 
	w_id,w_title,w_content,w_address,w_time,w_daytime,w_adddate,w_weekID,w_date
	 FROM [Tunnel_weekplan]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_IP_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-04-20 16:41:43
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_IP_ADD]
@iId int output,
@iIp varchar(50)

 AS 
	INSERT INTO [Tunnel_IP](
	[iIp]
	)VALUES(
	@iIp
	)
	SET @iId = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[RTblPropDefs]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[RTblPropDefs](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[SQLColName] [varchar](32) NULL,
	[APIType] [smallint] NULL,
	[SQLType] [smallint] NULL,
	[SQLSize] [smallint] NULL,
	[SQLScale] [smallint] NULL,
	[Flags] [smallint] NULL,
 CONSTRAINT [RDexPropDefs] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_IP_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-04-20 16:41:43
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_IP_Update]
@iId int,
@iIp varchar(50)
 AS 
	UPDATE [Tunnel_IP] SET 
	[iIp] = @iIp
	WHERE iId=@iId' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_IP_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-04-20 16:41:43
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_IP_Delete]
@iId int
 AS 
	DELETE [Tunnel_IP]
	 WHERE iId=@iId' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_duty]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_duty](
	[d_id] [bigint] IDENTITY(1,1) NOT NULL,
	[d_name] [varchar](100) NULL,
	[d_depict] [varchar](1000) NULL,
	[d_flag] [varchar](2000) NULL,
 CONSTRAINT [PK_TUNNEL_DUTY] PRIMARY KEY CLUSTERED 
(
	[d_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_duty', N'COLUMN',N'd_name'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'职务名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_duty', @level2type=N'COLUMN',@level2name=N'd_name'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_duty', N'COLUMN',N'd_depict'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'描述' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_duty', @level2type=N'COLUMN',@level2name=N'd_depict'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_duty', N'COLUMN',N'd_flag'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'部门ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_duty', @level2type=N'COLUMN',@level2name=N'd_flag'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_duty', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'职务表
   ' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_duty'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[RTblRelColDefs]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[RTblRelColDefs](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[RelTypeID] [binary](8) NULL,
	[Flags] [smallint] NULL,
	[MinCount] [smallint] NULL,
	[MaxCount] [smallint] NULL,
	[IsOrigin] [bit] NULL,
 CONSTRAINT [RDexRelColDefs] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_xIP_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-04-20 16:41:35
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_xIP_GetList]
 AS 
	SELECT 
	xId,xUserId
	 FROM [Tunnel_xIP]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_weekplan_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-29 13:57:24
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_weekplan_Delete]
@w_id bigint
 AS 
	DELETE [Tunnel_weekplan]
	 WHERE w_id=@w_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_IP_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-04-20 16:41:43
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_IP_GetModel]
@iId int
 AS 
	SELECT 
	iId,iIp
	 FROM [Tunnel_IP]
	 WHERE iId=@iId' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_IP_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-04-20 16:41:43
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_IP_GetList]
 AS 
	SELECT 
	iId,iIp
	 FROM [Tunnel_IP]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[RTblIfaceDefs]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[RTblIfaceDefs](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[InterfaceID] [binary](16) NULL,
	[SQLTableName] [varchar](32) NULL,
	[Flags] [smallint] NULL,
 CONSTRAINT [RDexIfaceDefs] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_quanxian]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_quanxian](
	[q_id] [int] IDENTITY(1,1) NOT NULL,
	[q_name] [varchar](50) NULL,
	[q_mark] [varchar](200) NULL,
	[q_rId] [int] NULL CONSTRAINT [DF_Tunnel_quanxian_q_rId]  DEFAULT ((0)),
 CONSTRAINT [PK_Tunnel_Quanxian] PRIMARY KEY CLUSTERED 
(
	[q_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_quanxian', N'COLUMN',N'q_id'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'序号' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_quanxian', @level2type=N'COLUMN',@level2name=N'q_id'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_quanxian', N'COLUMN',N'q_name'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_quanxian', @level2type=N'COLUMN',@level2name=N'q_name'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_quanxian', N'COLUMN',N'q_mark'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'描述' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_quanxian', @level2type=N'COLUMN',@level2name=N'q_mark'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_quanxian', N'COLUMN',N'q_rId'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'排序ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_quanxian', @level2type=N'COLUMN',@level2name=N'q_rId'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_flow]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_flow](
	[f_id] [bigint] IDENTITY(1,1) NOT NULL,
	[f_name] [varchar](200) NULL,
	[f_bum] [int] NULL,
	[f_form] [int] NULL,
	[f_isfile] [int] NULL,
	[f_depict] [varchar](1000) NULL,
	[f_sort] [int] NULL,
	[f_lastutime] [datetime] NULL,
	[f_stype] [int] NULL CONSTRAINT [DF_Tunnel_flow_f_stype]  DEFAULT ((0)),
	[f_state] [int] NULL CONSTRAINT [DF_Tunnel_flow_f_state]  DEFAULT ((0)),
 CONSTRAINT [PK_TUNNEL_FLOW] PRIMARY KEY CLUSTERED 
(
	[f_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_flow', N'COLUMN',N'f_name'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'流程名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_flow', @level2type=N'COLUMN',@level2name=N'f_name'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_flow', N'COLUMN',N'f_bum'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'部门ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_flow', @level2type=N'COLUMN',@level2name=N'f_bum'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_flow', N'COLUMN',N'f_form'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'表单ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_flow', @level2type=N'COLUMN',@level2name=N'f_form'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_flow', N'COLUMN',N'f_isfile'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'是否允许附件' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_flow', @level2type=N'COLUMN',@level2name=N'f_isfile'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_flow', N'COLUMN',N'f_depict'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'描述' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_flow', @level2type=N'COLUMN',@level2name=N'f_depict'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_flow', N'COLUMN',N'f_sort'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'分类' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_flow', @level2type=N'COLUMN',@level2name=N'f_sort'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_flow', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'流程表' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_flow'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[RTblClassDefs]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[RTblClassDefs](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[ClassID] [binary](16) NULL,
	[VerPropDescs] [image] NULL,
	[PropDescs] [image] NULL DEFAULT (NULL),
 CONSTRAINT [RDexClassDefs] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_exam_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-16 9:57:30
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_exam_Exists]
@e_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_exam] WHERE e_id=@e_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_flowclass]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_flowclass](
	[fc_id] [bigint] IDENTITY(1,1) NOT NULL,
	[fc_name] [varchar](100) NULL,
	[fc_desin] [varchar](500) NULL CONSTRAINT [DF_Tunnel_flowclass_fc_desin]  DEFAULT (''),
 CONSTRAINT [PK_TUNNEL_FLOWCLASS] PRIMARY KEY CLUSTERED 
(
	[fc_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_flowclass', N'COLUMN',N'fc_name'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'分类名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_flowclass', @level2type=N'COLUMN',@level2name=N'fc_name'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_flowclass', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'流程分类' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_flowclass'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[pro_selectTopDownImg]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'CREATE PROC [dbo].[pro_selectTopDownImg]
(
	@vid	INT,
	@otopId	INT OUTPUT,
	@odownId	INT OUTPUT,
	@vtoptitle	NVARCHAR(50) OUTPUT,
	@vdowntitle NVARCHAR(50) OUTPUT
)
AS
BEGIN
	SELECT TOP 1 @otopId=vi.v_id,@vtoptitle=vi.v_title
	  FROM Vote_Info vi  WHERE vi.v_id<@vid ORDER BY vi.v_id DESC
	SELECT TOP 1 @odownId=vi.v_id,@vdowntitle=vi.v_title
	  FROM Vote_Info vi  WHERE vi.v_id>@vid ORDER BY vi.v_id 
	SELECT @otopId= ISNULL(@otopId,0)
	SELECT @odownId=ISNULL(@odownId,0)
	SELECT @vtoptitle=ISNULL(@vtoptitle,'''')
	SELECT @vdowntitle=ISNULL(@vdowntitle,'''')
END

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Porss_RegionItem]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Porss_RegionItem](
	[Item_Id] [int] IDENTITY(1,1) NOT NULL,
	[Item_Class] [int] NULL,
	[Item_Name] [varchar](100) NULL,
	[Item_Length] [decimal](18, 4) NULL CONSTRAINT [DF__Porss_Reg__Item___2042BE37]  DEFAULT ((0)),
	[Item_Direction] [int] NULL CONSTRAINT [DF__Porss_Reg__Item___2136E270]  DEFAULT ((0)),
	[Item_Location] [int] NULL CONSTRAINT [DF__Porss_Reg__Item___222B06A9]  DEFAULT ((0)),
	[Item_RegId] [int] NULL,
	[Itme_StartId] [int] NULL,
 CONSTRAINT [PK_PORSS_REGIONITEM] PRIMARY KEY CLUSTERED 
(
	[Item_Id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Porss_RegionItem', N'COLUMN',N'Item_Id'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'项ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Porss_RegionItem', @level2type=N'COLUMN',@level2name=N'Item_Id'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Porss_RegionItem', N'COLUMN',N'Item_Class'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'项类型 1、车站 2、风井 3、通道 4、隧道 5、盾构机' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Porss_RegionItem', @level2type=N'COLUMN',@level2name=N'Item_Class'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Porss_RegionItem', N'COLUMN',N'Item_Name'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'项名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Porss_RegionItem', @level2type=N'COLUMN',@level2name=N'Item_Name'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Porss_RegionItem', N'COLUMN',N'Item_Length'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'项长度' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Porss_RegionItem', @level2type=N'COLUMN',@level2name=N'Item_Length'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Porss_RegionItem', N'COLUMN',N'Item_Direction'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'项方向 0、上行 1、下行' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Porss_RegionItem', @level2type=N'COLUMN',@level2name=N'Item_Direction'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Porss_RegionItem', N'COLUMN',N'Item_Location'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'项位置' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Porss_RegionItem', @level2type=N'COLUMN',@level2name=N'Item_Location'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Porss_RegionItem', N'COLUMN',N'Item_RegId'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'区间ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Porss_RegionItem', @level2type=N'COLUMN',@level2name=N'Item_RegId'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Porss_RegionItem', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'区间项' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Porss_RegionItem'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[RTblTypeLibs]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[RTblTypeLibs](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[TypeLibID] [binary](16) NULL,
 CONSTRAINT [RDexTypeLibs] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_form]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_form](
	[f_id] [bigint] IDENTITY(1,1) NOT NULL,
	[f_name] [varchar](100) NULL,
	[f_bum] [int] NULL,
	[f_lcid] [int] NULL,
	[f_user] [int] NULL,
	[f_date] [datetime] NULL,
	[f_content] [text] NULL,
 CONSTRAINT [PK_TUNNEL_FORM] PRIMARY KEY CLUSTERED 
(
	[f_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_form', N'COLUMN',N'f_name'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'表单名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_form', @level2type=N'COLUMN',@level2name=N'f_name'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_form', N'COLUMN',N'f_bum'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'所属部门' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_form', @level2type=N'COLUMN',@level2name=N'f_bum'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_form', N'COLUMN',N'f_lcid'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'流程ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_form', @level2type=N'COLUMN',@level2name=N'f_lcid'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_form', N'COLUMN',N'f_user'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'添加人' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_form', @level2type=N'COLUMN',@level2name=N'f_user'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_form', N'COLUMN',N'f_date'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'添加时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_form', @level2type=N'COLUMN',@level2name=N'f_date'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_form', N'COLUMN',N'f_content'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'表单内容' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_form', @level2type=N'COLUMN',@level2name=N'f_content'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_form', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'表单' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_form'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_exam_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-16 9:57:30
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_exam_Delete]
@e_id bigint
 AS 
	DELETE [Tunnel_exam]
	 WHERE e_id=@e_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[RTblIfaceMem]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[RTblIfaceMem](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[DispID] [int] NULL,
	[Flags] [smallint] NULL,
 CONSTRAINT [RDexIfaceMem] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_InfoXjb_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'


------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-25 16:38:11
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_InfoXjb_Delete]
@id int
 AS 
	update [tunnel_infoxjb] set del=1 where id=@id
	/*-DELETE [Tunnel_Index]
	 WHERE id=@id-*/



' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[RTblWorkspaceItems]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[RTblWorkspaceItems](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[Z_ItemIntID_Z] [binary](8) NOT NULL,
	[Z_ItemBranchID_Z] [int] NOT NULL,
	[Z_ItemVS_Z] [int] NOT NULL,
	[Z_ItemFlag_Z] [smallint] NOT NULL,
 CONSTRAINT [RDexWorkspaceItems] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC,
	[Z_ItemIntID_Z] ASC,
	[Z_ItemBranchID_Z] ASC,
	[Z_ItemVS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Pross_LineLength]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Pross_LineLength](
	[Line_Id] [int] IDENTITY(1,1) NOT NULL,
	[Line_Length] [decimal](18, 4) NULL,
	[Line_Date] [datetime] NULL,
	[Line_Pid] [int] NULL,
	[Line_State] [int] NULL,
 CONSTRAINT [PK_PROSS_LINELENGTH] PRIMARY KEY CLUSTERED 
(
	[Line_Id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Pross_LineLength', N'COLUMN',N'Line_Id'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'推进环数ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Pross_LineLength', @level2type=N'COLUMN',@level2name=N'Line_Id'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Pross_LineLength', N'COLUMN',N'Line_Length'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'推进环数' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Pross_LineLength', @level2type=N'COLUMN',@level2name=N'Line_Length'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Pross_LineLength', N'COLUMN',N'Line_Date'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'推进环数日期' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Pross_LineLength', @level2type=N'COLUMN',@level2name=N'Line_Date'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Pross_LineLength', N'COLUMN',N'Line_Pid'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'沿线ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Pross_LineLength', @level2type=N'COLUMN',@level2name=N'Line_Pid'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Pross_LineLength', N'COLUMN',N'Line_State'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0 未审核 1 审核通过' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Pross_LineLength', @level2type=N'COLUMN',@level2name=N'Line_State'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Pross_LineLength', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'推进环数' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Pross_LineLength'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Porss_RegionItem_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-8 13:50:37
------------------------------------
CREATE PROCEDURE [dbo].[UP_Porss_RegionItem_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([Item_Id])+1 FROM [Porss_RegionItem]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_InfoXjb_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'

------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-25 16:38:11
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_InfoXjb_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([id])+1 FROM [tunnel_infoxjb]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[RTblDatabaseVersion]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[RTblDatabaseVersion](
	[DatabaseVersion] [varchar](40) NOT NULL
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Porss_RegionItem_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-8 13:50:37
------------------------------------
CREATE PROCEDURE [dbo].[UP_Porss_RegionItem_Exists]
@Item_Id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Porss_RegionItem] WHERE Item_Id=@Item_Id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_kaoqin]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_kaoqin](
	[k_id] [bigint] IDENTITY(1,1) NOT NULL,
	[k_date] [datetime] NULL,
	[k_amtime] [varchar](50) NULL,
	[k_pmtime] [varchar](50) NULL,
	[k_endtime] [varchar](50) NULL,
	[k_user] [int] NULL,
	[k_ifsb] [int] NULL,
 CONSTRAINT [PK_TUNNEL_KAOQIN] PRIMARY KEY CLUSTERED 
(
	[k_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_kaoqin', N'COLUMN',N'k_date'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'考勤日期' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_kaoqin', @level2type=N'COLUMN',@level2name=N'k_date'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_kaoqin', N'COLUMN',N'k_amtime'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'上午登记时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_kaoqin', @level2type=N'COLUMN',@level2name=N'k_amtime'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_kaoqin', N'COLUMN',N'k_pmtime'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'下午登记时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_kaoqin', @level2type=N'COLUMN',@level2name=N'k_pmtime'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_kaoqin', N'COLUMN',N'k_endtime'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'下班登记时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_kaoqin', @level2type=N'COLUMN',@level2name=N'k_endtime'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_kaoqin', N'COLUMN',N'k_user'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'登记人ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_kaoqin', @level2type=N'COLUMN',@level2name=N'k_user'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_kaoqin', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'考勤' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_kaoqin'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Porss_RegionItem_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-8 13:50:37
------------------------------------
CREATE PROCEDURE [dbo].[UP_Porss_RegionItem_ADD]
@Item_Id int output,
@Item_Class int,
@Item_Name varchar(100),
@Item_Length int,
@Item_Direction int,
@Item_Location int,
@Item_RegId int

 AS 
	INSERT INTO [Porss_RegionItem](
	[Item_Class],[Item_Name],[Item_Length],[Item_Direction],[Item_Location],[Item_RegId]
	)VALUES(
	@Item_Class,@Item_Name,@Item_Length,@Item_Direction,@Item_Location,@Item_RegId
	)
	SET @Item_Id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_RunId]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_RunId](
	[run_id] [bigint] IDENTITY(1,1) NOT NULL,
	[run_currentid] [bigint] NULL CONSTRAINT [DF_Tunnel_RunId_run_currentid]  DEFAULT (0)
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_ViewTable_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-17 12:16:50
------------------------------------
CREATE PROCEDURE [dbo].[UP_ViewTable_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([id])+1 FROM [ViewTable]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Porss_RegionItem_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-8 13:50:37
------------------------------------
CREATE PROCEDURE [dbo].[UP_Porss_RegionItem_Update]
@Item_Id int,
@Item_Class int,
@Item_Name varchar(100),
@Item_Length int,
@Item_Direction int,
@Item_Location int,
@Item_RegId int
 AS 
	UPDATE [Porss_RegionItem] SET 
	[Item_Class] = @Item_Class,[Item_Name] = @Item_Name,[Item_Length] = @Item_Length,[Item_Direction] = @Item_Direction,[Item_Location] = @Item_Location,[Item_RegId] = @Item_RegId
	WHERE Item_Id=@Item_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[temp1]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[temp1](
	[m_id] [bigint] IDENTITY(1,1) NOT NULL,
	[m_login] [varchar](50) NULL,
	[m_name] [varchar](50) NULL,
	[m_password] [varchar](50) NULL,
	[m_mobile] [varchar](50) NULL,
	[m_mail] [varchar](50) NOT NULL,
	[m_idcard] [varchar](50) NULL,
	[m_spassword] [varchar](50) NULL,
	[m_jiao] [int] NULL,
	[m_bum] [nvarchar](200) NULL,
	[m_duty] [nvarchar](200) NULL,
	[m_state] [int] NULL,
	[m_flag] [varchar](2000) NULL,
	[m_zdyqx] [int] NULL,
	[m_birth] [datetime] NULL,
	[m_online] [int] NULL,
	[m_onlinetime] [datetime] NULL,
	[m_counttime] [bigint] NULL,
	[m_lastoutlogin] [varchar](200) NULL
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_kaosetting]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_kaosetting](
	[k_id] [bigint] IDENTITY(1,1) NOT NULL,
	[k_amtime] [varchar](20) NULL,
	[k_pmtime] [varchar](20) NULL,
	[k_xiu] [varchar](20) NULL,
	[k_am2time] [varchar](20) NULL,
	[k_pm2time] [varchar](20) NULL,
 CONSTRAINT [PK_TUNNEL_KAOSETTING] PRIMARY KEY CLUSTERED 
(
	[k_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_kaosetting', N'COLUMN',N'k_amtime'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'上午上班时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_kaosetting', @level2type=N'COLUMN',@level2name=N'k_amtime'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_kaosetting', N'COLUMN',N'k_pmtime'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'下午上班时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_kaosetting', @level2type=N'COLUMN',@level2name=N'k_pmtime'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_kaosetting', N'COLUMN',N'k_xiu'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'周末休息日' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_kaosetting', @level2type=N'COLUMN',@level2name=N'k_xiu'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_kaosetting', N'COLUMN',N'k_am2time'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'上午下班时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_kaosetting', @level2type=N'COLUMN',@level2name=N'k_am2time'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_kaosetting', N'COLUMN',N'k_pm2time'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'下午下班时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_kaosetting', @level2type=N'COLUMN',@level2name=N'k_pm2time'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_kaosetting', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'考勤设置' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_kaosetting'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_ViewTable_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-17 12:16:50
------------------------------------
CREATE PROCEDURE [dbo].[UP_ViewTable_Exists]
@id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [ViewTable] WHERE id=@id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Porss_RegionItem_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-8 13:50:37
------------------------------------
CREATE PROCEDURE [dbo].[UP_Porss_RegionItem_Delete]
@Item_Id int
 AS 
	DELETE [Porss_RegionItem]
	 WHERE Item_Id=@Item_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Porss_RegionItem_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-8 13:50:37
------------------------------------
CREATE PROCEDURE [dbo].[UP_Porss_RegionItem_GetModel]
@Item_Id int
 AS 
	SELECT 
	Item_Id,Item_Class,Item_Name,Item_Length,Item_Direction,Item_Location,Item_RegId
	 FROM [Porss_RegionItem]
	 WHERE Item_Id=@Item_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_log]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_log](
	[l_id] [bigint] IDENTITY(1,1) NOT NULL,
	[l_user] [int] NULL,
	[l_time] [datetime] NULL CONSTRAINT [DF_Tunnel_log_l_time]  DEFAULT (getdate()),
	[l_content] [text] NULL,
	[l_ip] [varchar](50) NULL,
	[l_sort] [int] NULL CONSTRAINT [DF__Tunnel_lo__l_sor__2D27B809]  DEFAULT (0),
 CONSTRAINT [PK_TUNNEL_LOG] PRIMARY KEY CLUSTERED 
(
	[l_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_log', N'COLUMN',N'l_user'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'用户ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_log', @level2type=N'COLUMN',@level2name=N'l_user'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_log', N'COLUMN',N'l_time'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'操作时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_log', @level2type=N'COLUMN',@level2name=N'l_time'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_log', N'COLUMN',N'l_content'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'操作内容' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_log', @level2type=N'COLUMN',@level2name=N'l_content'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_log', N'COLUMN',N'l_ip'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'IP' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_log', @level2type=N'COLUMN',@level2name=N'l_ip'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_log', N'COLUMN',N'l_sort'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'操作类型  增1 删2 改3 查4 ' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_log', @level2type=N'COLUMN',@level2name=N'l_sort'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_log', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'操作日志' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_log'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_ViewTable_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-17 12:16:50
------------------------------------
CREATE PROCEDURE [dbo].[UP_ViewTable_Update]
@id int,
@typeId int,
@content varchar(800),
@setDate datetime,
@userId int
 AS 
	UPDATE [ViewTable] SET 
	[typeId] = @typeId,[content] = @content,[setDate] = @setDate,[userId] = @userId
	WHERE id=@id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Porss_RegionItem_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-8 13:50:37
------------------------------------
CREATE PROCEDURE [dbo].[UP_Porss_RegionItem_GetList]
 AS 
	SELECT 
	Item_Id,Item_Class,Item_Name,Item_Length,Item_Direction,Item_Location,Item_RegId
	 FROM [Porss_RegionItem]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_ViewTable_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-17 12:16:50
------------------------------------
CREATE PROCEDURE [dbo].[UP_ViewTable_Delete]
@id int
 AS 
	DELETE [ViewTable]
	 WHERE id=@id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_xjbType]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_xjbType](
	[id] [int] IDENTITY(1,1) NOT NULL,
	[typename] [varchar](100) NOT NULL CONSTRAINT [DF_Tunnel_xjbType_typename]  DEFAULT (''),
	[typeid] [int] NOT NULL CONSTRAINT [DF_Tunnel_xjbType_typeid]  DEFAULT ((0)),
	[parentid] [int] NOT NULL CONSTRAINT [DF_Tunnel_xjbType_parentid]  DEFAULT ((0)),
	[url] [varchar](200) NOT NULL CONSTRAINT [DF_Tunnel_xjbType_url]  DEFAULT (''),
 CONSTRAINT [PK_Tunnel_xjbType] PRIMARY KEY NONCLUSTERED 
(
	[id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_ViewTable_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-17 12:16:50
------------------------------------
CREATE PROCEDURE [dbo].[UP_ViewTable_GetModel]
@id int
 AS 
	SELECT 
	id,typeId,content,setDate,userId
	 FROM [ViewTable]
	 WHERE id=@id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_ViewTable_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-17 12:16:50
------------------------------------
CREATE PROCEDURE [dbo].[UP_ViewTable_GetList]
 AS 
	SELECT 
	id,typeId,content,setDate,userId
	 FROM [ViewTable]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_meeting]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_meeting](
	[m_id] [bigint] IDENTITY(1,1) NOT NULL,
	[m_title] [varchar](200) NULL,
	[m_content] [text] NULL,
	[m_menber] [varchar](1000) NULL,
	[m_startime] [datetime] NULL,
	[m_endtime] [datetime] NULL,
	[m_user] [int] NULL,
	[m_state] [int] NULL,
 CONSTRAINT [PK_TUNNEL_MEETING] PRIMARY KEY CLUSTERED 
(
	[m_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_meeting', N'COLUMN',N'm_title'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'标题' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_meeting', @level2type=N'COLUMN',@level2name=N'm_title'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_meeting', N'COLUMN',N'm_content'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'内容' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_meeting', @level2type=N'COLUMN',@level2name=N'm_content'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_meeting', N'COLUMN',N'm_menber'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'参加人' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_meeting', @level2type=N'COLUMN',@level2name=N'm_menber'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_meeting', N'COLUMN',N'm_startime'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'开始时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_meeting', @level2type=N'COLUMN',@level2name=N'm_startime'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_meeting', N'COLUMN',N'm_endtime'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'结束时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_meeting', @level2type=N'COLUMN',@level2name=N'm_endtime'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_meeting', N'COLUMN',N'm_user'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'发布人ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_meeting', @level2type=N'COLUMN',@level2name=N'm_user'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_meeting', N'COLUMN',N'm_state'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'状态' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_meeting', @level2type=N'COLUMN',@level2name=N'm_state'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_meeting', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'会议' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_meeting'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[ViewTable]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[ViewTable](
	[id] [int] IDENTITY(1,1) NOT NULL,
	[objId] [int] NULL,
	[typeId] [int] NULL,
	[content] [varchar](800) NULL,
	[setDate] [datetime] NULL CONSTRAINT [DF_ViewTable_setDate]  DEFAULT (getdate()),
	[userId] [int] NULL,
 CONSTRAINT [PK_ViewTable] PRIMARY KEY CLUSTERED 
(
	[id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'ViewTable', N'COLUMN',N'typeId'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0新闻 1 公告 2文件' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'ViewTable', @level2type=N'COLUMN',@level2name=N'typeId'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_byingshe_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:04
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_byingshe_Exists]
@by_id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_byingshe] WHERE by_id=@by_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_file]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_file](
	[f_id] [bigint] IDENTITY(1,1) NOT NULL,
	[f_title] [varchar](100) NULL,
	[f_file] [varchar](100) NULL,
	[f_size] [varchar](50) NULL,
	[f_sort] [int] NULL,
	[f_addtime] [datetime] NULL CONSTRAINT [DF_Tunnel_file_f_addtime]  DEFAULT (getdate()),
	[f_user] [int] NULL,
	[f_juser] [varchar](500) NULL,
	[f_content] [text] NULL,
	[f_bum] [int] NULL,
 CONSTRAINT [PK_TUNNEL_FILE] PRIMARY KEY CLUSTERED 
(
	[f_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_file', N'COLUMN',N'f_title'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'文件标题' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_file', @level2type=N'COLUMN',@level2name=N'f_title'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_file', N'COLUMN',N'f_file'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'附件路径' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_file', @level2type=N'COLUMN',@level2name=N'f_file'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_file', N'COLUMN',N'f_size'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'文件大小' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_file', @level2type=N'COLUMN',@level2name=N'f_size'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_file', N'COLUMN',N'f_sort'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'文件类型 1是共享 0不共享' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_file', @level2type=N'COLUMN',@level2name=N'f_sort'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_file', N'COLUMN',N'f_addtime'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'发布时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_file', @level2type=N'COLUMN',@level2name=N'f_addtime'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_file', N'COLUMN',N'f_user'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'发布人	' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_file', @level2type=N'COLUMN',@level2name=N'f_user'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_file', N'COLUMN',N'f_juser'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'共享用户' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_file', @level2type=N'COLUMN',@level2name=N'f_juser'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_file', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'文件' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_file'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[RTblRoot]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[RTblRoot](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
 CONSTRAINT [RDexRTblRoot] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_vannewpaper_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：
--说明：
--时间：2009-10-23 17:19:48
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_vannewpaper_Exists]
@v_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_vannewpaper] WHERE v_id=@v_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_project]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_project](
	[p_id] [bigint] IDENTITY(1,1) NOT NULL,
	[p_name] [varchar](200) NULL,
	[p_yname] [varchar](100) NULL,
	[p_jname] [varchar](100) NULL,
	[p_xfile] [varchar](200) NULL,
	[p_zfile] [varchar](200) NULL,
	[p_user] [int] NULL,
 CONSTRAINT [PK_TUNNEL_PROJECT] PRIMARY KEY CLUSTERED 
(
	[p_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_project', N'COLUMN',N'p_name'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'工程名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_project', @level2type=N'COLUMN',@level2name=N'p_name'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_project', N'COLUMN',N'p_yname'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'业主名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_project', @level2type=N'COLUMN',@level2name=N'p_yname'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_project', N'COLUMN',N'p_jname'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'监理方' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_project', @level2type=N'COLUMN',@level2name=N'p_jname'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_project', N'COLUMN',N'p_xfile'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'项目概况' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_project', @level2type=N'COLUMN',@level2name=N'p_xfile'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_project', N'COLUMN',N'p_zfile'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'组织结构' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_project', @level2type=N'COLUMN',@level2name=N'p_zfile'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_project', N'COLUMN',N'p_user'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'发布人ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_project', @level2type=N'COLUMN',@level2name=N'p_user'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_project', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'工程概况' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_project'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_byingshe_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:04
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_byingshe_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([by_id])+1 FROM [Tunnel_byingshe]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_byingshe_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:04
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_byingshe_Delete]
@by_id int
 AS 
	DELETE [Tunnel_byingshe]
	 WHERE by_id=@by_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_vannewpaper_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:48
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_vannewpaper_Update]
@v_id bigint,
@v_title varchar(200),
@v_img varchar(100),
@v_file varbinary,
@v_user int,
@v_sort int
 AS 
	UPDATE [Tunnel_vannewpaper] SET 
	[v_title] = @v_title,[v_img] = @v_img,[v_file] = @v_file,[v_user] = @v_user,[v_sort] = @v_sort
	WHERE v_id=@v_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_projectlog]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_projectlog](
	[pl_id] [bigint] IDENTITY(1,1) NOT NULL,
	[pl_title] [varchar](200) NULL,
	[pl_content] [text] NULL,
	[pl_time] [datetime] NULL,
	[pl_user] [int] NULL,
 CONSTRAINT [PK_TUNNEL_PROJECTLOG] PRIMARY KEY CLUSTERED 
(
	[pl_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_projectlog', N'COLUMN',N'pl_title'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'标题' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_projectlog', @level2type=N'COLUMN',@level2name=N'pl_title'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_projectlog', N'COLUMN',N'pl_content'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'内容' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_projectlog', @level2type=N'COLUMN',@level2name=N'pl_content'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_projectlog', N'COLUMN',N'pl_time'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'提交时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_projectlog', @level2type=N'COLUMN',@level2name=N'pl_time'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_projectlog', N'COLUMN',N'pl_user'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'提交人ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_projectlog', @level2type=N'COLUMN',@level2name=N'pl_user'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_projectlog', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'施工日志' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_projectlog'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[RTblNamedObj]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[RTblNamedObj](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[Name] [varchar](200) NULL,
 CONSTRAINT [RDexRTblNamedObj] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_anpai]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_anpai](
	[a_id] [int] IDENTITY(1,1) NOT NULL,
	[a_title] [varchar](50) NULL,
	[a_content] [varchar](500) NULL,
	[a_date] [datetime] NULL,
	[a_ampm] [varchar](50) NULL,
	[a_userId] [int] NULL,
	[a_createDate] [datetime] NULL,
 CONSTRAINT [PK_Tunnel_anpai] PRIMARY KEY CLUSTERED 
(
	[a_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_anpai', N'COLUMN',N'a_id'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'编号' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_anpai', @level2type=N'COLUMN',@level2name=N'a_id'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_anpai', N'COLUMN',N'a_title'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'标题' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_anpai', @level2type=N'COLUMN',@level2name=N'a_title'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_anpai', N'COLUMN',N'a_content'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'内容' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_anpai', @level2type=N'COLUMN',@level2name=N'a_content'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_anpai', N'COLUMN',N'a_date'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'日期' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_anpai', @level2type=N'COLUMN',@level2name=N'a_date'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_anpai', N'COLUMN',N'a_ampm'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'上午下午' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_anpai', @level2type=N'COLUMN',@level2name=N'a_ampm'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_anpai', N'COLUMN',N'a_userId'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'用户ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_anpai', @level2type=N'COLUMN',@level2name=N'a_userId'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_anpai', N'COLUMN',N'a_createDate'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'创建时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_anpai', @level2type=N'COLUMN',@level2name=N'a_createDate'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_byingshe_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:04
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_byingshe_GetModel]
@by_id int
 AS 
	SELECT 
	by_id,by_bid,by_list
	 FROM [Tunnel_byingshe]
	 WHERE by_id=@by_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_byingshe_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:04
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_byingshe_GetList]
 AS 
	SELECT 
	by_id,by_bid,by_list
	 FROM [Tunnel_byingshe]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_vannewpaper_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:48
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_vannewpaper_GetModel]
@v_id bigint
 AS 
	SELECT 
	v_id,v_title,v_img,v_file,v_user,v_sort
	 FROM [Tunnel_vannewpaper]
	 WHERE v_id=@v_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_report]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_report](
	[r_id] [bigint] IDENTITY(1,1) NOT NULL,
	[r_title] [varchar](200) NULL,
	[r_file] [varchar](100) NULL,
	[r_time] [datetime] NULL,
	[r_from] [int] NULL,
	[r_user] [int] NULL,
	[r_content] [varchar](2000) NULL,
	[r_toemail] [varchar](100) NULL,
 CONSTRAINT [PK_TUNNEL_REPORT] PRIMARY KEY CLUSTERED 
(
	[r_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_report', N'COLUMN',N'r_title'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'报告标题' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_report', @level2type=N'COLUMN',@level2name=N'r_title'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_report', N'COLUMN',N'r_file'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'附件' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_report', @level2type=N'COLUMN',@level2name=N'r_file'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_report', N'COLUMN',N'r_time'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'提交时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_report', @level2type=N'COLUMN',@level2name=N'r_time'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_report', N'COLUMN',N'r_from'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'收报告人ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_report', @level2type=N'COLUMN',@level2name=N'r_from'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_report', N'COLUMN',N'r_user'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'提交人ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_report', @level2type=N'COLUMN',@level2name=N'r_user'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_report', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'报告' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_report'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_dyingshe_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:30
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_dyingshe_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([dy_id])+1 FROM [Tunnel_dyingshe]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_vannewpaper_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:48
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_vannewpaper_GetList]
 AS 
	SELECT 
	v_id,v_title,v_img,v_file,v_user,v_sort
	 FROM [Tunnel_vannewpaper]

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[SearchAll]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'







CREATE PROCEDURE [dbo].[SearchAll] 
@tblName varchar(255), -- 表名 
@strGetFields varchar(1000) = ''*'', -- 需要返回的列 
@fldName varchar(255)='''', -- 排序的字段名(可包含如TABLE.FLDNAME形式） 
@PageSize int = 10, -- 页尺寸 
@PageIndex int = 1, -- 页码 
@doCount bit = 0, -- 返回记录总数, 非 0 值则返回 
@OrderType bit = 0, -- 设置排序类型, 非 0 值则降序 
@strWhere varchar(1500) = '''' -- 查询条件 (注意: 不要加 where) 
AS 
declare @strSQL varchar(5000) -- 主语句 
declare @strTmp varchar(110) -- 临时变量 
declare @strOrder varchar(400) -- 排序类型 
declare @fldName_t varchar(255) -- 在分页时用的排序字段名，不包含多表并列时的表名 
declare @table varchar(500)
set @fldName_t = right(@fldName,len(@fldName)-CHARINDEX(''.'',@fldName)) 
--根据表返回相关字段名
select @strGetFields= case @tblName 
	when ''Tunnel_index'' then ''id as id,title as title,setDate as setdate,userId as userid,1 as bz,content,del''
	when ''Tunnel_information'' then ''i_id as id,i_title as title,i_time as setdate,i_user as userid,2 as bz,i_sort,i_hit,i_content as content,i_del as del''
	when ''Tunnel_bumf'' then ''b_id as id,b_title as title,b_time as setdate,b_user as userid,3 as bz,b_content as content,0 as del''
 end
set @table=''(select ''+@strGetFields+'' from ''+ @tblName + '' ) as Tunnel_table '';
if @doCount != 0 
	begin 
		if @strWhere !='''' 
		set @strSQL = ''select count(*) as Total from '' + @table + '' where ''+@strWhere 
		else 
		set @strSQL = ''select count(*) as Total from '' + @table + '''' 
	end 
--以上代码的意思是如果@doCount传递过来的不是0，就执行总数统计。以下的所有代码都是@doCount为0的情况 
else 
	begin 
		if @OrderType != 0 
			begin 
				set @strTmp = ''<(select min'' 
				set @strOrder = '' order by '' + @fldName +'' desc'' 
				--如果@OrderType不是0，就执行降序，这句很重要！ 
			end 
		else 
			begin 
				set @strTmp = ''>(select max'' 
				set @strOrder = '' order by '' + @fldName +'' asc'' 
				print @strTmp
				print @strOrder
			end 

		if @PageIndex = 1 
			begin 
				if @strWhere != '''' 
					set @strSQL = ''select top '' + str(@PageSize) +'' ''+''*''+ '' from '' + @table + '' where '' + @strWhere + '' '' + @strOrder 
				else 
					set @strSQL = ''select top '' + str(@PageSize) +'' ''+''*''+ '' from ''+ @table + '' ''+ @strOrder 
				--如果是第一页就执行以上代码，这样会加快执行速度 	
				print @strSQL
			end 
		else 
			begin 
				--以下代码赋予了@strSQL以真正执行的SQL代码 
				set @strSQL = ''select top '' + str(@PageSize) +'' ''+''*''+ '' from ''+ @table + '' where '' + @fldName + '' '' + @strTmp + '' (''+ @fldName_t + '') from (select top '' + str((@PageIndex-1)*@PageSize) + '' ''+ @fldName + '' from '' + @tblName + '''' + @strOrder + '') as tblTmp)''+ @strOrder 
				if @strWhere != '''' 
					set @strSQL = ''select top '' + str(@PageSize) +'' ''+''*''+ '' from ''+ @table + '' where '' + @fldName + '' '' + @strTmp + '' (''+ @fldName_t + '') from (select top '' + str((@PageIndex-1)*@PageSize) + '' ''+ @fldName + '' from '' + @tblName + '' where '' + @strWhere + '' ''+ @strOrder + '') as tblTmp) and '' + @strWhere + '' '' + @strOrder 
			end 
	end 
exec (@strSQL)









' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UmlGeneralizableElement]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[UmlGeneralizableElement](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[IsRoot] [tinyint] NULL,
	[IsLeaf] [tinyint] NULL,
	[IsAbstract] [tinyint] NULL,
 CONSTRAINT [RDexUmlGeneralizableElement] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_dyingshe_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:30
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_dyingshe_Exists]
@dy_id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_dyingshe] WHERE dy_id=@dy_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_step]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_step](
	[s_id] [bigint] IDENTITY(1,1) NOT NULL,
	[s_name] [varchar](100) NULL,
	[s_num] [int] NULL,
	[s_zid] [varchar](500) NULL,
	[s_lid] [int] NULL,
	[s_depict] [varchar](1000) NULL,
	[s_ishui] [int] NULL CONSTRAINT [DF_Tunnel_step_s_ishui]  DEFAULT (0),
	[s_isbak] [int] NULL CONSTRAINT [DF_Tunnel_step_s_isbak]  DEFAULT (0),
 CONSTRAINT [PK_TUNNEL_STEP] PRIMARY KEY CLUSTERED 
(
	[s_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_step', N'COLUMN',N's_name'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'步骤名称' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_step', @level2type=N'COLUMN',@level2name=N's_name'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_step', N'COLUMN',N's_num'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'步骤序号' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_step', @level2type=N'COLUMN',@level2name=N's_num'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_step', N'COLUMN',N's_zid'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'执行人ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_step', @level2type=N'COLUMN',@level2name=N's_zid'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_step', N'COLUMN',N's_lid'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'流程ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_step', @level2type=N'COLUMN',@level2name=N's_lid'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_step', N'COLUMN',N's_depict'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'描述' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_step', @level2type=N'COLUMN',@level2name=N's_depict'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_step', N'COLUMN',N's_ishui'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'是否允许会签' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_step', @level2type=N'COLUMN',@level2name=N's_ishui'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_step', N'COLUMN',N's_isbak'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'是否允许回退' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_step', @level2type=N'COLUMN',@level2name=N's_isbak'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_step', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'流程步骤' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_step'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_InfoXjb]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_InfoXjb](
	[id] [int] IDENTITY(1,1) NOT NULL,
	[typeId] [int] NULL,
	[sectype] [int] NOT NULL CONSTRAINT [DF_Tunnel_InfoXjb_sectype]  DEFAULT ((0)),
	[title] [varchar](200) NULL,
	[content] [text] NULL,
	[imagePaht] [varchar](100) NULL,
	[htmlSource] [text] NULL,
	[setDate] [datetime] NULL CONSTRAINT [DF_Tunnel_InfoXjb_setDate]  DEFAULT (getdate()),
	[userId] [int] NULL,
	[files] [varchar](500) NULL,
	[bum_bz] [int] NOT NULL CONSTRAINT [DF_Tunnel_InfoXjb_bum_bz]  DEFAULT ((0)),
	[del] [int] NOT NULL CONSTRAINT [DF_Tunnel_InfoXjb_del]  DEFAULT ((0)),
	[filename] [varchar](500) NULL,
 CONSTRAINT [PK_Tunnel_InfoXjb] PRIMARY KEY NONCLUSTERED 
(
	[id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_dyingshe_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:30
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_dyingshe_Delete]
@dy_id int
 AS 
	DELETE [Tunnel_dyingshe]
	 WHERE dy_id=@dy_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Date_Sys_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:11
------------------------------------
CREATE PROCEDURE [dbo].[UP_Date_Sys_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([d_Id])+1 FROM [Date_Sys]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_MingXing_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-30 10:14:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_MingXing_Exists]
@m_id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_MingXing] WHERE m_id=@m_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_dyingshe_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:30
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_dyingshe_GetModel]
@dy_id int
 AS 
	SELECT 
	dy_id,dy_did,dy_list
	 FROM [Tunnel_dyingshe]
	 WHERE dy_id=@dy_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Date_Sys_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:11
------------------------------------
CREATE PROCEDURE [dbo].[UP_Date_Sys_Exists]
@d_Id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Date_Sys] WHERE d_Id=@d_Id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_MingXing_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-30 10:14:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_MingXing_ADD]
@m_id int output,
@m_uid int,
@m_img varchar(50),
@m_content varchar(2000),
@m_year int,
@m_moon int

 AS 
	INSERT INTO [Tunnel_MingXing](
	[m_uid],[m_img],[m_content],[m_year],[m_moon]
	)VALUES(
	@m_uid,@m_img,@m_content,@m_year,@m_moon
	)
	SET @m_id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_workplan]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_workplan](
	[w_id] [bigint] IDENTITY(1,1) NOT NULL,
	[w_title] [varchar](200) NULL,
	[w_content] [text] NULL,
	[w_starttime] [datetime] NULL,
	[w_endtime] [datetime] NULL,
	[w_depict] [varchar](1000) NULL,
	[w_user] [int] NULL,
 CONSTRAINT [PK_TUNNEL_WORKPLAN] PRIMARY KEY CLUSTERED 
(
	[w_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_workplan', N'COLUMN',N'w_title'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'标题' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_workplan', @level2type=N'COLUMN',@level2name=N'w_title'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_workplan', N'COLUMN',N'w_content'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'内容' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_workplan', @level2type=N'COLUMN',@level2name=N'w_content'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_workplan', N'COLUMN',N'w_starttime'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'开始时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_workplan', @level2type=N'COLUMN',@level2name=N'w_starttime'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_workplan', N'COLUMN',N'w_endtime'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'结束时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_workplan', @level2type=N'COLUMN',@level2name=N'w_endtime'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_workplan', N'COLUMN',N'w_depict'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'描述' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_workplan', @level2type=N'COLUMN',@level2name=N'w_depict'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_workplan', N'COLUMN',N'w_user'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'用户ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_workplan', @level2type=N'COLUMN',@level2name=N'w_user'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_workplan', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'工作计划表' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_workplan'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_Index]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_Index](
	[id] [int] IDENTITY(1,1) NOT NULL,
	[typeId] [int] NULL,
	[title] [varchar](200) NULL,
	[content] [text] NULL,
	[imagePaht] [varchar](100) NULL,
	[htmlSource] [text] NULL,
	[setDate] [datetime] NULL CONSTRAINT [DF_Index_setDate]  DEFAULT (getdate()),
	[userId] [int] NULL,
	[files] [varchar](500) NULL,
	[bum_bz] [int] NOT NULL CONSTRAINT [DF_Tunnel_Index_bum_bz]  DEFAULT ((0)),
	[del] [int] NOT NULL CONSTRAINT [DF_Tunnel_Index_del]  DEFAULT ((0)),
	[filename] [varchar](500) NULL,
 CONSTRAINT [PK_Index] PRIMARY KEY CLUSTERED 
(
	[id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_Index', N'COLUMN',N'del'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'0正常|1删除' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_Index', @level2type=N'COLUMN',@level2name=N'del'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_MingXing_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-30 10:14:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_MingXing_Delete]
@m_id int
 AS 
	DELETE [Tunnel_MingXing]
	 WHERE m_id=@m_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Vote_Info_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 10:22:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Vote_Info_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([v_id])+1 FROM [Vote_Info]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_uyingshe_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_uyingshe_Exists]
@uy_id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_uyingshe] WHERE uy_id=@uy_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Date_Sys_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:11
------------------------------------
CREATE PROCEDURE [dbo].[UP_Date_Sys_Delete]
@d_Id int
 AS 
	DELETE [Date_Sys]
	 WHERE d_Id=@d_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_dyingshe_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:30
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_dyingshe_GetList]
 AS 
	SELECT 
	dy_id,dy_did,dy_list
	 FROM [Tunnel_dyingshe]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Date_Sys_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:11
------------------------------------
CREATE PROCEDURE [dbo].[UP_Date_Sys_ADD]
@d_Id int,
@d_userId int,
@d_beginPoll_Date datetime,
@d_endPoll_Date datetime,
@d_proce_Date datetime

 AS 
	INSERT INTO [Date_Sys](
	[d_Id],[d_userId],[d_beginPoll_Date],[d_endPoll_Date],[d_proce_Date]
	)VALUES(
	@d_Id,@d_userId,@d_beginPoll_Date,@d_endPoll_Date,@d_proce_Date
	)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_MingXing_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-30 10:14:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_MingXing_Update]
@m_id int,
@m_uid int,
@m_img varchar(50),
@m_content varchar(2000),
@m_year int,
@m_moon int
 AS 
	UPDATE [Tunnel_MingXing] SET 
	[m_uid] = @m_uid,[m_img] = @m_img,[m_content] = @m_content,[m_year] = @m_year,[m_moon] = @m_moon
	WHERE m_id=@m_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[RTblSumInfo]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[RTblSumInfo](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[Comments] [text] NULL,
	[ShortDesc] [varchar](255) NULL,
 CONSTRAINT [RDexRTblSumInfo] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_uyingshe_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_uyingshe_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([uy_id])+1 FROM [Tunnel_uyingshe]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Date_Sys_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:11
------------------------------------
CREATE PROCEDURE [dbo].[UP_Date_Sys_Update]
@d_Id int,
@d_userId int,
@d_beginPoll_Date datetime,
@d_endPoll_Date datetime,
@d_proce_Date datetime
 AS 
	UPDATE [Date_Sys] SET 
	[d_userId] = @d_userId,[d_beginPoll_Date] = @d_beginPoll_Date,[d_endPoll_Date] = @d_endPoll_Date,[d_proce_Date] = @d_proce_Date
	WHERE d_Id=@d_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_MingXing_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-30 10:14:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_MingXing_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([m_id])+1 FROM [Tunnel_MingXing]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UmlElement]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[UmlElement](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[Visibility] [varchar](25) NULL,
 CONSTRAINT [RDexUmlElement] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_Remind]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_Remind](
	[m_id] [bigint] IDENTITY(1,1) NOT NULL,
	[m_title] [varchar](500) NULL,
	[m_url] [varchar](500) NULL,
	[m_touser] [bigint] NULL,
	[m_time] [datetime] NULL,
	[m_isread] [int] NULL,
	[m_callTime] [datetime] NULL CONSTRAINT [DF_Tunnel_Remind_m_callTime]  DEFAULT ('1800-1-1 0:00:00'),
	[m_type] [int] NULL,
	[m_typeid] [int] NULL,
	[m_bid] [int] NULL CONSTRAINT [DF_Tunnel_Remind_m_bid]  DEFAULT ((0)),
 CONSTRAINT [PK_Tunnel_Remind] PRIMARY KEY CLUSTERED 
(
	[m_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_Remind', N'COLUMN',N'm_bid'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'步骤ID' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_Remind', @level2type=N'COLUMN',@level2name=N'm_bid'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_MingXing_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-30 10:14:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_MingXing_GetModel]
@m_id int
 AS 
	SELECT 
	m_id,m_uid,m_img,m_content,m_year,m_moon
	 FROM [Tunnel_MingXing]
	 WHERE m_id=@m_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Vote_Info_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 10:22:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Vote_Info_Exists]
@v_id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Vote_Info] WHERE v_id=@v_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Date_Sys_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:11
------------------------------------
CREATE PROCEDURE [dbo].[UP_Date_Sys_GetModel]
@d_Id int
 AS 
	SELECT 
	d_Id,d_userId,d_beginPoll_Date,d_endPoll_Date,d_proce_Date
	 FROM [Date_Sys]
	 WHERE d_Id=@d_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_MingXing_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-30 10:14:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_MingXing_GetList]
 AS 
	SELECT 
	m_id,m_uid,m_img,m_content,m_year,m_moon
	 FROM [Tunnel_MingXing]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UmlReference]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[UmlReference](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[Visibility] [varchar](25) NULL,
	[Alias] [varchar](255) NULL,
 CONSTRAINT [RDexUmlReference] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Vote_Info_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 10:22:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Vote_Info_ADD]
@v_id int output,
@v_title nvarchar(50),
@v_count int,
@v_Img nvarchar(100),
@v_author nvarchar(50),
@v_remark nvarchar(200)

 AS 
	INSERT INTO [Vote_Info](
	[v_title],[v_count],[v_Img],[v_author],[v_remark]
	)VALUES(
	@v_title,@v_count,@v_Img,@v_author,@v_remark
	)
	SET @v_id = @@IDENTITY

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_bum_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_bum_ADD]
@b_id bigint output,
@b_name varchar(100),
@b_hid int,
@b_depict varchar(1000)

 AS 
	INSERT INTO [Tunnel_bum](
	[b_name],[b_hid],[b_depict]
	)VALUES(
	@b_name,@b_hid,@b_depict
	)
	SET @b_id = @@IDENTITY

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_weekplan]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_weekplan](
	[w_id] [bigint] IDENTITY(1,1) NOT NULL,
	[w_title] [varchar](200) NULL,
	[w_content] [varchar](500) NULL,
	[w_address] [varchar](100) NULL,
	[w_time] [varchar](50) NULL,
	[w_daytime] [varchar](50) NULL,
	[w_adddate] [datetime] NULL,
	[w_weekID] [varchar](200) NULL CONSTRAINT [DF_Tunnel_weekplan_w_weekID]  DEFAULT (0),
	[w_date] [varchar](50) NULL,
 CONSTRAINT [PK_TUNNEL_WEEKPLAN] PRIMARY KEY CLUSTERED 
(
	[w_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_weekplan', N'COLUMN',N'w_title'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'标题' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_weekplan', @level2type=N'COLUMN',@level2name=N'w_title'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_weekplan', N'COLUMN',N'w_content'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'内容' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_weekplan', @level2type=N'COLUMN',@level2name=N'w_content'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_weekplan', N'COLUMN',N'w_address'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'地点' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_weekplan', @level2type=N'COLUMN',@level2name=N'w_address'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_weekplan', N'COLUMN',N'w_time'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'几点' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_weekplan', @level2type=N'COLUMN',@level2name=N'w_time'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_weekplan', N'COLUMN',N'w_daytime'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'上午?下午' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_weekplan', @level2type=N'COLUMN',@level2name=N'w_daytime'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_weekplan', N'COLUMN',N'w_adddate'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'添加时间' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_weekplan', @level2type=N'COLUMN',@level2name=N'w_adddate'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_weekplan', NULL,NULL))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'一周安排' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_weekplan'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Vote_Info_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 10:22:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Vote_Info_Update]
@v_id int,
@v_title nvarchar(50),
@v_count int,
@v_Img nvarchar(100),
@v_author nvarchar(50),
@v_remark nvarchar(200)
 AS 
	UPDATE [Vote_Info] SET 
	[v_title] = @v_title,[v_count] = @v_count,[v_Img] = @v_Img,[v_author] = @v_author,[v_remark] = @v_remark
	WHERE v_id=@v_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_uyingshe_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_uyingshe_Delete]
@uy_id int
 AS 
	DELETE [Tunnel_uyingshe]
	 WHERE uy_id=@uy_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Vote_Info_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 10:22:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Vote_Info_Delete]
@v_id int
 AS 
	DELETE [Vote_Info]
	 WHERE v_id=@v_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_uyingshe_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_uyingshe_GetModel]
@uy_id int
 AS 
	SELECT 
	uy_id,uy_uid,uy_list
	 FROM [Tunnel_uyingshe]
	 WHERE uy_id=@uy_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_workplan_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:48
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_workplan_GetList]
(
	@Id int,
	@name varchar(50),
	@startDate DATETIME,
	@endDate DATETIME,
	@keyWord nvarchar(50),
	@pageNo int,
	@pageSize int,
	@TaxisMode int,
	@TaxisField nvarchar(50),
	@outRecordCount int output
)
 AS 
begin
	SET NOCOUNT ON
	Declare @StartRecord int
    Declare @EndRecord int    
    set @StartRecord = (@pageNo-1)*@PageSize + 1
    set @EndRecord = @StartRecord + @pageSize - 1	
    DECLARE @taxisWhere nvarchar(1000)
	IF @taxisMode=0
	   SET @taxisWhere = '' order by ''+ltrim(@taxisField)+'' asc''
	ELSE
	   SET @taxisWhere = '' order by ''+ltrim(@taxisField)+'' desc''
	DECLARE @sqlWhere nvarchar(1000);
	DECLARE @sql nvarchar(1000);
	SET @sqlWhere ='' ''
	if @Id > 0
		begin
			SET @sqlWhere = @sqlWhere + '' and id='' + cast(@Id AS nvarchar)
		end
	else
		begin
			IF @startDate<>''''
				SET @sqlWhere = @sqlWhere + '' and w_starttime>='''''' + cast(@startDate AS VARCHAR) + ''''''''
			IF @endDate<>''''
				SET @sqlWhere = @sqlWhere + '' and w_endtime<'''''' + cast(@endDate AS VARCHAR) + ''''''''
			IF @keyWord<>''''
				SET @sqlWhere = @sqlWhere + '' and (w_title like ''''%'' + cast(@keyWord AS nvarchar) + ''%'''' or w_content like ''''%'' + cast(@keyWord AS nvarchar) + ''%'''' )'' 
		end
		
	SET @sql =''SELECT @outRecordCount= COUNT(*) FROM Tunnel_workplan a where ''+@sqlWhere +'' ''
	EXEC sp_executesql @sql,N''@outRecordCount int OUTPUT'',@outRecordCount OUTPUT
	
	exec pagination ''Tunnel_workplan'',''*'',w_id,12,1,0,0, null
	-- set @sql = ''select * from (SELECT ROW_NUMBER() OVER(''+@taxisWhere+'') AS orderId, * FROM [Tunnel_workplan] where '' + @sqlWhere +'') as aa left where aa.orderId BETWEEN ''+ Convert(varchar(50),@StartRecord)+'' and ''+Convert(varchar(50),@EndRecord)
	-- print (@sql)
	
	If @@Error <> 0
      Begin
        Return 1
      End
     Else
      Begin
        Return 0
      End   
end' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_bum_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_bum_Delete]
@b_id bigint
 AS 
	DELETE [Tunnel_bum]
	 WHERE b_id=@b_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UmlType]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[UmlType](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[IsTemplate] [tinyint] NULL,
	[Visibility] [varchar](255) NULL,
	[Multiplicity] [varchar](255) NULL,
	[Details] [varchar](255) NULL,
 CONSTRAINT [RDexUmlType] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Vote_Info_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 10:22:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Vote_Info_GetModel]
@v_id int
 AS 
	SELECT 
	v_id,v_title,v_count,v_Img,v_author,v_remark
	 FROM [Vote_Info]
	 WHERE v_id=@v_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_uyingshe_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_uyingshe_GetList]
 AS 
	SELECT 
	uy_id,uy_uid,uy_list
	 FROM [Tunnel_uyingshe]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Date_Sys_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:11
------------------------------------
CREATE PROCEDURE [dbo].[UP_Date_Sys_GetList]
 AS 
	SELECT 
	d_Id,d_userId,d_beginPoll_Date,d_endPoll_Date,d_proce_Date
	 FROM [Date_Sys]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_weekstate]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_weekstate](
	[week_ID] [varchar](200) NOT NULL,
	[week_state] [int] NULL CONSTRAINT [DF_Tunnel_weekstate_week_state]  DEFAULT (0),
 CONSTRAINT [PK_Tunnel_weekstate] PRIMARY KEY CLUSTERED 
(
	[week_ID] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Vote_Info_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 10:22:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Vote_Info_GetList]
 AS 
	SELECT 
	v_id,v_title,v_count,v_Img,v_author,v_remark
	 FROM [Vote_Info]

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_PageMessage_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 10:23:34
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_PageMessage_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([pic_ID])+1 FROM [Tunnel_PageMessage]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UmlSignalReference]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[UmlSignalReference](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[Direction] [varchar](25) NULL,
 CONSTRAINT [RDexUmlSignalReference] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_PageMessage_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 10:23:34
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_PageMessage_Exists]
@pic_ID int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_PageMessage] WHERE pic_ID=@pic_ID 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[selectIndex]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'-- =============================================
-- Author:		<Author,,Name>
-- Create date: <Create Date,,>
-- Description:	<Description,,>
-- =============================================
CREATE PROCEDURE [dbo].[selectIndex]
	@typeId int
AS
BEGIN
	select imagePaht from Tunnel_Index where typeid = @typeId and imagepaht <> '''' order by id desc
END' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_PageMessage_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 10:23:34
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_PageMessage_ADD]
@pic_ID int output,
@pic_AspxName nvarchar(100),
@pic_TitleName nvarchar(100),
@pic_TopicName nchar(10),
@pic_TopImgURL nvarchar(100),
@pic_BgColor nvarchar(100)

 AS 
	INSERT INTO [Tunnel_PageMessage](
	[pic_AspxName],[pic_TitleName],[pic_TopicName],[pic_TopImgURL],[pic_BgColor]
	)VALUES(
	@pic_AspxName,@pic_TitleName,@pic_TopicName,@pic_TopImgURL,@pic_BgColor
	)
	SET @pic_ID = @@IDENTITY

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_PageMessage_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 10:23:34
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_PageMessage_Update]
@pic_ID int,
@pic_AspxName nvarchar(100),
@pic_TitleName nvarchar(100),
@pic_TopicName nchar(10),
@pic_TopImgURL nvarchar(100),
@pic_BgColor nvarchar(100)
 AS 
	UPDATE [Tunnel_PageMessage] SET 
	[pic_AspxName] = @pic_AspxName,[pic_TitleName] = @pic_TitleName,[pic_TopicName] = @pic_TopicName,[pic_TopImgURL] = @pic_TopImgURL,[pic_BgColor] = @pic_BgColor
	WHERE pic_ID=@pic_ID 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_VoteLog_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:18
------------------------------------
CREATE PROCEDURE [dbo].[UP_VoteLog_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([vg_id])+1 FROM [VoteLog]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UmlStereotype]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[UmlStereotype](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[UMLvalue] [varchar](255) NULL,
 CONSTRAINT [RDexUmlStereotype] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_PageMessage_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 10:23:34
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_PageMessage_Delete]
@pic_ID int
 AS 
	DELETE [Tunnel_PageMessage]
	 WHERE pic_ID=@pic_ID 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_VoteLog_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:18
------------------------------------
CREATE PROCEDURE [dbo].[UP_VoteLog_Exists]
@vg_id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [VoteLog] WHERE vg_id=@vg_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_yingshe]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_yingshe](
	[y_id] [int] IDENTITY(1,1) NOT NULL,
	[y_jsid] [int] NULL,
	[y_qxlist] [varchar](2000) NULL,
 CONSTRAINT [PK_Tunnel_yingshe] PRIMARY KEY CLUSTERED 
(
	[y_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_yingshe', N'COLUMN',N'y_jsid'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'角色id' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_yingshe', @level2type=N'COLUMN',@level2name=N'y_jsid'
GO
IF NOT EXISTS (SELECT * FROM ::fn_listextendedproperty(N'MS_Description' , N'SCHEMA',N'dbo', N'TABLE',N'Tunnel_yingshe', N'COLUMN',N'y_qxlist'))
EXEC sys.sp_addextendedproperty @name=N'MS_Description', @value=N'权限列表' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'TABLE',@level1name=N'Tunnel_yingshe', @level2type=N'COLUMN',@level2name=N'y_qxlist'
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_PageMessage_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 10:23:34
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_PageMessage_GetModel]
@pic_ID int
 AS 
	SELECT 
	pic_ID,pic_AspxName,pic_TitleName,pic_TopicName,pic_TopImgURL,pic_BgColor
	 FROM [Tunnel_PageMessage]
	 WHERE pic_ID=@pic_ID 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_VoteLog_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:18
------------------------------------
CREATE PROCEDURE [dbo].[UP_VoteLog_ADD]

@vg_setDate datetime,
@vg_userId int,
@vg_voteId int

 AS 
	INSERT INTO [VoteLog](
	[vg_setDate],[vg_userId],[vg_voteId]
	)VALUES(
	@vg_setDate,@vg_userId,@vg_voteId
	)
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Profile_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2009/12/8 15:33:21
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Profile_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([p_id])+1 FROM [Tunnel_Profile]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_PageMessage_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 10:23:34
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_PageMessage_GetList]
 AS 
	SELECT 
	pic_ID,pic_AspxName,pic_TitleName,pic_TopicName,pic_TopImgURL,pic_BgColor
	 FROM [Tunnel_PageMessage]

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_VoteLog_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:18
------------------------------------
CREATE PROCEDURE [dbo].[UP_VoteLog_Update]
@vg_id int,
@vg_setDate datetime,
@vg_userId int,
@vg_voteId int
 AS 
	UPDATE [VoteLog] SET 
	[vg_setDate] = @vg_setDate,[vg_userId] = @vg_userId,[vg_voteId] = @vg_voteId
	WHERE vg_id=@vg_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UmlNote]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[UmlNote](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[UMLvalue] [text] NULL,
 CONSTRAINT [RDexUmlNote] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Profile_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009/12/8 15:33:21
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Profile_Exists]
@p_id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_Profile] WHERE p_id=@p_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_LineLength_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 11:08:45
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_LineLength_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([Line_Id])+1 FROM [Pross_LineLength]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_VoteLog_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:18
------------------------------------
CREATE PROCEDURE [dbo].[UP_VoteLog_Delete]
@vg_id int
 AS 
	DELETE [VoteLog]
	 WHERE vg_id=@vg_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_LineLength_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 11:08:45
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_LineLength_Exists]
@Line_Id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Pross_LineLength] WHERE Line_Id=@Line_Id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_VoteLog_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:18
------------------------------------
CREATE PROCEDURE [dbo].[UP_VoteLog_GetModel]
@vg_id int
 AS 
	SELECT 
	vg_id,vg_setDate,vg_userId,vg_voteId
	 FROM [VoteLog]
	 WHERE vg_id=@vg_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Profile_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009/12/8 15:33:21
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Profile_Update]
@p_id int,
@p_name varchar(50),
@p_year int,
@p_bum varchar(50),
@p_filetype varchar(50),
@p_uid int
 AS 
	UPDATE [Tunnel_Profile] SET 
	[p_name] = @p_name,[p_year] = @p_year,[p_bum] = @p_bum,[p_filetype] = @p_filetype,[p_uid] = @p_uid
	WHERE p_id=@p_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_LineLength_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 11:08:45
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_LineLength_ADD]
@Line_Id int output,
@Line_Length int,
@Line_Date datetime,
@Line_Pid int,
@Line_State int

 AS 
	INSERT INTO [Pross_LineLength](
	[Line_Length],[Line_Date],[Line_Pid],[Line_State]
	)VALUES(
	@Line_Length,@Line_Date,@Line_Pid,@Line_State
	)
	SET @Line_Id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_VoteLog_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:18
------------------------------------
CREATE PROCEDURE [dbo].[UP_VoteLog_GetList]
 AS 
	SELECT 
	vg_id,vg_setDate,vg_userId,vg_voteId
	 FROM [VoteLog]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_ReportModel_GetAllNode]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'

CREATE PROCEDURE [dbo].[Tunnel_ReportModel_GetAllNode]
	-- Add the parameters for the stored procedure here
	@ParentId int
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here
	if(@ParentId=-1)
		select * from dbo.Tunnel_ReportModel
	else
		select * from dbo.Tunnel_ReportModel where  Re_ParentId=@ParentId
END



' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_ReportModel_GetAllParent]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'

CREATE PROCEDURE [dbo].[Tunnel_ReportModel_GetAllParent]
	-- Add the parameters for the stored procedure here
	
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here
	select * from dbo.Tunnel_ReportModel where Re_ParentId=0
END

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UmlTaggedValue]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[UmlTaggedValue](
	[IntID] [binary](8) NOT NULL,
	[Z_BranchID_Z] [int] NOT NULL,
	[Z_VS_Z] [int] NOT NULL,
	[Z_VE_Z] [int] NOT NULL,
	[UMLvalue] [varchar](255) NULL,
 CONSTRAINT [RDexUmlTaggedValue] PRIMARY KEY CLUSTERED 
(
	[IntID] ASC,
	[Z_BranchID_Z] ASC,
	[Z_VS_Z] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Profile_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009/12/8 15:33:21
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Profile_Delete]
@p_id int
 AS 
	DELETE [Tunnel_Profile]
	 WHERE p_id=@p_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_LineLength_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 11:08:45
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_LineLength_Update]
@Line_Id int,
@Line_Length int,
@Line_Date datetime,
@Line_Pid int,
@Line_State int
 AS 
	UPDATE [Pross_LineLength] SET 
	[Line_Length] = @Line_Length,[Line_Date] = @Line_Date,[Line_Pid] = @Line_Pid,[Line_State] = @Line_State
	WHERE Line_Id=@Line_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_LeaveWord_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:14
------------------------------------
CREATE PROCEDURE [dbo].[UP_LeaveWord_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([lw_Id])+1 FROM [LeaveWord]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_ReportModel_ModelById]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'

CREATE PROCEDURE [dbo].[Tunnel_ReportModel_ModelById]
	-- Add the parameters for the stored procedure here
	@Id int
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here
	SELECT * from dbo.Tunnel_ReportModel where Re_Id=@Id
END

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_MingXing]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_MingXing](
	[m_id] [int] IDENTITY(1,1) NOT NULL,
	[m_uid] [int] NULL,
	[m_img] [varchar](50) NULL,
	[m_content] [text] NULL,
	[m_year] [int] NULL,
	[m_moon] [int] NULL,
 CONSTRAINT [PK_Tunnel_MingXing] PRIMARY KEY CLUSTERED 
(
	[m_id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Profile_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009/12/8 15:33:21
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Profile_GetModel]
@p_id int
 AS 
	SELECT 
	p_id,p_name,p_year,p_bum,p_filetype,p_uid
	 FROM [Tunnel_Profile]
	 WHERE p_id=@p_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_LineLength_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 11:08:45
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_LineLength_Delete]
@Line_Id int
 AS 
	DELETE [Pross_LineLength]
	 WHERE Line_Id=@Line_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_LeaveWord_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:14
------------------------------------
CREATE PROCEDURE [dbo].[UP_LeaveWord_Exists]
@lw_Id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [LeaveWord] WHERE lw_Id=@lw_Id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Profile_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009/12/8 15:33:21
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Profile_GetList]
 AS 
	SELECT 
	p_id,p_name,p_year,p_bum,p_filetype,p_uid
	 FROM [Tunnel_Profile]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_LineLength_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 11:08:45
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_LineLength_GetModel]
@Line_Id int
 AS 
	SELECT 
	Line_Id,Line_Length,Line_Date,Line_Pid,Line_State
	 FROM [Pross_LineLength]
	 WHERE Line_Id=@Line_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_bumf_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-6 10:30:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_bumf_Exists]
@b_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_bumf] WHERE b_id=@b_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_LeaveWord_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-4 11:32:14
------------------------------------
CREATE PROCEDURE [dbo].[UP_LeaveWord_ADD]
@lw_SetDate datetime,
@lw_Content ntext,
@lw_UserId int,
@lw_VateId int

 AS 
	INSERT INTO [LeaveWord](
	[lw_SetDate],[lw_Content],[lw_UserId],[lw_VateId]
	)VALUES(
	@lw_SetDate,@lw_Content,@lw_UserId,@lw_VateId
	)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_ReportModel]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[Tunnel_ReportModel](
	[Re_Id] [int] IDENTITY(1,1) NOT NULL,
	[Re_Name] [nvarchar](50) NOT NULL,
	[Re_Num] [int] NOT NULL CONSTRAINT [DF_Tunnel_ReportModel_Re_Num]  DEFAULT ((0)),
	[Re_ParentId] [int] NOT NULL CONSTRAINT [DF_Tunnel_ReportModel_Re_ParentId]  DEFAULT ((0)),
	[Re_BumId] [bigint] NOT NULL,
 CONSTRAINT [PK_ReportModel] PRIMARY KEY NONCLUSTERED 
(
	[Re_Id] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iUmlPoint]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iUmlPoint] (@IntID binary(8),@Z_BranchID_Z int,@Z_VS_Z int,@X int=null,@Y int=null,@Z int=null,@Z_VE_Z int=2147483647) as insert UmlPoint values (@IntID,@Z_BranchID_Z,@Z_VS_Z,@Z_VE_Z,@X,@Y,@Z)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Img_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-13 10:18:59
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Img_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([i_id])+1 FROM [Tunnel_Img]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID


' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Img_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-13 10:18:59
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Img_Delete]
@i_id int
 AS 
	DELETE [Tunnel_Img]
	 WHERE i_id=@i_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Img_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-13 10:18:59
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Img_GetModel]
@i_id int
 AS 
	SELECT 
	i_id,i_name,i_uri,i_date,i_user,i_type,i_year
	 FROM [Tunnel_Img]
	 WHERE i_id=@i_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Img_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-13 10:18:59
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Img_GetList]
 AS 
	SELECT 
	i_id,i_name,i_uri,i_date,i_user,i_type,i_year
	 FROM [Tunnel_Img]

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Img_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-13 10:18:59
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Img_Exists]
@i_id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_Img] WHERE i_id=@i_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Img_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-13 10:18:59
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Img_Update]
@i_id int,
@i_name varchar(50),
@i_uri varchar(50),
@i_date datetime,
@i_user int,
@i_type varchar(50),
@i_year varchar(5)
 AS 
	UPDATE [Tunnel_Img] SET 
	[i_name] = @i_name,[i_uri] = @i_uri,[i_date] = @i_date,[i_user] = @i_user,[i_type] = @i_type,[i_year] = @i_year
	WHERE i_id=@i_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Img_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-13 10:18:59
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Img_ADD]
@i_id int output,
@i_name varchar(50),
@i_uri varchar(50),
@i_date datetime,
@i_user int,
@i_type varchar(50),
@i_year varchar(5)

 AS 
	INSERT INTO [Tunnel_Img](
	[i_name],[i_uri],[i_date],[i_user],[i_type],[i_year]
	)VALUES(
	@i_name,@i_uri,@i_date,@i_user,@i_type,@i_year
	)
	SET @i_id = @@IDENTITY

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[pro_SelectLengthList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'CREATE  PROC [dbo].[pro_SelectLengthList]
(
	@pPageSize	int= 10,               -- 每页记录数
    @pPageIndex	int= 1,                -- 当前页码	
	@outvalue	int= 0 OUTPUT          -- 总记录数
)
AS
BEGIN
DECLARE @SQL VARCHAR(4000)

DECLARE  @PageCount INT     -----总页数
                            --
SET @SQL =''SELECT * FROM view_SelectpLengthlist where 1=1 ''

EXEC pro_splitpage @sql,@pPageIndex,@pPageSize,@PageCount, @outvalue OUTPUT
END' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[pro_SelectImgList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'CREATE PROC [dbo].[pro_SelectImgList]
(

	@pPageSize	int= 10,               -- 每页记录数
    @pPageIndex	int= 1,                -- 当前页码	
	@outvalue	int= 0 OUTPUT          -- 总记录数
)
AS
BEGIN
DECLARE @SQL VARCHAR(4000)

DECLARE  @PageCount INT     -----总页数
                            --
SET @SQL =''SELECT * FROM Vote_Info where 1=1 ''


EXEC pro_splitpage @sql,@pPageIndex ,@pPageSize,@PageCount, @outvalue OUTPUT
END' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[pro_SelectcommonpropValue]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'CREATE PROC [dbo].[pro_SelectcommonpropValue]
(
	@vateid		int=0,				   -- 编号
	@pPageSize	int= 10,               -- 每页记录数
    @pPageIndex	int= 1,                -- 当前页码	
	@outvalue	int= 0 OUTPUT          -- 总记录数
)
AS
BEGIN
DECLARE @SQL VARCHAR(4000)

DECLARE  @PageCount INT     -----总页数
                            --
SET @SQL =''SELECT * FROM view_Comment where 1=1 ''
IF ISNULL(@vateid,0)<>0
BEGIN
	SET @SQL =@SQL+'' and lw_vateid  =CONVERT(int, ''+str(@vateid)+'') ''
END

EXEC pro_splitpage @sql,@pPageIndex ,@pPageSize,@PageCount, @outvalue OUTPUT
END' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iUmlValue]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iUmlValue] (@IntID binary(8),@Z_BranchID_Z int,@Z_VS_Z int,@UMLValue varchar(255)=null,@Z_VE_Z int=2147483647) as insert UmlValue values (@IntID,@Z_BranchID_Z,@Z_VS_Z,@Z_VE_Z,@UMLValue)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Advice_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-6 13:37:42
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Advice_Exists]
@a_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_Advice] WHERE a_id=@a_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Advice_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-6 13:37:42
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Advice_ADD]
@a_id bigint output,
@a_user int,
@a_bid int,
@a_gid int,
@a_content text,
@a_time datetime

 AS 
	INSERT INTO [Tunnel_Advice](
	[a_user],[a_bid],[a_gid],[a_content],[a_time]
	)VALUES(
	@a_user,@a_bid,@a_gid,@a_content,@a_time
	)
	SET @a_id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Advice_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-6 13:37:42
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Advice_Update]
@a_id bigint,
@a_user int,
@a_bid int,
@a_gid int,
@a_content text,
@a_time datetime
 AS 
	UPDATE [Tunnel_Advice] SET 
	[a_user] = @a_user,[a_bid] = @a_bid,[a_gid]=@a_gid,[a_content] = @a_content,[a_time] = @a_time
	WHERE a_bid=@a_bid and a_gid=@a_gid' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Advice_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-6 13:37:42
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Advice_Delete]
@a_id bigint
 AS 
	DELETE [Tunnel_Advice]
	 WHERE a_id=@a_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Advice_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-6 13:37:42
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Advice_GetList]
 AS 
	SELECT 
	a_id,a_user,a_bid,a_gid,a_content,a_time
	 FROM [Tunnel_Advice]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Advice_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-6 13:37:42
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Advice_GetModel]
@a_id bigint
 AS 
	SELECT 
	a_id,a_user,a_bid,a_gid,a_content,a_time
	 FROM [Tunnel_Advice]
	 WHERE a_id=@a_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Profile_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009/12/8 15:33:21
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Profile_ADD]
@p_id int output,
@p_name varchar(600),
@p_year int,
@p_bum varchar(50),
@p_filetype varchar(50),
@p_uid int

 AS 
	INSERT INTO [Tunnel_Profile](
	[p_name],[p_year],[p_bum],[p_filetype],[p_uid]
	)VALUES(
	@p_name,@p_year,@p_bum,@p_filetype,@p_uid
	)
	SET @p_id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iUmlAssociationRole]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iUmlAssociationRole] (@IntID binary(8),@Z_BranchID_Z int,@Z_VS_Z int,@Multiplicity varchar(255)=null,@IsNavigable tinyint=null,@IsAggregate tinyint=null,@IsChangeable tinyint=null,@IsOrdered tinyint=null,@Z_VE_Z int=2147483647) as insert UmlAssociationRole values (@IntID,@Z_BranchID_Z,@Z_VS_Z,@Z_VE_Z,@Multiplicity,@IsNavigable,@IsAggregate,@IsChangeable,@IsOrdered)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_bumf_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-6 10:30:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_bumf_GetModel]
@b_id bigint
 AS 
	SELECT 
	b_id,b_title,b_sort,b_time,b_file,b_state,b_user,b_content,b_datefield,b_formcontent,b_suser,b_stype
	 FROM [Tunnel_bumf]
	 WHERE b_id=@b_id
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_bumf_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-6 10:30:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_bumf_GetList]
 AS 
	SELECT 
	b_id,b_sort,b_time,b_file,b_state,b_user,b_content,b_datefield,b_formcontent,b_stype
	 FROM [Tunnel_bumf]


' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_bumf_TitleADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-6 10:30:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_bumf_TitleADD]
@b_id bigint output,
@b_title varchar(200),
@b_sort int,
@b_time datetime,
@b_state int,
@b_user int,
@b_suser int,
@b_formcontent text,
@b_datefield text,
@b_file varchar(3000),
@b_stype int,
@b_content text

 AS 
	INSERT INTO [Tunnel_bumf](
	[b_sort],[b_title],[b_time],[b_state],[b_user],[b_suser],[b_content],[b_formcontent],[b_datefield],[b_file],[b_stype]
	)VALUES(
	@b_sort,@b_title,@b_time,@b_state,@b_user,@b_suser,@b_content,@b_formcontent,@b_datefield,@b_file,@b_stype
	)
	SET @b_id = @@IDENTITY
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iUmlAttribute]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iUmlAttribute] (@IntID binary(8),@Z_BranchID_Z int,@Z_VS_Z int,@InitialValue varchar(255)=null,@TypeExpression varchar(255)=null,@Z_VE_Z int=2147483647) as insert UmlAttribute values (@IntID,@Z_BranchID_Z,@Z_VS_Z,@Z_VE_Z,@InitialValue,@TypeExpression)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iUmlMember]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iUmlMember] (@IntID binary(8),@Z_BranchID_Z int,@Z_VS_Z int,@IsTypeScope tinyint=null,@Visibility varchar(25)=null,@Direction varchar(25)=null,@Z_VE_Z int=2147483647) as insert UmlMember values (@IntID,@Z_BranchID_Z,@Z_VS_Z,@Z_VE_Z,@IsTypeScope,@Visibility,@Direction)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_ReportModel_Add]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'

CREATE PROCEDURE [dbo].[Tunnel_ReportModel_Add]
	-- Add the parameters for the stored procedure here
	@Name varchar(50),
	@Num int,
	@Parentid int,
	@BumId bigint
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here
	insert into Tunnel_ReportModel values(@Name,@Num,@Parentid,@BumId)
END



' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iUmlOperation]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iUmlOperation] (@IntID binary(8),@Z_BranchID_Z int,@Z_VS_Z int,@Concurrency varchar(25)=null,@IsPolymorphic tinyint=null,@IsQuery tinyint=null,@IsAbstract tinyint=null,@Body text=null,@Z_VE_Z int=2147483647) as insert UmlOperation values (@IntID,@Z_BranchID_Z,@Z_VS_Z,@Z_VE_Z,@Concurrency,@IsPolymorphic,@IsQuery,@IsAbstract,@Body)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iUmlParameter]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iUmlParameter] (@IntID binary(8),@Z_BranchID_Z int,@Z_VS_Z int,@DefaultValue varchar(255)=null,@Kind varchar(25)=null,@TypeExpression varchar(255)=null,@Z_VE_Z int=2147483647) as insert UmlParameter values (@IntID,@Z_BranchID_Z,@Z_VS_Z,@Z_VE_Z,@DefaultValue,@Kind,@TypeExpression)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_ProjectReport_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-28 15:02:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_ProjectReport_GetList]
 AS 
	SELECT 
	Report_Id,Report_Name,Report_Class,Report_Sort,Report_State,Report_Shen,Report_Order,Report_UserID
	 FROM [Tunnel_ProjectReport]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_ProjectReport_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-28 15:02:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_ProjectReport_GetModel]
@Report_Id int
 AS 
	SELECT 
	Report_Id,Report_Name,Report_Class,Report_Sort,Report_State,Report_Shen,Report_Order,Report_UserID
	 FROM [Tunnel_ProjectReport]
	 WHERE Report_Id=@Report_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_ProjectReport_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-28 15:02:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_ProjectReport_Delete]
@Report_Id int
 AS 
	DELETE [Tunnel_ProjectReport]
	 WHERE Report_Id=@Report_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_ProjectReport_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-28 15:02:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_ProjectReport_Update]
@Report_Id int,
@Report_Name varchar(200),
@Report_Class int,
@Report_Sort int,
@Report_State int,
@Report_Shen int,
@Report_Order int,
@Report_UserID int
 AS 
	UPDATE [Tunnel_ProjectReport] SET 
	[Report_Name] = @Report_Name,[Report_Class] = @Report_Class,[Report_Sort] = @Report_Sort,[Report_State] = @Report_State,[Report_Shen] = @Report_Shen,[Report_Order] = @Report_Order,[Report_UserID] = @Report_UserID
	WHERE Report_Id=@Report_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_ProjectReport_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-28 15:02:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_ProjectReport_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([Report_Id])+1 FROM [Tunnel_ProjectReport]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_ProjectReport_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-28 15:02:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_ProjectReport_Exists]
@Report_Id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_ProjectReport] WHERE Report_Id=@Report_Id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_ProjectReport_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-28 15:02:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_ProjectReport_ADD]
@Report_Id int output,
@Report_Name varchar(200),
@Report_Class int,
@Report_Sort int,
@Report_State int,
@Report_Shen int,
@Report_Order int,
@Report_UserID int

 AS 
	INSERT INTO [Tunnel_ProjectReport](
	[Report_Name],[Report_Class],[Report_Sort],[Report_State],[Report_Shen],[Report_Order],[Report_UserID]
	)VALUES(
	@Report_Name,@Report_Class,@Report_Sort,@Report_State,@Report_Shen,@Report_Order,@Report_UserID
	)
	SET @Report_Id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_uyingshe_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_uyingshe_Update]
@uy_id int,
@uy_uid varchar(50),
@uy_list varchar(2000)
 AS 
	UPDATE [Tunnel_uyingshe] SET 
	[uy_uid] = @uy_uid,[uy_list] = @uy_list
	WHERE uy_id=@uy_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_uyingshe_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_uyingshe_ADD]
@uy_id int output,
@uy_uid varchar(50),
@uy_list varchar(2000)

 AS 
	INSERT INTO [Tunnel_uyingshe](
	[uy_uid],[uy_list]
	)VALUES(
	@uy_uid,@uy_list
	)
	SET @uy_id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_bum_ADDPoject]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_bum_ADDPoject]
@b_id bigint output,
@b_name varchar(100),
@b_hid int,
@b_depict varchar(1000),
@b_projectid int

 AS 
	INSERT INTO [Tunnel_bum](
	[b_name],[b_hid],[b_depict],[b_projectid]
	)VALUES(
	@b_name,@b_hid,@b_depict,@b_projectid
	)
	SET @b_id = @@IDENTITY

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_jiaose_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 14:58:07
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_jiaose_Update]
@j_id bigint,
@j_name varchar(1000),
@j_depict varchar(1000),
@j_flag varchar(2000),
@j_zdyjs int
 AS 
	UPDATE [Tunnel_jiaose] SET 
	[j_name] = @j_name,[j_depict] = @j_depict,[j_flag] = @j_flag,[j_zdyjs] = @j_zdyjs
	WHERE j_id=@j_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_jiaose_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 14:58:07
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_jiaose_ADD]
@j_id bigint output,
@j_name varchar(1000),
@j_depict varchar(1000),
@j_flag varchar(2000),
@j_zdyjs int

 AS 
	INSERT INTO [Tunnel_jiaose](
	[j_name],[j_depict],[j_flag],[j_zdyjs]
	)VALUES(
	@j_name,@j_depict,@j_flag,@j_zdyjs
	)
	SET @j_id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_byingshe_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:04
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_byingshe_Update]
@by_id int,
@by_bid varchar(50),
@by_list varchar(2000)
 AS 
	UPDATE [Tunnel_byingshe] SET 
	[by_bid] = @by_bid,[by_list] = @by_list
	WHERE by_id=@by_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_byingshe_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:04
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_byingshe_ADD]
@by_id int output,
@by_bid varchar(50),
@by_list varchar(2000)

 AS 
	INSERT INTO [Tunnel_byingshe](
	[by_bid],[by_list]
	)VALUES(
	@by_bid,@by_list
	)
	SET @by_id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_dyingshe_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:30
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_dyingshe_ADD]
@dy_id int output,
@dy_did varchar(50),
@dy_list varchar(2000)

 AS 
	INSERT INTO [Tunnel_dyingshe](
	[dy_did],[dy_list]
	)VALUES(
	@dy_did,@dy_list
	)
	SET @dy_id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_dyingshe_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-5 9:28:30
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_dyingshe_Update]
@dy_id int,
@dy_did varchar(50),
@dy_list varchar(2000)
 AS 
	UPDATE [Tunnel_dyingshe] SET 
	[dy_did] = @dy_did,[dy_list] = @dy_list
	WHERE dy_id=@dy_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_items_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-1-5 11:01:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_items_ADD]
@i_id int output,
@i_name varchar(50),
@year varchar(50),
@moon varchar(50)

 AS 
	INSERT INTO [Tunnel_items](
	[i_name],[year],[moon]
	)VALUES(
	@i_name,@year,@moon
	)
	SET @i_id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_items_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-1-5 11:01:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_items_Update]
@i_id int,
@i_name varchar(50),
@year varchar(50),
@moon varchar(50)
 AS 
	UPDATE [Tunnel_items] SET 
	[i_name] = @i_name,[year] = @year,[moon] = @moon
	WHERE i_id=@i_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_items_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-1-5 11:01:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_items_Exists]
@i_id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_items] WHERE i_id=@i_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_items_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2010-1-5 11:01:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_items_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([i_id])+1 FROM [Tunnel_items]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_items_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-1-5 11:01:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_items_GetList]
 AS 
	SELECT 
	i_id,i_name,year,moon
	 FROM [Tunnel_items]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_items_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-1-5 11:01:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_items_Delete]
@i_id int
 AS 
	DELETE [Tunnel_items]
	 WHERE i_id=@i_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_items_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-1-5 11:01:48
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_items_GetModel]
@i_id int
 AS 
	SELECT 
	i_id,i_name,year,moon
	 FROM [Tunnel_items]
	 WHERE i_id=@i_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Vote_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:01:51
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Vote_GetList]
 AS 
	SELECT 
	vote_Id,vote_userId,vote_userGroup,vote_bumGroup,vote_jsGroup,vote_Title,vote_mark,vote_Type,vote_startDate,vote_endDate,vote_seeType,vote_state,vote_max,vote_top
	 FROM [Tunnel_Vote]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Vote_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:01:51
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Vote_GetModel]
@vote_Id int
 AS 
	SELECT 
	vote_Id,vote_userId,vote_userGroup,vote_bumGroup,vote_jsGroup,vote_Title,vote_mark,vote_Type,vote_startDate,vote_endDate,vote_seeType,vote_state,vote_max,vote_top
	 FROM [Tunnel_Vote]
	 WHERE vote_Id=@vote_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Vote_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:01:51
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Vote_Delete]
@vote_Id int
 AS 
	DELETE [Tunnel_Vote]
	 WHERE vote_Id=@vote_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Vote_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:01:51
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Vote_Update]
@vote_Id int,
@vote_userId int,
@vote_userGroup varchar(3000),
@vote_bumGroup varchar(3000),
@vote_jsGroup varchar(3000),
@vote_Title varchar(3000),
@vote_mark varchar(3000),
@vote_Type int,
@vote_startDate datetime,
@vote_endDate datetime,
@vote_seeType int,
@vote_state int,
@vote_max int,
@vote_top int
 AS 
	UPDATE [Tunnel_Vote] SET 
	[vote_userId] = @vote_userId,[vote_userGroup] = @vote_userGroup,[vote_bumGroup] = @vote_bumGroup,[vote_jsGroup] = @vote_jsGroup,[vote_Title] = @vote_Title,[vote_mark] = @vote_mark,[vote_Type] = @vote_Type,[vote_startDate] = @vote_startDate,[vote_endDate] = @vote_endDate,[vote_seeType] = @vote_seeType,[vote_state] = @vote_state,[vote_max] = @vote_max,[vote_top] = @vote_top
	WHERE vote_Id=@vote_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Vote_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:01:51
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Vote_ADD]
@vote_Id int output,
@vote_userId int,
@vote_userGroup varchar(3000),
@vote_bumGroup varchar(3000),
@vote_jsGroup varchar(3000),
@vote_Title varchar(3000),
@vote_mark varchar(3000),
@vote_Type int,
@vote_startDate datetime,
@vote_endDate datetime,
@vote_seeType int,
@vote_state int,
@vote_max int,
@vote_top int

 AS 
	INSERT INTO [Tunnel_Vote](
	[vote_userId],[vote_userGroup],[vote_bumGroup],[vote_jsGroup],[vote_Title],[vote_mark],[vote_Type],[vote_startDate],[vote_endDate],[vote_seeType],[vote_state],[vote_max],[vote_top]
	)VALUES(
	@vote_userId,@vote_userGroup,@vote_bumGroup,@vote_jsGroup,@vote_Title,@vote_mark,@vote_Type,@vote_startDate,@vote_endDate,@vote_seeType,@vote_state,@vote_max,@vote_top
	)
	SET @vote_Id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Vote_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:01:51
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Vote_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([vote_Id])+1 FROM [Tunnel_Vote]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Vote_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:01:51
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Vote_Exists]
@vote_Id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_Vote] WHERE vote_Id=@vote_Id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Votei_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:02:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Votei_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([ivote_Id])+1 FROM [Tunnel_Votei]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Votei_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:02:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Votei_Exists]
@ivote_Id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_Votei] WHERE ivote_Id=@ivote_Id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Votei_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:02:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Votei_ADD]
@ivote_Id int output,
@ivote_Title varchar(3000),
@ivote_Count int,
@ivote_yesUserId varchar(3000),
@ivote_voteId int

 AS 
	INSERT INTO [Tunnel_Votei](
	[ivote_Title],[ivote_Count],[ivote_yesUserId],[ivote_voteId]
	)VALUES(
	@ivote_Title,@ivote_Count,@ivote_yesUserId,@ivote_voteId
	)
	SET @ivote_Id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Votei_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:02:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Votei_Update]
@ivote_Id int,
@ivote_Title varchar(3000),
@ivote_Count int,
@ivote_yesUserId varchar(3000),
@ivote_voteId int
 AS 
	UPDATE [Tunnel_Votei] SET 
	[ivote_Title] = @ivote_Title,[ivote_Count] = @ivote_Count,[ivote_yesUserId] = @ivote_yesUserId,[ivote_voteId] = @ivote_voteId
	WHERE ivote_Id=@ivote_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Votei_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:02:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Votei_Delete]
@ivote_Id int
 AS 
	DELETE [Tunnel_Votei]
	 WHERE ivote_Id=@ivote_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Votei_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:02:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Votei_GetModel]
@ivote_Id int
 AS 
	SELECT 
	ivote_Id,ivote_Title,ivote_Count,ivote_yesUserId,ivote_voteId
	 FROM [Tunnel_Votei]
	 WHERE ivote_Id=@ivote_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Votei_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:02:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Votei_GetList]
 AS 
	SELECT 
	ivote_Id,ivote_Title,ivote_Count,ivote_yesUserId,ivote_voteId
	 FROM [Tunnel_Votei]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_VoteRe_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:02:14
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_VoteRe_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([vote_Id])+1 FROM [Tunnel_VoteRe]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_VoteRe_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:02:14
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_VoteRe_Exists]
@vote_Id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_VoteRe] WHERE vote_Id=@vote_Id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_VoteRe_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:02:14
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_VoteRe_ADD]
@vote_Id int output,
@vote_Message varchar(3000),
@vate_Date datetime,
@vate_userId int,
@vate_voteId int

 AS 
	INSERT INTO [Tunnel_VoteRe](
	[vote_Message],[vate_Date],[vate_userId],[vate_voteId]
	)VALUES(
	@vote_Message,@vate_Date,@vate_userId,@vate_voteId
	)
	SET @vote_Id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_VoteRe_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:02:14
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_VoteRe_Update]
@vote_Id int,
@vote_Message varchar(3000),
@vate_Date datetime,
@vate_userId int,
@vate_voteId int
 AS 
	UPDATE [Tunnel_VoteRe] SET 
	[vote_Message] = @vote_Message,[vate_Date] = @vate_Date,[vate_userId] = @vate_userId,[vate_voteId] = @vate_voteId
	WHERE vote_Id=@vote_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_VoteRe_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:02:14
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_VoteRe_Delete]
@vote_Id int
 AS 
	DELETE [Tunnel_VoteRe]
	 WHERE vote_Id=@vote_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_VoteRe_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:02:14
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_VoteRe_GetModel]
@vote_Id int
 AS 
	SELECT 
	vote_Id,vote_Message,vate_Date,vate_userId,vate_voteId
	 FROM [Tunnel_VoteRe]
	 WHERE vote_Id=@vote_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_VoteRe_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-03-10 16:02:14
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_VoteRe_GetList]
 AS 
	SELECT 
	vote_Id,vote_Message,vate_Date,vate_userId,vate_voteId
	 FROM [Tunnel_VoteRe]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_work_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:21:49
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_work_GetModel]
@w_id int
 AS 
	SELECT 
	w_id,w_bumName,w_maxCent,w_workName
	 FROM [Tunnel_work]
	 WHERE w_id=@w_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_work_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:21:49
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_work_GetList]
 AS 
	SELECT 
	w_id,w_bumName,w_maxCent,w_workName
	 FROM [Tunnel_work]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_work_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:21:49
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_work_ADD]
@w_id int output,
@w_bumName varchar(50),
@w_maxCent int,
@w_workName varchar(50)

 AS 
	INSERT INTO [Tunnel_work](
	[w_bumName],[w_maxCent],[w_workName]
	)VALUES(
	@w_bumName,@w_maxCent,@w_workName
	)
	SET @w_id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_work_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:21:49
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_work_Exists]
@w_id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_work] WHERE w_id=@w_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_work_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:21:49
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_work_Update]
@w_id int,
@w_bumName varchar(50),
@w_maxCent int,
@w_workName varchar(50)
 AS 
	UPDATE [Tunnel_work] SET 
	[w_bumName] = @w_bumName,[w_maxCent] = @w_maxCent,[w_workName] = @w_workName
	WHERE w_id=@w_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_work_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:21:49
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_work_Delete]
@w_id int
 AS 
	DELETE [Tunnel_work]
	 WHERE w_id=@w_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_work_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:21:49
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_work_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([w_id])+1 FROM [Tunnel_work]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_exam_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-16 9:57:30
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_exam_GetList]
 AS 
	SELECT 
	e_id,e_gid,e_bid,e_time,e_user,e_endtime,e_nextbid,e_nextbuser
	 FROM [Tunnel_exam]


' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_exam_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-16 9:57:30
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_exam_GetModel]
@e_id bigint
 AS 
	SELECT 
	e_id,e_gid,e_bid,e_time,e_user,e_endtime,e_nextbid,e_nextbuser
	 FROM [Tunnel_exam]
	 WHERE e_id=@e_id 


' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_exam_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-16 9:57:30
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_exam_Update]
@e_id bigint,
@e_gid int,
@e_bid int,
@e_time datetime,
@e_user int,
@e_endtime datetime,
@e_nextbuser varchar(500),
@e_nextbid bigint
 AS 
	UPDATE [Tunnel_exam] SET 
	[e_gid] = @e_gid,[e_bid] = @e_bid,[e_time] = @e_time,[e_user] = @e_user,[e_endtime] = @e_endtime,[e_nextbid] = @e_nextbid,[e_nextbuser]=@e_nextbuser
	WHERE e_id=@e_id 


' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_exam_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-16 9:57:30
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_exam_ADD]
@e_id bigint output,
@e_gid int,
@e_bid int,
@e_time datetime,
@e_user int,
@e_endtime datetime,
@e_nextbuser varchar(500),
@e_nextbid bigint

 AS 
	INSERT INTO [Tunnel_exam](
	[e_gid],[e_bid],[e_time],[e_user],[e_endtime],[e_nextbid],[e_nextbuser]
	)VALUES(
	@e_gid,@e_bid,@e_time,@e_user,@e_endtime,@e_nextbid,@e_nextbuser
	)
	SET @e_id = @@IDENTITY


' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[pro_SelectleftLength]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'CREATE PROC [dbo].[pro_SelectleftLength]
(
	@regId	INT,
	@LineUpDown	INT,
	@LineShield	INT
)
AS
BEGIN
if exists (select * from sysobjects where id = OBJECT_ID(''#lineLength''))
BEGIN
	DROP TABLE #lineLength
END
CREATE TABLE #lineLength
(
	Line_Id INT,
    Line_Length DECIMAL(18,4),
    Line_Date DATETIME,
    Line_Pid INT,
    Line_State INT 
)

declare @linepid	INT

--创建游标
declare SerialNoJiFen cursor for 
SELECT  DISTINCT(Line_Pid) FROM Pross_LineLength WHERE Line_Pid IN(SELECT Line_Id FROM Pross_Line WHERE Pross_Line.Line_Reg=@regId AND Pross_Line.Line_UpDown=@LineUpDown AND Line_Shield=@LineShield)

--打开游标
open SerialNoJiFen

fetch NEXT FROM SerialNoJiFen INTO @linepid
while(@@fetch_status =0)
BEGIN
    -- 要执行的语句
	INSERT INTO #lineLength (Line_Id, Line_Length, Line_Date, Line_Pid, Line_State) SELECT TOP 1 Line_Id, Line_Length, Line_Date, Line_Pid, Line_State  FROM Pross_LineLength WHERE Line_Pid=@linepid AND Line_State=1 ORDER BY Line_Id DESC 

	--继续循环
	fetch next from SerialNoJiFen into @linepid

END
--关闭游标
close SerialNoJiFen
--删除游标
deallocate SerialNoJiFen

SELECT * FROM #lineLength ORDER BY Line_Date DESC 

END' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[pro_SelectLength]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'CREATE PROC [dbo].[pro_SelectLength]
(
	@regId	INT,
	@LineUpDown	INT,
	@LineShield	INT
)
AS
BEGIN
if exists (select * from sysobjects where id = OBJECT_ID(''#lineLength''))
BEGIN
	DROP TABLE #lineLength
END
CREATE TABLE #lineLength
(
	Line_Id INT,
    Line_Length DECIMAL(18,4),
    Line_Date DATETIME,
    Line_Pid INT,
    Line_State INT 
)

declare @linepid	INT

--创建游标
declare SerialNoJiFen cursor for 
SELECT  DISTINCT(Line_Pid) FROM Pross_LineLength WHERE Line_Pid IN(SELECT Line_Id FROM Pross_Line WHERE Pross_Line.Line_Reg=@regId AND Pross_Line.Line_UpDown=@LineUpDown AND Line_Shield=@LineShield)

--打开游标
open SerialNoJiFen

fetch NEXT FROM SerialNoJiFen INTO @linepid
while(@@fetch_status =0)
BEGIN
    -- 要执行的语句
	INSERT INTO #lineLength (Line_Id, Line_Length, Line_Date, Line_Pid, Line_State) SELECT TOP 1 Line_Id, Line_Length, Line_Date, Line_Pid, Line_State  FROM Pross_LineLength WHERE Line_Pid=@linepid AND Line_State=1 ORDER BY Line_Id DESC 

	--继续循环
	fetch next from SerialNoJiFen into @linepid

END
--关闭游标
close SerialNoJiFen
--删除游标
deallocate SerialNoJiFen

SELECT * FROM #lineLength ORDER BY Line_Date

END' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_Line_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 17:47:34
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_Line_GetList]
 AS 
	SELECT 
	Line_Id,Line_sId,Line_eId,Line_Reg,Line_UpDown
	 FROM [Pross_Line]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_Line_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 17:47:34
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_Line_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([Line_Id])+1 FROM [Pross_Line]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_Line_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 17:47:34
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_Line_Delete]
@Line_Id int
 AS 
	DELETE [Pross_Line]
	 WHERE Line_Id=@Line_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_Line_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 17:47:34
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_Line_Update]
@Line_Id int,
@Line_sId int,
@Line_eId int,
@Line_Reg int,
@Line_UpDown int
 AS 
	UPDATE [Pross_Line] SET 
	[Line_sId] = @Line_sId,[Line_eId] = @Line_eId,[Line_Reg] = @Line_Reg,[Line_UpDown] = @Line_UpDown
	WHERE Line_Id=@Line_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_Line_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 17:47:34
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_Line_Exists]
@Line_Id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Pross_Line] WHERE Line_Id=@Line_Id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_Line_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 17:47:34
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_Line_ADD]
@Line_Id int output,
@Line_sId int,
@Line_eId int,
@Line_Reg int,
@Line_UpDown int

 AS 
	INSERT INTO [Pross_Line](
	[Line_sId],[Line_eId],[Line_Reg],[Line_UpDown]
	)VALUES(
	@Line_sId,@Line_eId,@Line_Reg,@Line_UpDown
	)
	SET @Line_Id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_Line_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-9 17:47:34
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_Line_GetModel]
@Line_Id int
 AS 
	SELECT 
	Line_Id,Line_sId,Line_eId,Line_Reg,Line_UpDown
	 FROM [Pross_Line]
	 WHERE Line_Id=@Line_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[pro_selectAirshaft]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'CREATE PROC [dbo].[pro_selectAirshaft]
(
	@regid INT,
	@topdown INT
)
AS
BEGIN
	
SELECT item_id FROM Porss_RegionItem pri WHERE pri.Item_RegId=@regid AND pri.Item_Class=2
 AND (pri.Item_Id IN (SELECT Line_sId FROM Pross_Line WHERE Pross_Line.Line_Reg=@regid AND Pross_Line.Line_UpDown=@topdown)
 OR pri.Item_Id IN (SELECT Line_eId FROM Pross_Line WHERE Pross_Line.Line_Reg=@regid AND Pross_Line.Line_UpDown=@topdown)
 )	
 
END' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Cfile_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-5-21 15:10:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Cfile_GetList]
 AS 
	SELECT 
	f_id,f_title,f_type,f_content,f_file,f_first,f_other,f_date,f_user
	 FROM [Tunnel_Cfile]
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Cfile_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-5-21 15:10:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Cfile_GetModel]
@f_id bigint
 AS 
	SELECT 
	f_id,f_title,f_type,f_content,f_file,f_first,f_other,f_date,f_user
	 FROM [Tunnel_Cfile]
	 WHERE f_id=@f_id
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Cfile_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-5-21 15:10:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Cfile_Delete]
@f_id bigint
 AS 
	DELETE [Tunnel_Cfile]
	 WHERE f_id=@f_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Cfile_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-5-21 15:10:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Cfile_Exists]
@f_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_Cfile] WHERE f_id=@f_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Cfile_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-5-21 15:10:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Cfile_Update]
@f_id bigint,
@f_title varchar(200),
@f_type int,
@f_content text,
@f_file varchar(100),
@f_first bigint,
@f_other varchar(500),
@f_date datetime
 AS 
	UPDATE [Tunnel_Cfile] SET 
	[f_title] = @f_title,[f_type] = @f_type,[f_content] = @f_content,[f_file] = @f_file,[f_first] = @f_first,[f_other] = @f_other,[f_date] = @f_date
	WHERE f_id=@f_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Cfile_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-5-21 15:10:12
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Cfile_ADD]
@f_id bigint output,
@f_title varchar(200),
@f_type int,
@f_content text,
@f_file varchar(100),
@f_first bigint,
@f_other varchar(500),
@f_date datetime,
@f_user bigint

 AS 
	INSERT INTO [Tunnel_Cfile](
	[f_title],[f_type],[f_content],[f_file],[f_first],[f_other],[f_date],[f_user]
	)VALUES(
	@f_title,@f_type,@f_content,@f_file,@f_first,@f_other,@f_date,@f_user
	)
	SET @f_id = @@IDENTITY


' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_CView_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-5-21 15:10:03
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_CView_GetList]
 AS 
	SELECT 
	c_id,c_fid,c_uid,c_read,c_readdate,c_content
	 FROM [Tunnel_CView]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_CView_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-5-21 15:10:03
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_CView_GetModel]
@c_id bigint
 AS 
	SELECT 
	c_id,c_fid,c_uid,c_read,c_readdate,c_content
	 FROM [Tunnel_CView]
	 WHERE c_id=@c_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_CView_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-5-21 15:10:03
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_CView_Update]
@c_fid bigint,
@c_uid bigint,
@c_read int,
@c_readdate datetime,
@c_content text
 AS 
	UPDATE [Tunnel_CView] SET 
	[c_read] = @c_read,[c_readdate] = @c_readdate,[c_content] = @c_content
	WHERE c_fid =@c_fid and c_uid = @c_uid

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_CView_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-5-21 15:10:03
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_CView_ADD]
@c_id bigint output,
@c_fid bigint,
@c_uid bigint,
@c_read int,
@c_content text

 AS 
	INSERT INTO [Tunnel_CView](
	[c_fid],[c_uid],[c_read],[c_content]
	)VALUES(
	@c_fid,@c_uid,@c_read,@c_content
	)
	SET @c_id = @@IDENTITY
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_CView_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-5-21 15:10:03
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_CView_Delete]
@c_id bigint
 AS 
	DELETE [Tunnel_CView]
	 WHERE c_fid=@c_id
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_CView_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-5-21 15:10:03
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_CView_Exists]
@c_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_CView] WHERE c_id=@c_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_grade_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:22:19
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_grade_ADD]
@g_id int output,
@g_workId int,
@g_checkId int,
@g_cent float

 AS 
	INSERT INTO [Tunnel_grade](
	[g_workId],[g_checkId],[g_cent]
	)VALUES(
	@g_workId,@g_checkId,@g_cent
	)
	SET @g_id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_grade_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:22:19
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_grade_Update]
@g_id int,
@g_workId int,
@g_checkId int,
@g_cent float
 AS 
	UPDATE [Tunnel_grade] SET 
	[g_workId] = @g_workId,[g_checkId] = @g_checkId,[g_cent] = @g_cent
	WHERE g_id=@g_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_mail_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_mail_GetModel]
@m_id bigint
 AS 
	SELECT 
	m_id,m_title,m_content,m_from,m_to,m_file,m_time,m_sort,m_state,m_main
	 FROM [Tunnel_mail]
	 WHERE m_id=@m_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_information_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'


------------------------------------
--用途：查询公告或新闻 
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_information_GetList]
AS 
Begin
	SELECT i_id,i_title,i_sort,i_user,i_time,i_hit,i_content,i_files,i_audituser,i_auditmark,i_audittime FROM [Tunnel_information] where i_del=0
End	




' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_check_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:22:29
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_check_ADD]
@c_id int output,
@c_userId int,
@c_itemsId int,
@c_score int,
@c_income varchar(50),
@c_date varchar(50)

 AS 
	INSERT INTO [Tunnel_check](
	[c_userId],[c_itemsId],[c_score],[c_income],[c_date]
	)VALUES(
	@c_userId,@c_itemsId,@c_score,@c_income,@c_date
	)
	SET @c_id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_check_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-11 13:22:29
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_check_Update]
@c_id int,
@c_userId int,
@c_itemsId int,
@c_score int,
@c_income varchar(50),
@c_date varchar(50)
 AS 
	UPDATE [Tunnel_check] SET 
	[c_userId] = @c_userId,[c_itemsId] = @c_itemsId,[c_score] = @c_score,[c_income] = @c_income,[c_date] = @c_date
	WHERE c_id=@c_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iRTblVersions]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iRTblVersions] @IntID  binary(8),     @Z_BranchID_Z int,     @Z_VS_Z  int,     @TypeID  binary(8),     @VerIntID binary(8),     @Z_VState_Z smallint,     @Z_PredFlags_Z smallint,    @Z_SuccInc_Z smallint,    @Z_LClock_Z  int,    @Z_PredBrID_Z int = -2147483648, @Z_PredVer_Z int = -2147483648as insert RTblVersions values (@IntID, @Z_BranchID_Z, @Z_VS_Z, @Z_PredBrID_Z, @Z_PredVer_Z, @TypeID,   @VerIntID, @Z_VState_Z, @Z_PredFlags_Z, @Z_SuccInc_Z, @Z_LClock_Z)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_formtype_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-3 13:07:16
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_formtype_GetList]
 AS 
	SELECT 
	Form_id,Form_name,Item_max
	 FROM [Tunnel_formtype]

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_formtype_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-3 13:07:16
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_formtype_Delete]
@Form_id int
 AS 
	DELETE [Tunnel_formtype]
	 WHERE Form_id=@Form_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_formtype_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-3 13:07:16
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_formtype_GetModel]
@Form_id int
 AS 
	SELECT 
	Form_id,Form_name,Item_max
	 FROM [Tunnel_formtype]
	 WHERE @Form_id =@Form_id

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_formtype_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-3 13:07:16
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_formtype_Update]
@Form_id int,
@Form_name varchar(100),
@Item_max int
 AS 
	UPDATE [Tunnel_formtype] SET 
	[Form_name] = @Form_name,[Item_max] = @Item_max
	WHERE Form_id=@Form_id

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_formtype_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-3 13:07:16
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_formtype_ADD]
@Form_id int,
@Form_name varchar(100),
@Item_max int

 AS 
	INSERT INTO [Tunnel_formtype](
	[Form_id],[Form_name],[Item_max]
	)VALUES(
	@Form_id,@Form_name,@Item_max
	)

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_ProJectMent_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-24 9:53:53
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_ProJectMent_GetList]
 AS 
	SELECT 
	Pro_Id,Pro_Title,Pro_Name,Pro_StartDate,Pro_EndDate,Pro_ManDate,Pro_ManEndDate,Pro_ContractDate,Pro_ContractEndDate,Pro_EquipmentDate,Pro_EquipmentEndDate,Pro_MaterialDate,Pro_MaterialEndDate,Pro_PlanDate,Pro_PlanEndDate,Pro_SecurityDate,Pro_SecurityEndDate,Pro_Status,Pro_Manager
	 FROM [Tunnel_ProJectMent]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_ProJectMent_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-24 9:53:53
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_ProJectMent_GetModel]
@Pro_Id bigint
 AS 
	SELECT 
	Pro_Id,Pro_Title,Pro_Name,Pro_StartDate,Pro_EndDate,Pro_ManDate,Pro_ManEndDate,Pro_ContractDate,Pro_ContractEndDate,Pro_EquipmentDate,Pro_EquipmentEndDate,Pro_MaterialDate,Pro_MaterialEndDate,Pro_PlanDate,Pro_PlanEndDate,Pro_SecurityDate,Pro_SecurityEndDate,Pro_Status,Pro_Manager
	 FROM [Tunnel_ProJectMent]
	 WHERE Pro_Id=@Pro_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_ProJectMent_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-24 9:53:53
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_ProJectMent_Delete]
@Pro_Id bigint
 AS 
	DELETE [Tunnel_ProJectMent]
	 WHERE Pro_Id=@Pro_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_ProJectMent_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-24 9:53:53
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_ProJectMent_Update]
@Pro_Id bigint,
@Pro_Title varchar(200),
@Pro_Name varchar(100),
@Pro_StartDate datetime,
@Pro_EndDate datetime,
@Pro_ManDate datetime,
@Pro_ManEndDate datetime,
@Pro_ContractDate datetime,
@Pro_ContractEndDate datetime,
@Pro_EquipmentDate datetime,
@Pro_EquipmentEndDate datetime,
@Pro_MaterialDate datetime,
@Pro_MaterialEndDate datetime,
@Pro_PlanDate datetime,
@Pro_PlanEndDate datetime,
@Pro_SecurityDate datetime,
@Pro_SecurityEndDate datetime,
@Pro_Status int,
@Pro_Manager bigint
 AS 
	UPDATE [Tunnel_ProJectMent] SET 
	[Pro_Title] = @Pro_Title,[Pro_Name] = @Pro_Name,[Pro_StartDate] = @Pro_StartDate,[Pro_EndDate] = @Pro_EndDate,[Pro_ManDate] = @Pro_ManDate,[Pro_ManEndDate] = @Pro_ManEndDate,[Pro_ContractDate] = @Pro_ContractDate,[Pro_ContractEndDate] = @Pro_ContractEndDate,[Pro_EquipmentDate] = @Pro_EquipmentDate,[Pro_EquipmentEndDate] = @Pro_EquipmentEndDate,[Pro_MaterialDate] = @Pro_MaterialDate,[Pro_MaterialEndDate] = @Pro_MaterialEndDate,[Pro_PlanDate] = @Pro_PlanDate,[Pro_PlanEndDate] = @Pro_PlanEndDate,[Pro_SecurityDate] = @Pro_SecurityDate,[Pro_SecurityEndDate] = @Pro_SecurityEndDate,[Pro_Status] = @Pro_Status,[Pro_Manager] = @Pro_Manager
	WHERE Pro_Id=@Pro_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_ProJectMent_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-24 9:53:53
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_ProJectMent_ADD]
@Pro_Id bigint output,
@Pro_Title varchar(200),
@Pro_Name varchar(100),
@Pro_StartDate datetime,
@Pro_ManDate datetime,
@Pro_ContractDate datetime,
@Pro_EquipmentDate datetime,
@Pro_MaterialDate datetime,
@Pro_PlanDate datetime,
@Pro_SecurityDate datetime,
@Pro_Status int,
@Pro_Manager bigint

 AS 
	INSERT INTO [Tunnel_ProJectMent](
	[Pro_Title],[Pro_Name],[Pro_StartDate],[Pro_ManDate],[Pro_ContractDate],[Pro_EquipmentDate],[Pro_MaterialDate],[Pro_PlanDate],[Pro_SecurityDate],[Pro_Status],[Pro_Manager]
	)VALUES(
	@Pro_Title,@Pro_Name,@Pro_StartDate,@Pro_ManDate,@Pro_ContractDate,@Pro_EquipmentDate,@Pro_MaterialDate,@Pro_PlanDate,@Pro_SecurityDate,@Pro_Status,@Pro_Manager
	)
	SET @Pro_Id = @@IDENTITY
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_ProJectMent_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-24 9:53:53
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_ProJectMent_Exists]
@Pro_Id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_ProJectMent] WHERE Pro_Id=@Pro_Id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iRTblRelships]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iRTblRelships] @OrgID   binary(8),    @Z_OrgBrID_Z int,     @Z_OrgVS_Z  int,    @Z_OrgLClock_Z int,    @DstID   binary(8),    @Z_DstBrID_Z int,     @Z_DstVS_Z  int,    @Z_DstVE_Z  int,    @Z_DstLClock_Z int,    @OrgTypeID  binary(8),    @RelTypeID  binary(8),    @DstTypeID  binary(8),    @DstName  varchar(200),   @DstNameLong text,   @Z_RelFlags_Z smallint,    @PrevDstID  binary(8) = NULL,   @Z_OrgVE_Z  int = 2147483647 as declare @iRows int      select @iRows = 1 insert RTblRelships values (@OrgID, @Z_OrgBrID_Z, @Z_OrgVS_Z, @Z_OrgVE_Z, @Z_OrgLClock_Z, @DstID,   @Z_DstBrID_Z, @Z_DstVS_Z, @Z_DstVE_Z, @Z_DstLClock_Z, @OrgTypeID,   @RelTypeID, @DstTypeID, @PrevDstID, @DstName, @DstNameLong, @Z_RelFlags_Z) if (@Z_OrgVS_Z > 0) begin  select @iRows = count(OrgID) from RTblRelships where   OrgID = @OrgID and Z_OrgBrID_Z = @Z_OrgBrID_Z and Z_OrgVS_Z <= @Z_OrgVS_Z   and Z_OrgVE_Z >= @Z_OrgVS_Z and RelTypeID = @RelTypeID and DstID = @DstID    and Z_DstBrID_Z = @Z_DstBrID_Z and Z_DstVS_Z = @Z_DstVS_Z and    Z_RelFlags_Z = @Z_RelFlags_Z  if (@iRows > 1)   delete from RTblRelships where     OrgID = @OrgID and Z_OrgBrID_Z = @Z_OrgBrID_Z and Z_OrgVS_Z = @Z_OrgVS_Z    and RelTypeID = @RelTypeID and DstID = @DstID     and Z_DstBrID_Z = @Z_DstBrID_Z and Z_DstVS_Z = @Z_DstVS_Z and     Z_RelFlags_Z = @Z_RelFlags_Z end select @iRows' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iRTblSites]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iRTblSites] @SiteID  int,     @SiteGuid binary(16)     as  insert RTblSites values (@SiteID, @SiteGuid)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iRTblProps]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iRTblProps] @IntID  binary(8),     @PropID  binary(8),     @PropValue varchar(220)   as insert RTblProps values (@IntID, @PropID, @PropValue)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iRTblRelshipProps]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iRTblRelshipProps] @OrgID  binary(8),     @RelTypeID binary(8),     @DstID  binary(8),     @PropID  binary(8),     @PropValue varchar(220)    as insert RTblRelshipProps values (@OrgID, @RelTypeID, @DstID, @PropID, @PropValue)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_Region_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-8 10:49:26
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_Region_GetModel]
@Reg_Id int
 AS 
	SELECT 
	Reg_Id,Reg_ProId,Reg_Start,Reg_End,Reg_Length,Reg_Status
	 FROM [Pross_Region]
	 WHERE Reg_Id=@Reg_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_Region_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-8 10:49:26
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_Region_GetList]
 AS 
	SELECT 
	Reg_Id,Reg_ProId,Reg_Start,Reg_End,Reg_Length,Reg_Status
	 FROM [Pross_Region]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_Region_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-8 10:49:26
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_Region_Delete]
@Reg_Id int
 AS 
	DELETE [Pross_Region]
	 WHERE Reg_Id=@Reg_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_Region_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-8 10:49:26
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_Region_Update]
@Reg_Id int,
@Reg_ProId int,
@Reg_Start varchar(200),
@Reg_End varchar(200),
@Reg_Length int,
@Reg_Status int
 AS 
	UPDATE [Pross_Region] SET 
	[Reg_ProId] = @Reg_ProId,[Reg_Start] = @Reg_Start,[Reg_End] = @Reg_End,[Reg_Length] = @Reg_Length,[Reg_Status] = @Reg_Status
	WHERE Reg_Id=@Reg_Id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_Region_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-8 10:49:26
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_Region_ADD]
@Reg_Id int output,
@Reg_ProId int,
@Reg_Start varchar(200),
@Reg_End varchar(200),
@Reg_Length int,
@Reg_Status int

 AS 
	INSERT INTO [Pross_Region](
	[Reg_ProId],[Reg_Start],[Reg_End],[Reg_Length],[Reg_Status]
	)VALUES(
	@Reg_ProId,@Reg_Start,@Reg_End,@Reg_Length,@Reg_Status
	)
	SET @Reg_Id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_Region_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-8 10:49:26
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_Region_Exists]
@Reg_Id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Pross_Region] WHERE Reg_Id=@Reg_Id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Pross_Region_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2010-6-8 10:49:26
------------------------------------
CREATE PROCEDURE [dbo].[UP_Pross_Region_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([Reg_Id])+1 FROM [Pross_Region]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iRTblPropDefs]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iRTblPropDefs] @IntID   binary(8),    @Z_BranchID_Z int,     @Z_VS_Z   int,    @SQLColName  varchar(32),    @APIType  smallint,   @SQLType  smallint,    @SQLSize  smallint,     @SQLScale  smallint,    @Flags   smallint,    @Z_VE_Z   int = 2147483647 as insert RTblPropDefs values (@IntID, @Z_BranchID_Z, @Z_VS_Z, @Z_VE_Z, @SQLColName, @APIType, @SQLType,  @SQLSize, @SQLScale, @Flags)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_duty_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_duty_ADD]
@d_id bigint output,
@d_name varchar(100),
@d_depict varchar(1000),
@d_flag varchar(2000)

 AS 
	INSERT INTO [Tunnel_duty](
	[d_name],[d_depict],[d_flag]
	)VALUES(
	@d_name,@d_depict,@d_flag
	)
	SET @d_id = @@IDENTITY

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_duty_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_duty_Update]
@d_id bigint,
@d_name varchar(100),
@d_depict varchar(1000),
@d_flag varchar(2000)
 AS 
	UPDATE [Tunnel_duty] SET 
	[d_name] = @d_name,[d_depict] = @d_depict,[d_flag] = @d_flag
	WHERE d_id=@d_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_duty_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_duty_Exists]
@d_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_duty] WHERE d_id=@d_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_duty_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_duty_Delete]
@d_id bigint
 AS 
	DELETE [Tunnel_duty]
	 WHERE d_id=@d_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_duty_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_duty_GetModel]
@d_id bigint
 AS 
	SELECT 
	d_id,d_name,d_depict,d_flag
	 FROM [Tunnel_duty]
	 WHERE d_id=@d_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_duty_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_duty_GetList]
 AS 
	SELECT 
	d_id,d_name,d_depict,d_flag
	 FROM [Tunnel_duty]

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iRTblRelColDefs]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iRTblRelColDefs] @IntID   binary(8),    @Z_BranchID_Z int,     @Z_VS_Z   int,    @RelTypeID  binary(8),    @Flags   smallint,    @MinCount  smallint,    @MaxCount  smallint,    @IsOrigin  bit,    @Z_VE_Z   int = 2147483647 as insert RTblRelColDefs values (@IntID, @Z_BranchID_Z, @Z_VS_Z, @Z_VE_Z, @RelTypeID,   @Flags, @MinCount, @MaxCount, @IsOrigin)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iRTblIfaceDefs]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iRTblIfaceDefs] @IntID   binary(8),    @Z_BranchID_Z int,     @Z_VS_Z   int,    @InterfaceID binary(16),     @SQLTableName varchar(32),   @Flags   smallint,    @Z_VE_Z   int = 2147483647 as insert RTblIfaceDefs values (@IntID, @Z_BranchID_Z, @Z_VS_Z, @Z_VE_Z, @InterfaceID, @SQLTableName,   @Flags)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_quanxian_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 15:00:49
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_quanxian_ADD]
@q_id int output,
@q_name varchar(50),
@q_mark varchar(200),@q_rId int 

 AS 
	INSERT INTO [Tunnel_quanxian](
	[q_name],[q_mark],q_rId
	)VALUES(
	@q_name,@q_mark,@q_rId
	)
	SET @q_id = @@IDENTITY


' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_quanxian_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 15:00:49
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_quanxian_GetList]
 AS 
	SELECT 
	*
	 FROM [Tunnel_quanxian]


' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_quanxian_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 15:00:49
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_quanxian_GetModel]
@q_id int
 AS 
	SELECT 
	*
	 FROM [Tunnel_quanxian]
	 WHERE q_id=@q_id 


' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_quanxian_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 15:00:49
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_quanxian_Update]
@q_id int,
@q_name varchar(50),
@q_mark varchar(200),
@q_rId int
 AS 
	UPDATE [Tunnel_quanxian] SET 
	[q_name] = @q_name,[q_mark] = @q_mark,q_rId=@q_rId
	WHERE q_id=@q_id 


' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_flow_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_flow_Exists]
@f_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_flow] WHERE f_id=@f_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_flow_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_flow_ADD]
@f_id bigint output,
@f_name varchar(200),
@f_bum int,
@f_form int,
@f_isfile int,
@f_depict varchar(1000),
@f_sort int,
@f_stype int,
@f_state int

 AS 
	INSERT INTO [Tunnel_flow](
	[f_name],[f_bum],[f_form],[f_isfile],[f_depict],[f_sort],[f_stype],[f_state]
	)VALUES(
	@f_name,@f_bum,@f_form,@f_isfile,@f_depict,@f_sort,@f_stype,@f_state
	)
	SET @f_id = @@IDENTITY

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_flowclass_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_flowclass_Delete]
@fc_id bigint
 AS 
	DELETE [Tunnel_flowclass]
	 WHERE fc_id=@fc_id 
	DELETE [Tunnel_flow]
	 WHERE f_sort=@fc_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_flow_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_flow_GetModel]
@f_id bigint
 AS 
	SELECT 
	f_id,f_name,f_bum,f_form,f_isfile,f_depict,f_sort,f_stype,f_state
	 FROM [Tunnel_flow]
	 WHERE f_id=@f_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_flow_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_flow_GetList]
 @f_sort int
 AS 
	SELECT 
	f_id,f_name,f_bum,f_form,f_isfile,f_depict,f_sort,f_stype,f_state
	 FROM [Tunnel_flow] Where f_id=@f_sort OR f_sort=@f_sort
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_flow_OfenUsed]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_flow_OfenUsed]
 AS 
	SELECT top 20 
	f_id,f_name,f_bum,f_form,f_isfile,f_depict,f_sort,f_stype,f_state,f_lastutime
	 FROM [Tunnel_flow] Where f_lastutime<>'''' order by f_lastutime desc' 
END
GO
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_flow_ofenUpdate]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_flow_ofenUpdate]
@f_id bigint,
@f_lastutime datetime
 AS 
	UPDATE [Tunnel_flow] SET 
	[f_lastutime] = @f_lastutime
	WHERE f_id=@f_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_flow_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_flow_Delete]
@f_id bigint
 AS 
	DELETE [Tunnel_flow]
	 WHERE f_id=@f_id 
	Delete [Tunnel_step]
	 WHERE s_lid=@f_id
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_flow_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:45
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_flow_Update]
@f_id bigint,
@f_name varchar(200),
@f_bum int,
@f_form int,
@f_isfile int,
@f_depict varchar(1000),
@f_sort int,
@f_stype int,
@f_state int
 AS 
	UPDATE [Tunnel_flow] SET 
	[f_name] = @f_name,[f_bum] = @f_bum,[f_form] = @f_form,[f_isfile] = @f_isfile,[f_depict] = @f_depict,[f_sort] = @f_sort,[f_stype]=@f_stype,[f_state]=@f_state
	WHERE f_id=@f_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iRTblClassDefs]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iRTblClassDefs] @IntID   binary(8),    @Z_BranchID_Z int,     @Z_VS_Z   int,    @ClassID  binary(16),     @VerPropDescs image,   @PropDescs  image=NULL,  @Z_VE_Z   int = 2147483647 as insert RTblClassDefs values (@IntID, @Z_BranchID_Z, @Z_VS_Z, @Z_VE_Z, @ClassID, @VerPropDescs, @PropDescs)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_flowclass_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
------------------------------------
--用途：修改一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_flowclass_Update]
@fc_id bigint,
@fc_name varchar(100),
@fc_desin varchar(500)
 AS 
	UPDATE [Tunnel_flowclass] SET 
	[fc_name] = @fc_name,[fc_desin]=@fc_desin
	WHERE fc_id=@fc_id 


' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_flowclass_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'

------------------------------------
--用途：增加一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_flowclass_ADD]
@fc_id bigint output,
@fc_name varchar(100),
@fc_desin varchar(500)

 AS 
	INSERT INTO [Tunnel_flowclass](
	[fc_name],[fc_desin]
	)VALUES(
	@fc_name,@fc_desin
	)
	SET @fc_id = @@IDENTITY



' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_flowclass_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_flowclass_Exists]
@fc_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_flowclass] WHERE fc_id=@fc_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_flowclass_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_flowclass_GetModel]
@fc_id bigint
 AS 
	SELECT 
	fc_id,fc_name,fc_desin
	 FROM [Tunnel_flowclass]
	 WHERE fc_id=@fc_id 


' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_flowclass_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
------------------------------------
--用途：查询记录信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_flowclass_GetList]
 AS 
	SELECT 
	fc_id,fc_name,fc_desin
	 FROM [Tunnel_flowclass]


' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iRTblTypeLibs]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iRTblTypeLibs] @IntID   binary(8),    @Z_BranchID_Z int,     @Z_VS_Z   int,    @TypeLibID  binary(16),     @Z_VE_Z   int = 2147483647 as insert RTblTypeLibs values (@IntID, @Z_BranchID_Z, @Z_VS_Z, @Z_VE_Z, @TypeLibID) ' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_form_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_form_Delete]
@f_id bigint
 AS 
	DELETE [Tunnel_form]
	 WHERE f_id=@f_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_form_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_form_GetModel]
@f_id bigint
 AS 
	SELECT 
	f_id,f_name,f_bum,f_lcid,f_user,f_date,f_content
	 FROM [Tunnel_form]
	 WHERE f_id=@f_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_form_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_form_Update]
@f_id bigint,
@f_content text
 AS 
	UPDATE [Tunnel_form] SET 
	[f_content] = @f_content
	WHERE f_id=@f_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_form_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_form_ADD]
@f_id bigint output,
@f_name varchar(100),
@f_bum int,
@f_lcid int,
@f_user int,
@f_date datetime,
@f_content text

 AS 
	INSERT INTO [Tunnel_form](
	[f_name],[f_bum],[f_lcid],[f_user],[f_date],[f_content]
	)VALUES(
	@f_name,@f_bum,@f_lcid,@f_user,@f_date,@f_content
	)
	SET @f_id = @@IDENTITY

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_form_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_form_Exists]
@f_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_form] WHERE f_id=@f_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_form_Update_Name]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'--用途：修改一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_form_Update_Name]
@f_id bigint,
@f_name varchar(100),
@f_bum int,
@f_lcid int
 AS 
	UPDATE [Tunnel_form] SET 
	[f_name] = @f_name,[f_bum] = @f_bum,[f_lcid] = @f_lcid WHERE f_id=@f_id ' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_form_Name_add]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_form_Name_add]
@f_id bigint output,
@f_name varchar(100),
@f_bum int,
@f_lcid int,
@f_user int,
@f_date datetime

 AS 
	INSERT INTO [Tunnel_form](
	[f_name],[f_bum],[f_lcid],[f_user],[f_date]
	)VALUES(
	@f_name,@f_bum,@f_lcid,@f_user,@f_date)
	SET @f_id = @@IDENTITY

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_form_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_form_GetList]
	@f_lcid int
 AS 
	SELECT 
	f_id,f_name,f_bum,f_lcid,f_user,f_date,f_content
	 FROM [Tunnel_form]	WHERE f_lcid=@f_lcid order by f_date desc

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iRTblIfaceMem]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iRTblIfaceMem] @IntID   binary(8),    @Z_BranchID_Z int,     @Z_VS_Z   int,    @DispID   int,    @Flags   smallint,    @Z_VE_Z   int = 2147483647 as insert RTblIfaceMem values (@IntID, @Z_BranchID_Z, @Z_VS_Z, @Z_VE_Z, @DispID, @Flags)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iRTblWorkspaceItems]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iRTblWorkspaceItems] @IntID   binary(8),    @Z_BranchID_Z int,     @Z_VS_Z   int,    @Z_ItemIntID_Z binary(8),    @Z_ItemBranchID_Z int,    @Z_ItemVS_Z  int,    @Z_ItemFlag_Z smallint,    @Z_VE_Z   int = 2147483647 as insert RTblWorkspaceItems values (@IntID, @Z_BranchID_Z, @Z_VS_Z, @Z_VE_Z, @Z_ItemIntID_Z, @Z_ItemBranchID_Z,  @Z_ItemVS_Z, @Z_ItemFlag_Z)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_kaoqin_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-23 16:46:53
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_kaoqin_GetList]
 AS 
	SELECT 
	k_id,k_date,k_amtime,k_pmtime,k_endtime,k_user,k_ifsb
	 FROM [Tunnel_kaoqin]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_kaoqin_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-23 16:46:53
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_kaoqin_GetModel]
@k_id bigint
 AS 
	SELECT 
	k_id,k_date,k_amtime,k_pmtime,k_endtime,k_user,k_ifsb
	 FROM [Tunnel_kaoqin]
	 WHERE k_id=@k_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_kaoqin_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-23 16:46:53
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_kaoqin_Delete]
@k_id bigint
 AS 
	DELETE [Tunnel_kaoqin]
	 WHERE k_id=@k_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_kaoqin_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-23 16:46:53
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_kaoqin_Update]
@k_id bigint,
@k_date datetime,
@k_amtime varchar(50),
@k_pmtime varchar(50),
@k_endtime varchar(50),
@k_user int,
@k_ifsb int
 AS 
	UPDATE [Tunnel_kaoqin] SET 
	[k_date] = @k_date,[k_amtime] = @k_amtime,[k_pmtime] = @k_pmtime,[k_endtime] = @k_endtime,[k_user] = @k_user,[k_ifsb] = @k_ifsb
	WHERE k_id=@k_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_kaoqin_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-23 16:46:53
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_kaoqin_ADD]
@k_id bigint output,
@k_date datetime,
@k_amtime varchar(50),
@k_pmtime varchar(50),
@k_endtime varchar(50),
@k_user int,
@k_ifsb int

 AS 
	INSERT INTO [Tunnel_kaoqin](
	[k_date],[k_amtime],[k_pmtime],[k_endtime],[k_user],[k_ifsb]
	)VALUES(
	@k_date,@k_amtime,@k_pmtime,@k_endtime,@k_user,@k_ifsb
	)
	SET @k_id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_kaoqin_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-23 16:46:53
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_kaoqin_Exists]
@k_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_kaoqin] WHERE k_id=@k_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_kaosetting_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_kaosetting_GetModel]
@k_id bigint
 AS 
	SELECT 
	k_id,k_amtime,k_pmtime,k_xiu,k_am2time,k_pm2time
	 FROM [Tunnel_kaosetting]
	 WHERE k_id=@k_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_kaosetting_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_kaosetting_Delete]
@k_id bigint
 AS 
	DELETE [Tunnel_kaosetting]
	 WHERE k_id=@k_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_kaosetting_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_kaosetting_GetList]
 AS 
	SELECT 
	k_id,k_amtime,k_pmtime,k_xiu,k_am2time,k_pm2time
	 FROM [Tunnel_kaosetting]

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_kaosetting_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_kaosetting_Update]
@k_id bigint,
@k_amtime varchar(20),
@k_pmtime varchar(20),
@k_xiu varchar(20),
@k_am2time varchar(20),
@k_pm2time varchar(20)
 AS 
	UPDATE [Tunnel_kaosetting] SET 
	[k_amtime] = @k_amtime,[k_pmtime] = @k_pmtime,[k_xiu] = @k_xiu,[k_am2time] = @k_am2time,[k_pm2time] = @k_pm2time
	WHERE k_id=@k_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_kaosetting_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_kaosetting_ADD]
@k_id bigint output,
@k_amtime varchar(20),
@k_pmtime varchar(20),
@k_xiu varchar(20),
@k_am2time varchar(20),
@k_pm2time varchar(20)

 AS 
	INSERT INTO [Tunnel_kaosetting](
	[k_amtime],[k_pmtime],[k_xiu],[k_am2time],[k_pm2time]
	)VALUES(
	@k_amtime,@k_pmtime,@k_xiu,@k_am2time,@k_pm2time
	)
	SET @k_id = @@IDENTITY

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_kaosetting_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_kaosetting_Exists]
@k_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_kaosetting] WHERE k_id=@k_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_log_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_log_Exists]
@l_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_log] WHERE l_id=@l_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_log_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_log_GetModel]
@l_id bigint
 AS 
	SELECT 
	l_id,l_user,l_time,l_content,l_ip,l_sort
	 FROM [Tunnel_log]
	 WHERE l_id=@l_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_log_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_log_Delete]
@l_id bigint
 AS 
	DELETE [Tunnel_log]
	 WHERE l_id=@l_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_log_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加系统日志 
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_log_ADD]
(
	@l_id bigint output,
	@l_user int,
	@l_content text,
	@l_ip varchar(50),
	@l_sort int
)
AS 
Begin
	INSERT INTO [Tunnel_log]([l_user],[l_content],[l_ip],[l_sort]) 
	VALUES(@l_user,@l_content,@l_ip,@l_sort)
	SET @l_id = @@IDENTITY
end	

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_log_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_log_Update]
@l_id bigint,
@l_user int,
@l_time datetime,
@l_content text,
@l_ip varchar(50),
@l_sort int
 AS 
	UPDATE [Tunnel_log] SET 
	[l_user] = @l_user,[l_time] = @l_time,[l_content] = @l_content,[l_ip] = @l_ip,[l_sort] = @l_sort
	WHERE l_id=@l_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_log_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_log_GetList]
 AS 
	SELECT 
	l_id,l_user,l_time,l_content,l_ip,l_sort
	 FROM [Tunnel_log]

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_meeting_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_meeting_Exists]
@m_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_meeting] WHERE m_id=@m_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_meeting_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_meeting_Update]
@m_id bigint,
@m_title varchar(200),
@m_content text,
@m_menber varchar(1000),
@m_startime datetime,
@m_endtime datetime,
@m_user int,
@m_state int
 AS 
	UPDATE [Tunnel_meeting] SET 
	[m_title] = @m_title,[m_content] = @m_content,[m_menber] = @m_menber,[m_startime] = @m_startime,[m_endtime] = @m_endtime,[m_user] = @m_user,[m_state] = @m_state
	WHERE m_id=@m_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_meeting_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_meeting_GetModel]
@m_id bigint
 AS 
	SELECT 
	m_id,m_title,m_content,m_menber,m_startime,m_endtime,m_user,m_state
	 FROM [Tunnel_meeting]
	 WHERE m_id=@m_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_meeting_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_meeting_GetList]
 AS 
	SELECT 
	m_id,m_title,m_content,m_menber,m_startime,m_endtime,m_user,m_state
	 FROM [Tunnel_meeting]

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_ViewTable_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-17 12:16:50
------------------------------------
CREATE PROCEDURE [dbo].[UP_ViewTable_ADD]
@id int output,
@objId int,
@typeId int,
@content varchar(800),
@userId int

 AS 
	INSERT INTO [ViewTable](
	[objId],[typeId],[content],[userId]
	)VALUES(
	@objId,@typeId,@content,@userId
	)
	SET @id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iRTblRoot]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iRTblRoot] (@IntID binary(8),@Z_BranchID_Z int,@Z_VS_Z int,@Z_VE_Z int=2147483647) as insert RTblRoot values (@IntID,@Z_BranchID_Z,@Z_VS_Z,@Z_VE_Z)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_project_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_project_Exists]
@p_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_project] WHERE p_id=@p_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_project_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_project_Update]
@p_id bigint,
@p_name varchar(200),
@p_yname varchar(100),
@p_jname varchar(100),
@p_xfile varchar(200),
@p_zfile varchar(200),
@p_user int
 AS 
	UPDATE [Tunnel_project] SET 
	[p_name] = @p_name,[p_yname] = @p_yname,[p_jname] = @p_jname,[p_xfile] = @p_xfile,[p_zfile] = @p_zfile,[p_user] = @p_user
	WHERE p_id=@p_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_project_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_project_GetList]
 AS 
	SELECT 
	p_id,p_name,p_yname,p_jname,p_xfile,p_zfile,p_user
	 FROM [Tunnel_project]

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_project_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_project_GetModel]
@p_id bigint
 AS 
	SELECT 
	p_id,p_name,p_yname,p_jname,p_xfile,p_zfile,p_user
	 FROM [Tunnel_project]
	 WHERE p_id=@p_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_projectlog_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_projectlog_GetModel]
@pl_id bigint
 AS 
	SELECT 
	pl_id,pl_title,pl_content,pl_time,pl_user
	 FROM [Tunnel_projectlog]
	 WHERE pl_id=@pl_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_projectlog_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_projectlog_GetList]
 AS 
	SELECT 
	pl_id,pl_title,pl_content,pl_time,pl_user
	 FROM [Tunnel_projectlog]

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_projectlog_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_projectlog_Exists]
@pl_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_projectlog] WHERE pl_id=@pl_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_projectlog_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:47
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_projectlog_Update]
@pl_id bigint,
@pl_title varchar(200),
@pl_content text,
@pl_time datetime,
@pl_user int
 AS 
	UPDATE [Tunnel_projectlog] SET 
	[pl_title] = @pl_title,[pl_content] = @pl_content,[pl_time] = @pl_time,[pl_user] = @pl_user
	WHERE pl_id=@pl_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iRTblNamedObj]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iRTblNamedObj] (@IntID binary(8),@Z_BranchID_Z int,@Z_VS_Z int,@Name varchar(200)=null,@Z_VE_Z int=2147483647) as insert RTblNamedObj values (@IntID,@Z_BranchID_Z,@Z_VS_Z,@Z_VE_Z,@Name)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_anpai_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-17 16:28:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_anpai_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([a_id])+1 FROM [Tunnel_anpai]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_anpai_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-17 16:28:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_anpai_Exists]
@a_id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_anpai] WHERE a_id=@a_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_anpai_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-17 16:28:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_anpai_Update]
@a_id int,
@a_title varchar(50),
@a_content varchar(500),
@a_date datetime,
@a_ampm varchar(50),
@a_userId int,
@a_createDate datetime
 AS 
	UPDATE [Tunnel_anpai] SET 
	[a_title] = @a_title,[a_content] = @a_content,[a_date] = @a_date,[a_ampm] = @a_ampm,[a_userId] = @a_userId,[a_createDate] = @a_createDate
	WHERE a_id=@a_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_anpai_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-17 16:28:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_anpai_ADD]
@a_id int output,
@a_title varchar(50),
@a_content varchar(500),
@a_date datetime,
@a_ampm varchar(50),
@a_userId int,
@a_createDate datetime

 AS 
	INSERT INTO [Tunnel_anpai](
	[a_title],[a_content],[a_date],[a_ampm],[a_userId],[a_createDate]
	)VALUES(
	@a_title,@a_content,@a_date,@a_ampm,@a_userId,@a_createDate
	)
	SET @a_id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_anpai_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-17 16:28:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_anpai_Delete]
@a_id int
 AS 
	DELETE [Tunnel_anpai]
	 WHERE a_id=@a_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_anpai_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-17 16:28:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_anpai_GetModel]
@a_id int
 AS 
	SELECT 
	a_id,a_title,a_content,a_date,a_ampm,a_userId,a_createDate
	 FROM [Tunnel_anpai]
	 WHERE a_id=@a_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_anpai_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-11-17 16:28:07
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_anpai_GetList]
 AS 
	SELECT 
	a_id,a_title,a_content,a_date,a_ampm,a_userId,a_createDate
	 FROM [Tunnel_anpai]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_report_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:48
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_report_GetModel]
@r_id bigint
 AS 
	SELECT 
	r_id,r_title,r_file,r_time,r_from,r_user,r_content,r_toemail
	 FROM [Tunnel_report]
	 WHERE r_id=@r_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_report_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：
--说明：
--时间：2009-10-23 17:19:48
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_report_Exists]
@r_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_report] WHERE r_id=@r_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_report_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:48
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_report_GetList]
 AS 
	SELECT 
	r_id,r_title,r_file,r_time,r_from,r_user
	 FROM [Tunnel_report]

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iUmlGeneralizableElement]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iUmlGeneralizableElement] (@IntID binary(8),@Z_BranchID_Z int,@Z_VS_Z int,@IsRoot tinyint=null,@IsLeaf tinyint=null,@IsAbstract tinyint=null,@Z_VE_Z int=2147483647) as insert UmlGeneralizableElement values (@IntID,@Z_BranchID_Z,@Z_VS_Z,@Z_VE_Z,@IsRoot,@IsLeaf,@IsAbstract)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_step_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-27 15:40:55
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_step_Exists]
@s_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_step] WHERE s_id=@s_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_step_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-27 15:40:55
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_step_ADD]
@s_id bigint output,
@s_name varchar(100),
@s_num int,
@s_zid varchar(500),
@s_lid int,
@s_depict varchar(1000),
@s_ishui int,
@s_isbak int

 AS 
	INSERT INTO [Tunnel_step](
	[s_name],[s_num],[s_zid],[s_lid],[s_depict],[s_ishui],[s_isbak]
	)VALUES(
	@s_name,@s_num,@s_zid,@s_lid,@s_depict,@s_ishui,@s_isbak
	)
	SET @s_id = @@IDENTITY

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_step_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-27 15:40:55
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_step_Update]
@s_id bigint,
@s_name varchar(100),
@s_num int,
@s_zid varchar(500),
@s_lid int,
@s_depict varchar(1000),
@s_ishui int,
@s_isbak int
 AS 
	UPDATE [Tunnel_step] SET 
	[s_name] = @s_name,[s_num] = @s_num,[s_zid] = @s_zid,[s_lid] = @s_lid,[s_depict] = @s_depict,[s_ishui] = @s_ishui,[s_isbak] = @s_isbak
	WHERE s_id=@s_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_step_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-27 15:40:55
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_step_GetList]
 @l_id int
 AS 
	SELECT 
	s_id,s_name,s_num,s_zid,s_lid,s_depict,s_ishui,s_isbak
	 FROM [Tunnel_step] WHERE s_lid=@l_id

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_step_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-27 15:40:55
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_step_GetModel]
@s_id bigint
 AS 
	SELECT 
	s_id,s_name,s_num,s_zid,s_lid,s_depict,s_ishui,s_isbak
	 FROM [Tunnel_step]
	 WHERE s_id=@s_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_step_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-27 15:40:55
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_step_Delete]
@s_id bigint
 AS 
	DELETE [Tunnel_step]
	 WHERE s_id=@s_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_InfoXjb_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'




------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-25 16:38:11
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_InfoXjb_GetList]
 AS 
	SELECT 
	id,typeId,sectype,title,[content],imagePaht,htmlSource,setDate,userId,files,sectype,[filename]
	 FROM [tunnel_infoxjb] where del=0




' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_InfoXjb_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'






------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-25 16:38:11
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_InfoXjb_ADD]
@id int output,
@typeId int,
@title varchar(200),
@content text,
@imagePaht varchar(100),
@htmlSource text,
@userId int,
@files varchar(500),
@bum_bz int,
@sectype int,
@filename varchar(500)
 AS 
	INSERT INTO [tunnel_infoxjb](
	[typeId],[sectype],[title],[content],[imagePaht],[htmlSource],[userId],[files],[bum_bz],[filename]
	)VALUES(
	@typeId,@sectype,@title,@content,@imagePaht,@htmlSource,@userId,@files,@bum_bz,@filename
	)
	SET @id = @@IDENTITY





' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_InfoXjb_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'




------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-25 16:38:11
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_InfoXjb_Update]
@id int,
@typeId int,
@title varchar(200),
@content text,
@imagePaht varchar(100),
@htmlSource text,
@setDate datetime,
@userId int,
@files varchar(500),
@sectype int,
@filename varchar(500)
 AS 
	UPDATE [Tunnel_InfoXjb] SET 
	[typeId] = @typeId,[title] = @title,[content] = @content,[imagePaht] = @imagePaht,[htmlSource] = @htmlSource,[userId] = @userId,[files] = @files,[sectype]=@sectype,[filename]=@filename
	WHERE id=@id




' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_InfoXjb_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'



------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-25 16:38:11
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_InfoXjb_GetModel]
@id int
 AS 
	SELECT 
	id,typeId,title,content,imagePaht,htmlSource,setDate,userId,files,sectype,[filename]
	 FROM [Tunnel_InfoXjb]
	 WHERE id=@id and del=0



' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iUmlElement]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iUmlElement] (@IntID binary(8),@Z_BranchID_Z int,@Z_VS_Z int,@Visibility varchar(25)=null,@Z_VE_Z int=2147483647) as insert UmlElement values (@IntID,@Z_BranchID_Z,@Z_VS_Z,@Z_VE_Z,@Visibility)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iRTblSumInfo]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iRTblSumInfo] (@IntID binary(8),@Z_BranchID_Z int,@Z_VS_Z int,@Comments text=null,@ShortDesc varchar(255)=null,@Z_VE_Z int=2147483647) as insert RTblSumInfo values (@IntID,@Z_BranchID_Z,@Z_VS_Z,@Z_VE_Z,@Comments,@ShortDesc)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_workplan_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：
--说明：
--时间：2009-10-23 17:19:48
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_workplan_Exists]
@w_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_workplan] WHERE w_id=@w_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_workplan_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：
--说明：
--时间：2009-10-23 17:19:48
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_workplan_GetModel]
@w_id bigint
 AS 
	SELECT 
	w_id,w_title,w_content,w_starttime,w_endtime,w_depict,w_user
	 FROM [Tunnel_workplan]
	 WHERE w_id=@w_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Index_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'

------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-25 16:38:11
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Index_GetList]
 AS 
	SELECT 
	id,typeId,title,content,imagePaht,htmlSource,setDate,userId,files,[filename]
	 FROM [Tunnel_Index] where del=0

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Index_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'

------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-25 16:38:11
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Index_GetModel]
@id int
 AS 
	SELECT 
	id,typeId,title,content,imagePaht,htmlSource,setDate,userId,files,[filename]
	 FROM [Tunnel_Index]
	 WHERE id=@id and del=0

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Index_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'


------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-25 16:38:11
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Index_ADD]
@id int output,
@typeId int,
@title varchar(200),
@content text,
@imagePaht varchar(100),
@htmlSource text,
@userId int,
@files varchar(500),
@bum_bz int,
@filename varchar(500)

 AS 
	INSERT INTO [Tunnel_Index](
	[typeId],[title],[content],[imagePaht],[htmlSource],[userId],[files],[bum_bz],[filename]
	)VALUES(
	@typeId,@title,@content,@imagePaht,@htmlSource,@userId,@files,@bum_bz,@filename
	)
	SET @id = @@IDENTITY


' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Index_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'


------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-25 16:38:11
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Index_Update]
@id int,
@typeId int,
@title varchar(200),
@content text,
@imagePaht varchar(100),
@htmlSource text,
@setDate datetime,
@userId int,
@files varchar(500),
@filename varchar(500)
 AS 
	UPDATE [Tunnel_Index] SET 
	[typeId] = @typeId,[title] = @title,[content] = @content,[imagePaht] = @imagePaht,[htmlSource] = @htmlSource,[userId] = @userId,[files] = @files,[filename]=@filename
	WHERE id=@id


' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Remind_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2010-5-12 11:38:10
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Remind_Exists]
@m_id bigint
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_Remind] WHERE m_id=@m_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Remind_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-5-12 11:38:10
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Remind_Delete]
@m_id bigint
 AS 
	DELETE [Tunnel_Remind]
	 WHERE m_id=@m_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Remind_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-5-12 11:38:10
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Remind_ADD]
@m_id bigint output,
@m_title varchar(500),
@m_url varchar(500),
@m_touser bigint,
@m_time datetime,
@m_isread int,
@m_callTime datetime,
@m_type int,
@m_typeid int,
@m_bid int

 AS 
	INSERT INTO [Tunnel_Remind](
	[m_title],[m_url],[m_touser],[m_time],[m_isread],[m_callTime],[m_type],[m_typeid],[m_bid]
	)VALUES(
	@m_title,@m_url,@m_touser,@m_time,@m_isread,@m_callTime,@m_type,@m_typeid,@m_bid
	)
	SET @m_id = @@IDENTITY
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Remind_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2010-5-12 11:38:10
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Remind_Update]
@m_id bigint,
@m_title varchar(500),
@m_url varchar(500),
@m_touser bigint,
@m_time datetime,
@m_isread int,
@m_callTime datetime,
@m_type int,
@m_typeid int,
@m_bid int
 AS 
	UPDATE [Tunnel_Remind] SET 
	[m_title] = @m_title,[m_url] = @m_url,[m_touser] = @m_touser,[m_time] = @m_time,[m_isread] = @m_isread,[m_callTime] = @m_callTime,[m_type] = @m_type,[m_typeid] = @m_typeid,[m_bid]=@m_bid
	WHERE m_id=@m_id
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Remind_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-5-12 11:38:10
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Remind_GetList]
 AS 
	SELECT 
	m_id,m_title,m_url,m_touser,m_time,m_isread,m_callTime,m_type,m_typeid,m_bid
	 FROM [Tunnel_Remind]
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_Remind_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2010-5-12 11:38:10
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_Remind_GetModel]
@m_id bigint
 AS 
	SELECT 
	m_id,m_title,m_url,m_touser,m_time,m_isread,m_callTime,m_type,m_typeid,m_bid
	 FROM [Tunnel_Remind]
	 WHERE m_id=@m_id
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iUmlReference]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iUmlReference] (@IntID binary(8),@Z_BranchID_Z int,@Z_VS_Z int,@Visibility varchar(25)=null,@Alias varchar(255)=null,@Z_VE_Z int=2147483647) as insert UmlReference values (@IntID,@Z_BranchID_Z,@Z_VS_Z,@Z_VE_Z,@Visibility,@Alias)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_weekplan_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-29 13:57:24
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_weekplan_Update]
@w_id bigint,
@w_title varchar(200),
@w_content varchar(500),
@w_address varchar(100),
@w_time varchar(50),
@w_daytime varchar(50),
@w_adddate datetime,
@w_weekID varchar(200),
@w_date varchar(50)
 AS 
	UPDATE [Tunnel_weekplan] SET 
	[w_title] = @w_title,[w_content] = @w_content,[w_address] = @w_address,[w_time] = @w_time,[w_daytime] = @w_daytime,[w_adddate] = @w_adddate,[w_weekID] = @w_weekID,[w_date] = @w_date
	WHERE w_id=@w_id' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_weekplan_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-29 13:57:24
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_weekplan_ADD]
@w_id bigint output,
@w_title varchar(200),
@w_content varchar(500),
@w_address varchar(100),
@w_time varchar(50),
@w_daytime varchar(50),
@w_adddate datetime,
@w_weekID varchar(200),
@w_date varchar(50)

 AS 
	INSERT INTO [Tunnel_weekplan](
	[w_title],[w_content],[w_address],[w_time],[w_daytime],[w_adddate],[w_weekID],[w_date]
	)VALUES(
	@w_title,@w_content,@w_address,@w_time,@w_daytime,@w_adddate,@w_weekID,@w_date
	)
	SET @w_id = @@IDENTITY' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_weekplan_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-29 13:57:24
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_weekplan_Exists]
@w_weekID varchar(200)
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_weekplan] WHERE w_weekID=@w_weekID 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iUmlType]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iUmlType] (@IntID binary(8),@Z_BranchID_Z int,@Z_VS_Z int,@IsTemplate tinyint=null,@Visibility varchar(255)=null,@Multiplicity varchar(255)=null,@Details varchar(255)=null,@Z_VE_Z int=2147483647) as insert UmlType values (@IntID,@Z_BranchID_Z,@Z_VS_Z,@Z_VE_Z,@IsTemplate,@Visibility,@Multiplicity,@Details)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_weekstate_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-30 15:20:46
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_weekstate_ADD]
@week_ID varchar(200),
@week_state int

 AS 
	INSERT INTO [Tunnel_weekstate](
	[week_ID],[week_state]
	)VALUES(
	@week_ID,@week_state
	)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_weekstate_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-30 15:20:46
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_weekstate_Update]
@week_ID varchar(200),
@week_state int
 AS 
	UPDATE [Tunnel_weekstate] SET 
	[week_state] = @week_state
	WHERE week_ID=@week_ID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_weekstate_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-30 15:20:46
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_weekstate_Exists]
@week_ID varchar(200)
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_weekstate] WHERE week_ID=@week_ID 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_weekstate_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-30 15:20:46
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_weekstate_GetList]
 AS 
	SELECT 
	week_ID,week_state
	 FROM [Tunnel_weekstate]' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_weekstate_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-30 15:20:46
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_weekstate_GetModel]
@week_ID varchar(200)
 AS 
	SELECT 
	week_ID,week_state
	 FROM [Tunnel_weekstate]
	 WHERE week_ID=@week_ID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UP_Tunnel_weekstate_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-12-30 15:20:46
------------------------------------
CREATE PROCEDURE [dbo].[UP_Tunnel_weekstate_Delete]
@week_ID varchar(200)
 AS 
	DELETE [Tunnel_weekstate]
	 WHERE week_ID=@week_ID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iUmlSignalReference]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iUmlSignalReference] (@IntID binary(8),@Z_BranchID_Z int,@Z_VS_Z int,@Direction varchar(25)=null,@Z_VE_Z int=2147483647) as insert UmlSignalReference values (@IntID,@Z_BranchID_Z,@Z_VS_Z,@Z_VE_Z,@Direction)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iUmlStereotype]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iUmlStereotype] (@IntID binary(8),@Z_BranchID_Z int,@Z_VS_Z int,@UMLvalue varchar(255)=null,@Z_VE_Z int=2147483647) as insert UmlStereotype values (@IntID,@Z_BranchID_Z,@Z_VS_Z,@Z_VE_Z,@UMLvalue)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_yingshe_GetMaxId]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到主键字段最大值 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 14:52:06
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_yingshe_GetMaxId]
AS
	DECLARE @TempID int
	SELECT @TempID = max([y_id])+1 FROM [Tunnel_yingshe]
	IF @TempID IS NULL
		RETURN 1
	ELSE
		RETURN @TempID

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_yingshe_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 14:52:06
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_yingshe_Exists]
@y_id int
AS
	DECLARE @TempID int
	SELECT @TempID = count(1) FROM [Tunnel_yingshe] WHERE y_id=@y_id 
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN 1

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_yingshe_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 14:52:06
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_yingshe_ADD]
@y_id int output,
@y_jsid int,
@y_qxlist varchar(2000)

 AS 
	INSERT INTO [Tunnel_yingshe](
	[y_jsid],[y_qxlist]
	)VALUES(
	@y_jsid,@y_qxlist
	)
	SET @y_id = @@IDENTITY

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_yingshe_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 14:52:06
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_yingshe_Update]
@y_id int,
@y_jsid int,
@y_qxlist varchar(2000)
 AS 
	UPDATE [Tunnel_yingshe] SET 
	[y_jsid] = @y_jsid,[y_qxlist] = @y_qxlist
	WHERE y_id=@y_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_yingshe_GetList]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：查询记录信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 14:52:06
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_yingshe_GetList]
 AS 
	SELECT 
	y_id,y_jsid,y_qxlist
	 FROM [Tunnel_yingshe]

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_yingshe_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：得到实体对象的详细信息 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 14:52:06
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_yingshe_GetModel]
@y_id int
 AS 
	SELECT 
	y_id,y_jsid,y_qxlist
	 FROM [Tunnel_yingshe]
	 WHERE y_id=@y_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_yingshe_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 14:52:06
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_yingshe_Delete]
@y_id int
 AS 
	DELETE [Tunnel_yingshe]
	 WHERE y_id=@y_id 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iUmlNote]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iUmlNote] (@IntID binary(8),@Z_BranchID_Z int,@Z_VS_Z int,@UMLvalue text=null,@Z_VE_Z int=2147483647) as insert UmlNote values (@IntID,@Z_BranchID_Z,@Z_VS_Z,@Z_VE_Z,@UMLvalue)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[r_iUmlTaggedValue]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'create procedure [dbo].[r_iUmlTaggedValue] (@IntID binary(8),@Z_BranchID_Z int,@Z_VS_Z int,@UMLvalue varchar(255)=null,@Z_VE_Z int=2147483647) as insert UmlTaggedValue values (@IntID,@Z_BranchID_Z,@Z_VS_Z,@Z_VE_Z,@UMLvalue)' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_mail_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改邮件状态
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_mail_Update]
(
	@m_id bigint,
	--@m_title varchar(200),
	--@m_content text,
	--@m_from int,
	--@m_to int,
	--@m_file varchar(1000),
	--@m_time datetime,
	@m_sort int,
	@m_state int,
	@m_user int,
	@m_ip varchar(20)
)
AS
Begin 
	--UPDATE [Tunnel_mail] SET 
	--[m_title] = @m_title,[m_content] = @m_content,[m_from] = @m_from,[m_to] = @m_to,[m_file] = @m_file,[m_time] = @m_time,[m_sort] = @m_sort,[m_state] = @m_state
	--WHERE m_id=@m_id 
	
	if @m_sort > 0
		UPDATE [Tunnel_mail] SET [m_sort]  =  1 WHERE m_id=@m_id 
	else if @m_state > 0
		UPDATE [Tunnel_mail] SET [m_state] = 1 WHERE m_id=@m_id 
	
	declare @state int
	set @state = 3
	
	declare @content varchar(1000)
	set @content = ''个人桌面>>站内邮箱>>''
	
	declare @title varchar(1000)
	select @title= m_title from [Tunnel_mail] WHERE m_id=@m_id 
	
	if @m_sort > 0
		set @content = @content +''删除邮件到回收站''
	else
	 	set @content = @content + ''[''+ @title +'']邮件已读''
	 	
	exec Tunnel_log_ADD 0,@m_user,@content,@m_ip,@state
End			
		' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_mail_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_mail_Delete]
(
	@m_id bigint,
	@m_user int,
	@m_ip varchar(20),
	@num int output
)
AS
Begin 
	declare @title varchar(1000)
	declare @content varchar(1000)
	declare @state int
	
	declare @num1 int
	select @title = m_title from [Tunnel_mail] WHERE m_id=@m_id
	if @title <> '''' 
		Begin
			declare @filePaht varchar(1000)
			select @filePaht = m_file from [Tunnel_mail] where m_id=@m_id 
			select @num = count(*) from [Tunnel_mail] where m_file = @filePaht -- 只剩余一条删除
			DELETE [Tunnel_mail] WHERE m_id=@m_id 
		End
	
	select  @num1 = count(*) from [Tunnel_mail] where m_id=@m_id
	
	set @content = ''个人桌面>>站内邮箱>>彻底删除邮件|标题：''+@title
	set @state = 2
	if @num1 = 0 
		exec Tunnel_log_ADD 0,@m_user,@content,@m_ip,@state
End	
	
	

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_mail_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：发送内部邮件 
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_mail_ADD]
(
	@m_id bigint output,
	@m_title varchar(200),
	@m_content text,
	@m_from int,
	@m_to int,
	@m_file varchar(1000),
	@m_time datetime,
	@m_sort int,
	@m_state int,
	@m_main int,
	@m_ip varchar(20)
)
AS 
Begin
	INSERT INTO [Tunnel_mail]([m_title],[m_content],[m_from],[m_to],[m_file],[m_time],[m_sort],[m_state],[m_main])
	VALUES(@m_title,@m_content,@m_from,@m_to,@m_file,@m_time,@m_sort,@m_state,@m_main)
	SET @m_id = @@IDENTITY
	
	declare @content varchar(1000)
	declare @state int
	set @content = ''个人桌面>>站内邮箱>>''
	declare @toName varchar(50)
	select @toName = m_name from Tunnel_menber where m_id = @m_to
	if @m_main = 1
		set @content = @content + ''增加我的已发邮件''
	else
		set @content = @content + ''发送给[''+@toName+'']一封新邮件''
	set @state = 1
	if @m_id > 0
		exec Tunnel_log_ADD 0,@m_from,@content,@m_ip,@state
End	

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_information_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'

------------------------------------
--用途：修改一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:46
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_information_Update]
@i_id bigint,
@i_title varchar(100),
@i_sort int,
@i_user int,
@i_time datetime,
@i_hit int,
@i_content text,
@i_ip varchar(20),
@i_audituser int,
@i_auditmark varchar(500),
@i_audittime varchar(30),
@i_idout bigint output
 AS 
	UPDATE [Tunnel_information] SET 
	[i_title] = @i_title,[i_sort] = @i_sort,[i_time] = @i_time,[i_hit] = @i_hit,[i_content] = @i_content,[i_audituser]=[i_audituser],[i_auditmark]='''',[i_audittime]=''''
	WHERE i_id=@i_id 
	SET @i_idout = @i_id
	declare @content varchar(1000)
	declare @state int
	set @state = 1
	set @content =''公共事务>>公司公告>>修改公告，标题：''+@i_title
	if @i_sort = 0
		set @content =''系统管理>>新闻管理>>修改新闻，标题：''+@i_title

	if @i_id > 0
		exec Tunnel_log_ADD 0,@i_user,@content,@i_ip,@state


' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_information_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'
------------------------------------
--用途：删除公告或新闻
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_information_Delete]
(
	@i_id bigint,
	@i_user int,
	@i_ip varchar(20)
)
AS 
Begin
	
	declare @title varchar(1000)
	declare @content varchar(1000)
	declare @state int
	declare @isort int
	declare @num int
	select @title = i_title,@isort = i_sort from [Tunnel_information] WHERE i_id=@i_id 
	if @title <> '''' 
		update [tunnel_information] set [i_del]=1 where i_id=@i_id
		--DELETE [Tunnel_information]  WHERE i_id=@i_id 
	
	select  @num = count(*) from [Tunnel_information] where i_id=@i_id
	
	set @content = ''公共事务>>公司公告>>彻底删除''
	if @isort = 0
		set @content = @content + ''新闻，标题：''+@title
	else
		set @content = @content + ''公告，标题：''+@title
	set @state = 2
	if @num = 0 
		exec Tunnel_log_ADD 0,@i_user,@content,@i_ip,@state
End	


' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_information_GetModel]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'




------------------------------------
--用途：查询新闻或公告详细
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_information_GetModel]
(
	@i_id bigint,
	@i_user int,
	@i_ip varchar(20)
)
AS 
Begin
	declare @del int
	SELECT i_id,i_title,i_sort,i_user,i_time,i_hit,i_content,i_files,i_audituser,i_auditmark,i_audittime FROM [Tunnel_information] WHERE i_id=@i_id and i_del=0
	select @del=i_del from [tunnel_information] where i_id=@i_id
	if @del=0
	begin
	declare @content varchar(1000)
	declare @state int
	set @state = 4
	declare @sort int
	declare @i_title varchar(1000)
	select @sort = i_sort,@i_title = i_title FROM [Tunnel_information] WHERE i_id=@i_id
	set @content =''公共事务>>公司公告>>查看公告，标题：''+@i_title
	if @sort = 0
		set @content =''公共事务>>公司公告>>查看新闻，标题：''+@i_title
		
	exec Tunnel_log_ADD 0,@i_user,@content,@i_ip,@state
	end
End





' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_information_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'

------------------------------------
--用途：发布公告或新闻 
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_information_ADD]
(
	@i_id bigint output,
	@i_title varchar(100),
	@i_sort int,
	@i_user int,
	@i_time datetime,
	@i_hit int,
	@i_content text,
	@i_ip varchar(20),
	@i_files varchar(500),
	@i_audituser int,
	@i_auditmark varchar(500),
	@i_audittime varchar(30)
)
AS 
Begin

	INSERT INTO [Tunnel_information]([i_title],[i_sort],[i_user],[i_time],[i_hit],[i_content],[i_files],[i_audituser],[i_auditmark],[i_audittime])
	VALUES(@i_title,@i_sort,@i_user,@i_time,@i_hit,@i_content,@i_files,@i_audituser,@i_auditmark,@i_audittime)
	SET @i_id = @@IDENTITY
	
	declare @content varchar(1000)
	declare @state int
	set @state = 1
	set @content =''公共事务>>公司公告>>发布公告，标题：''+@i_title
	if @i_sort = 0
		set @content =''系统管理>>新闻管理>>发布新闻，标题：''+@i_title

	if @i_id > 0
		exec Tunnel_log_ADD 0,@i_user,@content,@i_ip,@state
End	



' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_file_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：上传文件 
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_file_ADD]
(
	@f_id bigint output,
	@f_title varchar(100),
	@f_file varchar(200),
	@f_size varchar(50),
	@f_sort int,
	@f_addtime datetime,
	@f_user int,
	@f_juser varchar(500),
	@f_ip varchar(20),
	@f_content text,
	@f_bum int
)
AS 
Begin
	INSERT INTO [Tunnel_file]([f_title],[f_file],[f_size],[f_sort],[f_addtime],[f_user],[f_juser],[f_content],[f_bum])
	VALUES(@f_title,@f_file,@f_size,@f_sort,@f_addtime,@f_user,@f_juser,@f_content,@f_bum)
	SET @f_id = @@IDENTITY
	
	declare @content varchar(5000)
	declare @state int
	set @content = ''公共事务>>文件发布>>发布文件，标题：''+@f_title
	set @state = 1
	if @f_id > 0
		exec Tunnel_log_ADD 0,@f_user,@content,@f_ip,@state
End	

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_file_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除文件
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_file_Delete]
(
	@f_id bigint,
	@f_user int,
	@f_ip varchar(20)
)
AS
Begin 
	 
	declare @title varchar(1000)
	declare @content varchar(1000)
	declare @state int
	
	declare @num int
	select @title = f_title from [Tunnel_file] WHERE f_id=@f_id
	if @title <> '''' 
		DELETE [Tunnel_file] WHERE f_id=@f_id
	
	select  @num = count(*) from [Tunnel_file] where f_id=@f_id
	
	set @content = ''公共事务>>管理文件>>彻底删除文件,标题：''+@title
	set @state = 2
	if @num = 0 
		exec Tunnel_log_ADD 0,@f_user,@content,@f_ip,@state
End	

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_file_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：设置文件共享
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_file_Update]
(
	@f_id bigint,
	--@f_title varchar(100),
	--@f_file varbinary,
	--@f_size varchar(50),
	@f_sort varchar(50),
	--@f_addtime datetime,
	--@f_user int,
	@f_juser varchar(500),
	@f_type int,
	@f_user int,
	@f_ip varchar(20)
)
AS
Begin 
	--UPDATE [Tunnel_file] SET 
	--[f_title] = @f_title,[f_file] = @f_file,[f_size] = @f_size,[f_sort] = @f_sort,[f_addtime] = @f_addtime,[f_user] = @f_user,[f_juser] = @f_juser
	--WHERE f_id=@f_id 
	
	if @f_type = 1
		UPDATE [Tunnel_file] SET [f_sort] = @f_sort WHERE f_id=@f_id  --取消共享或共享给所有用户
	else if @f_type = 2
		UPDATE [Tunnel_file] SET [f_juser] = @f_juser WHERE f_id=@f_id --取消共享或共享给指定用户
		
    declare @state int
	declare @content varchar(5000)
	declare @title varchar(1000)
	select @title = f_title from [Tunnel_file]  WHERE f_id=@f_id
	set @state = 3
	if @f_type = 1
		Begin
			if @f_sort = 0
				set @content = ''公共事务>>文件发布>>取消文件共享,标题：''+@title
			else
				set @content = ''公共事务>>文件发布>>文件共享给所有用户,标题：''+@title
		end
	else
		Begin
			if @f_juser = ''''
				set @content = ''公共事务>>文件发布>>取消文件共享,标题：''+@title
			else
				set @content = ''公共事务>>文件发布>>文件共享给指定用户,标题：''+@title
		end
	
	exec Tunnel_log_ADD 0,@f_user,@content,@f_ip,@state
End		
		
		

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_menber_Exists]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：用户是否已经存在 
--项目名称：CodematicDemo
--说明：
--时间：2009-10-26 15:04:50
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_menber_Exists]
(
	@m_id bigint,
	@m_user varchar(50),
	@m_pass varchar(50),
	@m_ip varchar(20)
)
AS
	DECLARE @TempID int
	declare @userName varchar(50)
	if @m_id >0 
		SELECT @TempID = count(*) FROM [Tunnel_menber] WHERE m_id=@m_id 
	else
		begin
			SELECT @TempID = count(*) FROM [Tunnel_menber] WHERE  m_login=@m_user and m_password=@m_pass
			if 	@TempID = 1
				SELECT @m_id = m_id  FROM [Tunnel_menber] WHERE  m_login=@m_user and m_password=@m_pass
			set @TempID = @m_id
			if @TempID > 0
			Begin
				exec Tunnel_log_ADD 0,@TempID,''登陆系统!'',@m_ip,4
		    end
		end
		
	IF @TempID = 0
		RETURN 0
	ELSE
		RETURN @TempID' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_workplan_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除工作计划 
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_workplan_Delete]
(
	@w_id bigint,
	@w_user int,
	@w_ip varchar(20)
)
AS 
Begin
	
	declare @title varchar(1000)
	declare @content varchar(1000)
	declare @state int
	
	declare @num int
	select @title = w_title from [Tunnel_workplan] WHERE w_id=@w_id 
	if @title <> '''' 
		DELETE [Tunnel_workplan] WHERE w_id=@w_id 
	
	select  @num = count(*) from [Tunnel_workplan] where w_id=@w_id
	
	set @content = ''个人桌面>>管理工作计划>>彻底删除工作计划|标题：''+@title
	set @state = 2
	if @num = 0 
		exec Tunnel_log_ADD 0,@w_user,@content,@w_ip,@state
end	

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_workplan_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改工作计划 
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_workplan_Update]
(
	@w_id bigint,
	@w_title varchar(200),
	@w_content text,
	@w_starttime datetime,
	@w_endtime datetime,
	@w_depict varchar(1000),
	@w_user int,
	@w_ip varchar(20)
)
AS
Begin
	UPDATE [Tunnel_workplan] SET 
	[w_title] = @w_title,[w_content] = @w_content,[w_starttime] = @w_starttime,[w_endtime] = @w_endtime,[w_depict] = @w_depict,[w_user] = @w_user
	WHERE w_id=@w_id 
	
	declare @state int
	declare @content varchar(1000)
	set @state = 3
	set @content = ''个人桌面>>管理工作计划>>修改工作计划|标题：''+@w_title
	exec Tunnel_log_ADD 0,@w_user,@content,@w_ip,@state
End	

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_workplan_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：创建工作计划 
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_workplan_ADD]
(
	@w_id bigint output,
	@w_title varchar(200),
	@w_content text,
	@w_starttime datetime,
	@w_endtime datetime,
	@w_depict varchar(1000),
	@w_user int,
	@w_ip varchar(20)
)
AS
Begin
	INSERT INTO [Tunnel_workplan]([w_title],[w_content],[w_starttime],[w_endtime],[w_depict],[w_user]) 
	VALUES (@w_title,@w_content,@w_starttime,@w_endtime,@w_depict,@w_user)
	SET @w_id = @@IDENTITY
	
	declare @content varchar(1000)
	declare @state int
	set @content = ''个人桌面>>工作计划>>创建工作计划''
	set @state = 1
	if @w_id > 0
		exec Tunnel_log_ADD 0,@w_user,@content,@w_ip,@state
end	

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_vannewpaper_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加一条记录 
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_vannewpaper_ADD]
(
	@v_id bigint output,
	@v_title varchar(200),
	@v_img varchar(100),
	@v_file varchar(100),
	@v_user int,
	@v_sort int,
	@v_ip varchar(20)
)
AS 
Begin
	INSERT INTO [Tunnel_vannewpaper]([v_title],[v_img],[v_file],[v_user],[v_sort])
	VALUES(@v_title,@v_img,@v_file,@v_user,@v_sort)
	SET @v_id = @@IDENTITY
	
	declare @content varchar(1000)
	declare @state int
	set @content = ''信息管理中心>>盾构先锋报>>创建盾构先锋报''
	if @v_sort = 1
		set @content = ''信息管理中心>>先锋视野>>创建先锋视野报''
	set @state = 1
	if @v_id > 0
		exec Tunnel_log_ADD 0,@v_user,@content,@v_ip,@state
End	

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_vannewpaper_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除一条记录 
--项目名称：
--说明：
--时间：2009-10-23 17:19:48
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_vannewpaper_Delete]
(
	@v_id bigint,
	@v_user int,
	@v_ip varchar(20)
)
AS
Begin 
	
	declare @title varchar(1000)
	declare @content varchar(1000)
	declare @state int
	declare @soft int
	declare @num int
	select @title = v_title,@soft = v_sort from [Tunnel_vannewpaper] WHERE v_id=@v_id  
	if @title <> '''' 
		DELETE [Tunnel_vannewpaper] WHERE v_id=@v_id 
	
	select  @num = count(*) from [Tunnel_vannewpaper] where v_id=@v_id 
	
	set @content = ''信息管理中心>>盾构先锋报>>彻底删除盾构先锋报|标题：''+@title
	if @soft = 1
		set @content = ''信息管理中心>>先锋视野>>彻底删除先锋视野|标题：''+@title
	set @state = 2
	if @num = 0 
		exec Tunnel_log_ADD 0,@v_user,@content,@v_ip,@state
End	

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_meeting_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加我的会议 
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_meeting_ADD]
(
	@m_id bigint output,
	@m_title varchar(200),
	@m_content text,
	@m_menber varchar(1000),
	@m_startime datetime,
	@m_endtime datetime,
	@m_user int,
	@m_state int,
	@m_ip varchar(20)
)
AS 
Begin
	INSERT INTO [Tunnel_meeting]([m_title],[m_content],[m_menber],[m_startime],[m_endtime],[m_user],[m_state])
	VALUES(@m_title,@m_content,@m_menber,@m_startime,@m_endtime,@m_user,@m_state)
	SET @m_id = @@IDENTITY
	
	declare @content varchar(1000)
	declare @state int
	set @content = ''个人桌面>>我的会议>>创建会议''
	set @state = 1
	if @m_id > 0
		exec Tunnel_log_ADD 0,@m_user,@content,@m_ip,@state
End	

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_meeting_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除我的会议 
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_meeting_Delete]
(
	@m_id bigint,
	@m_user int,
	@m_ip varchar(20)
)
AS
Begin
	
	declare @title varchar(1000)
	declare @content varchar(1000)
	declare @state int
	
	declare @num int
	select @title = m_title from [Tunnel_meeting] WHERE m_id=@m_id  
	if @title <> '''' 
		DELETE [Tunnel_meeting] WHERE m_id=@m_id 
	
	select  @num = count(*) from [Tunnel_meeting] where m_id=@m_id 
	
	set @content = ''个人桌面>>管理工作计划>>彻底删除工作计划|标题：''+@title
	set @state = 2
	if @num = 0 
		exec Tunnel_log_ADD 0,@m_user,@content,@m_ip,@state
End 

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_project_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除施工日志 
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_project_Delete]
(
	@p_id bigint,
	@p_user int,
	@p_ip varchar(20)
)
AS 
Begin
	
	declare @title varchar(1000)
	declare @content varchar(1000)
	declare @state int
	
	declare @num int
	select @title = p_name from [Tunnel_project] WHERE  p_id=@p_id
	if @title <> '''' 
		DELETE [Tunnel_project] WHERE p_id=@p_id 
	
	select  @num = count(*) from [Tunnel_project] where p_id=@p_id
	
	set @content = ''项经部>>管理工程概况>>彻底删除工程概况|标题：''+@title
	set @state = 2
	if @num = 0 
		exec Tunnel_log_ADD 0,@p_user,@content,@p_ip,@state
End	

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_project_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：创建工程概况
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_project_ADD]
(
	@p_id bigint output,
	@p_name varchar(200),
	@p_yname varchar(100),
	@p_jname varchar(100),
	@p_xfile varchar(200),
	@p_zfile varchar(200),
	@p_user int,
	@p_ip varchar(20)
)
AS
Begin 
	INSERT INTO [Tunnel_project]([p_name],[p_yname],[p_jname],[p_xfile],[p_zfile],[p_user])
	VALUES(@p_name,@p_yname,@p_jname,@p_xfile,@p_zfile,@p_user)
	SET @p_id = @@IDENTITY
	
	declare @content varchar(1000)
	set @content = ''项经部>>工程概况>>创建工程概况,标题：''+@p_name
	
	declare @state int
	set @state = 1
	if @p_id > 0
		exec Tunnel_log_ADD 0,@p_user,@content,@p_ip,@state
End
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_report_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：增加工作报告 
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_report_ADD]
(
	@r_id bigint output,
	@r_title varchar(200),
	@r_file varchar(100),
	@r_time datetime,
	@r_from int,
	@r_user int,
	@r_content varchar(2000),
	@r_toemail varchar(200),
	@r_ip varchar(20)
)
AS 
Begin
	INSERT INTO [Tunnel_report]([r_title],[r_file],[r_time],[r_from],[r_user],[r_content],[r_toemail])
	VALUES(@r_title,@r_file,@r_time,@r_from,@r_user,@r_content,@r_toemail)
	SET @r_id = @@IDENTITY
	
	declare @content varchar(1000)
	declare @state int
	set @content = ''个人桌面>>我的报告>>创建我的报告''
	set @state = 1
	if @r_id > 0
		exec Tunnel_log_ADD 0,@r_user,@content,@r_ip,@state
End	

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_projectlog_ADD]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：创建施工日志  
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_projectlog_ADD]
(
	@pl_id bigint output,
	@pl_title varchar(200),
	@pl_content text,
	@pl_time datetime,
	@pl_user int,
	@pl_ip varchar(20)
)
AS
Begin
	INSERT INTO [Tunnel_projectlog]([pl_title],[pl_content],[pl_time],[pl_user])
	VALUES(@pl_title,@pl_content,@pl_time,@pl_user)
	SET @pl_id = @@IDENTITY
	
	declare @content varchar(1000)
	set @content = ''项经部>>施工日志>>创建施工日志,标题：''+@pl_title
	
	declare @state int
	set @state = 1
	if @pl_id > 0
		exec Tunnel_log_ADD 0,@pl_user,@content,@pl_ip,@state
End
' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_projectlog_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除工程概况 
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_projectlog_Delete]
(
	@pl_id bigint,
	@pl_user int,
	@pl_ip varchar(20)
)
AS 
Begin
	 
	declare @title varchar(1000)
	declare @content varchar(1000)
	declare @state int
	
	declare @num int
	select @title = pl_title from [Tunnel_projectlog] WHERE  pl_id=@pl_id 
	if @title <> '''' 
		DELETE [Tunnel_projectlog] WHERE pl_id=@pl_id
	
	select  @num = count(*) from [Tunnel_projectlog] where  pl_id=@pl_id
	
	set @content = ''项经部>>施工日志>>彻底删除施工日志|名称：''+@title
	set @state = 2
	if @num = 0 
		exec Tunnel_log_ADD 0,@pl_user,@content,@pl_ip,@state
End	

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_report_Delete]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：删除工作报告 
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_report_Delete]
(
	@r_id bigint,
	@r_user int,
	@r_ip varchar(20)
)
AS
Begin 
	
	declare @title varchar(1000)
	declare @content varchar(1000)
	declare @state int
	
	declare @num int
	select @title = r_title from [Tunnel_report] WHERE r_id=@r_id 
	if @title <> '''' 
		DELETE [Tunnel_report] WHERE r_id=@r_id  
	
	select  @num = count(*) from [Tunnel_report] WHERE r_id=@r_id
	
	set @content = ''个人桌面>>管理我的报告>>彻底删除我的报告|标题：''+@title
	set @state = 2
	if @num = 0 
		exec Tunnel_log_ADD 0,@r_user,@content,@r_ip,@state
End	

' 
END
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Tunnel_report_Update]') AND type in (N'P', N'PC'))
BEGIN
EXEC dbo.sp_executesql @statement = N'------------------------------------
--用途：修改工作报告 
------------------------------------
CREATE PROCEDURE [dbo].[Tunnel_report_Update]
(
	@r_id bigint,
	@r_title varchar(200),
	@r_file varchar(100),
	@r_time datetime,
	@r_from int,
	@r_user int,
	@r_ip varchar(20)
)
AS
Begin 
	UPDATE [Tunnel_report] SET 
	[r_title] = @r_title,[r_file] = @r_file,[r_time] = @r_time,[r_from] = @r_from,[r_user] = @r_user
	WHERE r_id=@r_id 
	
	declare @state int
	declare @content varchar(1000)
	set @state = 3
	set @content = ''个人桌面>>管理我的报告>>修改我的报告|标题：''+@r_title
	exec Tunnel_log_ADD 0,@r_user,@content,@r_ip,@state
End	

' 
END
GO
IF NOT EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_Tunnel_ReportModel_Tunnel_bum]') AND parent_object_id = OBJECT_ID(N'[dbo].[Tunnel_ReportModel]'))
ALTER TABLE [dbo].[Tunnel_ReportModel]  WITH CHECK ADD  CONSTRAINT [FK_Tunnel_ReportModel_Tunnel_bum] FOREIGN KEY([Re_BumId])
REFERENCES [dbo].[Tunnel_bum] ([b_id])
GO
ALTER TABLE [dbo].[Tunnel_ReportModel] CHECK CONSTRAINT [FK_Tunnel_ReportModel_Tunnel_bum]
